import { isBrowser } from '../../utils/utils';
import { MSG_NAME_TO_IFRAME } from '../type';
export function sendMessageToIframe(data) {
    if (!window?.frames?.ABTastyQaAssistant || !isBrowser()) {
        return;
    }
    window.frames.ABTastyQaAssistant.postMessage(data, '*');
}
export function sendVisitorAllocatedVariations(visitorVariations) {
    if (!isBrowser()) {
        return;
    }
    window.flagship = {
        ...window.flagship,
        visitorVariations
    };
    sendMessageToIframe({ name: MSG_NAME_TO_IFRAME.FsUpdateVisitorAllocatedVariation, value: visitorVariations });
}
export function sendVisitorExposedVariations(visitorVariations) {
    sendMessageToIframe({ name: MSG_NAME_TO_IFRAME.FsVisitorExposedVariation, value: visitorVariations });
}
export function sendFsHitToQA(hit) {
    sendMessageToIframe({
        name: MSG_NAME_TO_IFRAME.FsHIT,
        value: hit.map(item => {
            return { ...item, timestamp: Date.now() - item.qt };
        })
    });
}
