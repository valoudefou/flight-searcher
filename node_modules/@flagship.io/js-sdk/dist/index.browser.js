/*! For license information please see index.browser.js.LICENSE.txt */
(()=>{var t={9662:(t,e,n)=>{var i=n(614),r=n(6330),o=TypeError;t.exports=function(t){if(i(t))return t;throw o(r(t)+" is not a function")}},9483:(t,e,n)=>{var i=n(4411),r=n(6330),o=TypeError;t.exports=function(t){if(i(t))return t;throw o(r(t)+" is not a constructor")}},6077:(t,e,n)=>{var i=n(614),r=String,o=TypeError;t.exports=function(t){if("object"==typeof t||i(t))return t;throw o("Can't set "+r(t)+" as a prototype")}},1223:(t,e,n)=>{var i=n(5112),r=n(30),o=n(3070).f,s=i("unscopables"),a=Array.prototype;null==a[s]&&o(a,s,{configurable:!0,value:r(null)}),t.exports=function(t){a[s][t]=!0}},1530:(t,e,n)=>{"use strict";var i=n(8710).charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},5787:(t,e,n)=>{var i=n(7976),r=TypeError;t.exports=function(t,e){if(i(e,t))return t;throw r("Incorrect invocation")}},9670:(t,e,n)=>{var i=n(111),r=String,o=TypeError;t.exports=function(t){if(i(t))return t;throw o(r(t)+" is not an object")}},7556:(t,e,n)=>{var i=n(7293);t.exports=i((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},8533:(t,e,n)=>{"use strict";var i=n(2092).forEach,r=n(9341)("forEach");t.exports=r?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},8457:(t,e,n)=>{"use strict";var i=n(9974),r=n(6916),o=n(7908),s=n(3411),a=n(7659),c=n(4411),u=n(6244),f=n(6135),l=n(4121),h=n(1246),g=Array;t.exports=function(t){var e=o(t),n=c(this),p=arguments.length,d=p>1?arguments[1]:void 0,v=void 0!==d;v&&(d=i(d,p>2?arguments[2]:void 0));var y,m,I,k,b,_,C=h(e),O=0;if(!C||this===g&&a(C))for(y=u(e),m=n?new this(y):g(y);y>O;O++)_=v?d(e[O],O):e[O],f(m,O,_);else for(b=(k=l(e,C)).next,m=n?new this:[];!(I=r(b,k)).done;O++)_=v?s(k,d,[I.value,O],!0):I.value,f(m,O,_);return m.length=O,m}},1318:(t,e,n)=>{var i=n(5656),r=n(1400),o=n(6244),s=function(t){return function(e,n,s){var a,c=i(e),u=o(c),f=r(s,u);if(t&&n!=n){for(;u>f;)if((a=c[f++])!=a)return!0}else for(;u>f;f++)if((t||f in c)&&c[f]===n)return t||f||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},2092:(t,e,n)=>{var i=n(9974),r=n(1702),o=n(8361),s=n(7908),a=n(6244),c=n(5417),u=r([].push),f=function(t){var e=1==t,n=2==t,r=3==t,f=4==t,l=6==t,h=7==t,g=5==t||l;return function(p,d,v,y){for(var m,I,k=s(p),b=o(k),_=i(d,v),C=a(b),O=0,T=y||c,x=e?T(p,C):n||h?T(p,0):void 0;C>O;O++)if((g||O in b)&&(I=_(m=b[O],O,k),t))if(e)x[O]=I;else if(I)switch(t){case 3:return!0;case 5:return m;case 6:return O;case 2:u(x,m)}else switch(t){case 4:return!1;case 7:u(x,m)}return l?-1:r||f?f:x}};t.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6),filterReject:f(7)}},1194:(t,e,n)=>{var i=n(7293),r=n(5112),o=n(7392),s=r("species");t.exports=function(t){return o>=51||!i((function(){var e=[];return(e.constructor={})[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},9341:(t,e,n)=>{"use strict";var i=n(7293);t.exports=function(t,e){var n=[][t];return!!n&&i((function(){n.call(null,e||function(){return 1},1)}))}},1589:(t,e,n)=>{var i=n(1400),r=n(6244),o=n(6135),s=Array,a=Math.max;t.exports=function(t,e,n){for(var c=r(t),u=i(e,c),f=i(void 0===n?c:n,c),l=s(a(f-u,0)),h=0;u<f;u++,h++)o(l,h,t[u]);return l.length=h,l}},206:(t,e,n)=>{var i=n(1702);t.exports=i([].slice)},4362:(t,e,n)=>{var i=n(1589),r=Math.floor,o=function(t,e){var n=t.length,c=r(n/2);return n<8?s(t,e):a(t,o(i(t,0,c),e),o(i(t,c),e),e)},s=function(t,e){for(var n,i,r=t.length,o=1;o<r;){for(i=o,n=t[o];i&&e(t[i-1],n)>0;)t[i]=t[--i];i!==o++&&(t[i]=n)}return t},a=function(t,e,n,i){for(var r=e.length,o=n.length,s=0,a=0;s<r||a<o;)t[s+a]=s<r&&a<o?i(e[s],n[a])<=0?e[s++]:n[a++]:s<r?e[s++]:n[a++];return t};t.exports=o},7475:(t,e,n)=>{var i=n(3157),r=n(4411),o=n(111),s=n(5112)("species"),a=Array;t.exports=function(t){var e;return i(t)&&(e=t.constructor,(r(e)&&(e===a||i(e.prototype))||o(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?a:e}},5417:(t,e,n)=>{var i=n(7475);t.exports=function(t,e){return new(i(t))(0===e?0:e)}},3411:(t,e,n)=>{var i=n(9670),r=n(9212);t.exports=function(t,e,n,o){try{return o?e(i(n)[0],n[1]):e(n)}catch(e){r(t,"throw",e)}}},7072:(t,e,n)=>{var i=n(5112)("iterator"),r=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){r=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o={};o[i]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},4326:(t,e,n)=>{var i=n(1702),r=i({}.toString),o=i("".slice);t.exports=function(t){return o(r(t),8,-1)}},648:(t,e,n)=>{var i=n(1694),r=n(614),o=n(4326),s=n(5112)("toStringTag"),a=Object,c="Arguments"==o(function(){return arguments}());t.exports=i?o:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=a(t),s))?n:c?o(e):"Object"==(i=o(e))&&r(e.callee)?"Arguments":i}},5631:(t,e,n)=>{"use strict";var i=n(30),r=n(7045),o=n(9190),s=n(9974),a=n(5787),c=n(8554),u=n(408),f=n(1656),l=n(6178),h=n(6340),g=n(9781),p=n(2423).fastKey,d=n(9909),v=d.set,y=d.getterFor;t.exports={getConstructor:function(t,e,n,f){var l=t((function(t,r){a(t,h),v(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),g||(t.size=0),c(r)||u(r,t[f],{that:t,AS_ENTRIES:n})})),h=l.prototype,d=y(e),m=function(t,e,n){var i,r,o=d(t),s=I(t,e);return s?s.value=n:(o.last=s={index:r=p(e,!0),key:e,value:n,previous:i=o.last,next:void 0,removed:!1},o.first||(o.first=s),i&&(i.next=s),g?o.size++:t.size++,"F"!==r&&(o.index[r]=s)),t},I=function(t,e){var n,i=d(t),r=p(e);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==e)return n};return o(h,{clear:function(){for(var t=d(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,g?t.size=0:this.size=0},delete:function(t){var e=this,n=d(e),i=I(e,t);if(i){var r=i.next,o=i.previous;delete n.index[i.index],i.removed=!0,o&&(o.next=r),r&&(r.previous=o),n.first==i&&(n.first=r),n.last==i&&(n.last=o),g?n.size--:e.size--}return!!i},forEach:function(t){for(var e,n=d(this),i=s(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:n.first;)for(i(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!I(this,t)}}),o(h,n?{get:function(t){var e=I(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),g&&r(h,"size",{configurable:!0,get:function(){return d(this).size}}),l},setStrong:function(t,e,n){var i=e+" Iterator",r=y(e),o=y(i);f(t,e,(function(t,e){v(this,{type:i,target:t,state:r(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?l("keys"==e?n.key:"values"==e?n.value:[n.key,n.value],!1):(t.target=void 0,l(void 0,!0))}),n?"entries":"values",!n,!0),h(e)}}},7710:(t,e,n)=>{"use strict";var i=n(2109),r=n(7854),o=n(1702),s=n(4705),a=n(8052),c=n(2423),u=n(408),f=n(5787),l=n(614),h=n(8554),g=n(111),p=n(7293),d=n(7072),v=n(8003),y=n(9587);t.exports=function(t,e,n){var m=-1!==t.indexOf("Map"),I=-1!==t.indexOf("Weak"),k=m?"set":"add",b=r[t],_=b&&b.prototype,C=b,O={},T=function(t){var e=o(_[t]);a(_,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(I&&!g(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return I&&!g(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(I&&!g(t))&&e(this,0===t?0:t)}:function(t,n){return e(this,0===t?0:t,n),this})};if(s(t,!l(b)||!(I||_.forEach&&!p((function(){(new b).entries().next()})))))C=n.getConstructor(e,t,m,k),c.enable();else if(s(t,!0)){var x=new C,E=x[k](I?{}:-0,1)!=x,S=p((function(){x.has(1)})),w=d((function(t){new b(t)})),R=!I&&p((function(){for(var t=new b,e=5;e--;)t[k](e,e);return!t.has(-0)}));w||((C=e((function(t,e){f(t,_);var n=y(new b,t,C);return h(e)||u(e,n[k],{that:n,AS_ENTRIES:m}),n}))).prototype=_,_.constructor=C),(S||R)&&(T("delete"),T("has"),m&&T("get")),(R||E)&&T(k),I&&_.clear&&delete _.clear}return O[t]=C,i({global:!0,constructor:!0,forced:C!=b},O),v(C,t),I||n.setStrong(C,t,m),C}},9920:(t,e,n)=>{var i=n(2597),r=n(3887),o=n(1236),s=n(3070);t.exports=function(t,e,n){for(var a=r(e),c=s.f,u=o.f,f=0;f<a.length;f++){var l=a[f];i(t,l)||n&&i(n,l)||c(t,l,u(e,l))}}},4964:(t,e,n)=>{var i=n(5112)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,"/./"[t](e)}catch(t){}}return!1}},8544:(t,e,n)=>{var i=n(7293);t.exports=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},6178:t=>{t.exports=function(t,e){return{value:t,done:e}}},8880:(t,e,n)=>{var i=n(9781),r=n(3070),o=n(9114);t.exports=i?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},9114:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6135:(t,e,n)=>{"use strict";var i=n(4948),r=n(3070),o=n(9114);t.exports=function(t,e,n){var s=i(e);s in t?r.f(t,s,o(0,n)):t[s]=n}},7045:(t,e,n)=>{var i=n(6339),r=n(3070);t.exports=function(t,e,n){return n.get&&i(n.get,e,{getter:!0}),n.set&&i(n.set,e,{setter:!0}),r.f(t,e,n)}},8052:(t,e,n)=>{var i=n(614),r=n(3070),o=n(6339),s=n(3072);t.exports=function(t,e,n,a){a||(a={});var c=a.enumerable,u=void 0!==a.name?a.name:e;if(i(n)&&o(n,u,a),a.global)c?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(c=!0):delete t[e]}catch(t){}c?t[e]=n:r.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},9190:(t,e,n)=>{var i=n(8052);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},3072:(t,e,n)=>{var i=n(7854),r=Object.defineProperty;t.exports=function(t,e){try{r(i,t,{value:e,configurable:!0,writable:!0})}catch(n){i[t]=e}return e}},9781:(t,e,n)=>{var i=n(7293);t.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:t=>{var e="object"==typeof document&&document.all,n=void 0===e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:n}},317:(t,e,n)=>{var i=n(7854),r=n(111),o=i.document,s=r(o)&&r(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},7207:t=>{var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},8324:t=>{t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(t,e,n)=>{var i=n(317)("span").classList,r=i&&i.constructor&&i.constructor.prototype;t.exports=r===Object.prototype?void 0:r},7871:(t,e,n)=>{var i=n(3823),r=n(5268);t.exports=!i&&!r&&"object"==typeof window&&"object"==typeof document},3823:t=>{t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},1528:(t,e,n)=>{var i=n(8113);t.exports=/ipad|iphone|ipod/i.test(i)&&"undefined"!=typeof Pebble},6833:(t,e,n)=>{var i=n(8113);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)},5268:(t,e,n)=>{var i=n(4326);t.exports="undefined"!=typeof process&&"process"==i(process)},1036:(t,e,n)=>{var i=n(8113);t.exports=/web0s(?!.*chrome)/i.test(i)},8113:t=>{t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:(t,e,n)=>{var i,r,o=n(7854),s=n(8113),a=o.process,c=o.Deno,u=a&&a.versions||c&&c.version,f=u&&u.v8;f&&(r=(i=f.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(r=+i[1]),t.exports=r},748:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(t,e,n)=>{var i=n(7854),r=n(1236).f,o=n(8880),s=n(8052),a=n(3072),c=n(9920),u=n(4705);t.exports=function(t,e){var n,f,l,h,g,p=t.target,d=t.global,v=t.stat;if(n=d?i:v?i[p]||a(p,{}):(i[p]||{}).prototype)for(f in e){if(h=e[f],l=t.dontCallGetSet?(g=r(n,f))&&g.value:n[f],!u(d?f:p+(v?".":"#")+f,t.forced)&&void 0!==l){if(typeof h==typeof l)continue;c(h,l)}(t.sham||l&&l.sham)&&o(h,"sham",!0),s(n,f,h,t)}}},7293:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},7007:(t,e,n)=>{"use strict";n(4916);var i=n(1470),r=n(8052),o=n(2261),s=n(7293),a=n(5112),c=n(8880),u=a("species"),f=RegExp.prototype;t.exports=function(t,e,n,l){var h=a(t),g=!s((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),p=g&&!s((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[u]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return e=!0,null},n[h](""),!e}));if(!g||!p||n){var d=i(/./[h]),v=e(h,""[t],(function(t,e,n,r,s){var a=i(t),c=e.exec;return c===o||c===f.exec?g&&!s?{done:!0,value:d(e,n,r)}:{done:!0,value:a(n,e,r)}:{done:!1}}));r(String.prototype,t,v[0]),r(f,h,v[1])}l&&c(f[h],"sham",!0)}},6677:(t,e,n)=>{var i=n(7293);t.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},2104:(t,e,n)=>{var i=n(4374),r=Function.prototype,o=r.apply,s=r.call;t.exports="object"==typeof Reflect&&Reflect.apply||(i?s.bind(o):function(){return s.apply(o,arguments)})},9974:(t,e,n)=>{var i=n(1470),r=n(9662),o=n(4374),s=i(i.bind);t.exports=function(t,e){return r(t),void 0===e?t:o?s(t,e):function(){return t.apply(e,arguments)}}},4374:(t,e,n)=>{var i=n(7293);t.exports=!i((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},7065:(t,e,n)=>{"use strict";var i=n(1702),r=n(9662),o=n(111),s=n(2597),a=n(206),c=n(4374),u=Function,f=i([].concat),l=i([].join),h={};t.exports=c?u.bind:function(t){var e=r(this),n=e.prototype,i=a(arguments,1),c=function(){var n=f(i,a(arguments));return this instanceof c?function(t,e,n){if(!s(h,e)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";h[e]=u("C,a","return new C("+l(i,",")+")")}return h[e](t,n)}(e,n.length,n):e.apply(t,n)};return o(n)&&(c.prototype=n),c}},6916:(t,e,n)=>{var i=n(4374),r=Function.prototype.call;t.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},6530:(t,e,n)=>{var i=n(9781),r=n(2597),o=Function.prototype,s=i&&Object.getOwnPropertyDescriptor,a=r(o,"name"),c=a&&"something"===function(){}.name,u=a&&(!i||i&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},5668:(t,e,n)=>{var i=n(1702),r=n(9662);t.exports=function(t,e,n){try{return i(r(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(t){}}},1470:(t,e,n)=>{var i=n(4326),r=n(1702);t.exports=function(t){if("Function"===i(t))return r(t)}},1702:(t,e,n)=>{var i=n(4374),r=Function.prototype,o=r.call,s=i&&r.bind.bind(o,o);t.exports=i?s:function(t){return function(){return o.apply(t,arguments)}}},5005:(t,e,n)=>{var i=n(7854),r=n(614);t.exports=function(t,e){return arguments.length<2?(n=i[t],r(n)?n:void 0):i[t]&&i[t][e];var n}},1246:(t,e,n)=>{var i=n(648),r=n(8173),o=n(8554),s=n(7497),a=n(5112)("iterator");t.exports=function(t){if(!o(t))return r(t,a)||r(t,"@@iterator")||s[i(t)]}},4121:(t,e,n)=>{var i=n(6916),r=n(9662),o=n(9670),s=n(6330),a=n(1246),c=TypeError;t.exports=function(t,e){var n=arguments.length<2?a(t):e;if(r(n))return o(i(n,t));throw c(s(t)+" is not iterable")}},8044:(t,e,n)=>{var i=n(1702),r=n(3157),o=n(614),s=n(4326),a=n(1340),c=i([].push);t.exports=function(t){if(o(t))return t;if(r(t)){for(var e=t.length,n=[],i=0;i<e;i++){var u=t[i];"string"==typeof u?c(n,u):"number"!=typeof u&&"Number"!=s(u)&&"String"!=s(u)||c(n,a(u))}var f=n.length,l=!0;return function(t,e){if(l)return l=!1,e;if(r(this))return e;for(var i=0;i<f;i++)if(n[i]===t)return e}}}},8173:(t,e,n)=>{var i=n(9662),r=n(8554);t.exports=function(t,e){var n=t[e];return r(n)?void 0:i(n)}},647:(t,e,n)=>{var i=n(1702),r=n(7908),o=Math.floor,s=i("".charAt),a=i("".replace),c=i("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,f=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,i,l,h){var g=n+t.length,p=i.length,d=f;return void 0!==l&&(l=r(l),d=u),a(h,d,(function(r,a){var u;switch(s(a,0)){case"$":return"$";case"&":return t;case"`":return c(e,0,n);case"'":return c(e,g);case"<":u=l[c(a,1,-1)];break;default:var f=+a;if(0===f)return r;if(f>p){var h=o(f/10);return 0===h?r:h<=p?void 0===i[h-1]?s(a,1):i[h-1]+s(a,1):r}u=i[f-1]}return void 0===u?"":u}))}},7854:(t,e,n)=>{var i=function(t){return t&&t.Math==Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:(t,e,n)=>{var i=n(1702),r=n(7908),o=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(r(t),e)}},3501:t=>{t.exports={}},842:t=>{t.exports=function(t,e){try{1==arguments.length?console.error(t):console.error(t,e)}catch(t){}}},490:(t,e,n)=>{var i=n(5005);t.exports=i("document","documentElement")},4664:(t,e,n)=>{var i=n(9781),r=n(7293),o=n(317);t.exports=!i&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:(t,e,n)=>{var i=n(1702),r=n(7293),o=n(4326),s=Object,a=i("".split);t.exports=r((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?a(t,""):s(t)}:s},9587:(t,e,n)=>{var i=n(614),r=n(111),o=n(7674);t.exports=function(t,e,n){var s,a;return o&&i(s=e.constructor)&&s!==n&&r(a=s.prototype)&&a!==n.prototype&&o(t,a),t}},2788:(t,e,n)=>{var i=n(1702),r=n(614),o=n(5465),s=i(Function.toString);r(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},2423:(t,e,n)=>{var i=n(2109),r=n(1702),o=n(3501),s=n(111),a=n(2597),c=n(3070).f,u=n(8006),f=n(1156),l=n(2050),h=n(9711),g=n(6677),p=!1,d=h("meta"),v=0,y=function(t){c(t,d,{value:{objectID:"O"+v++,weakData:{}}})},m=t.exports={enable:function(){m.enable=function(){},p=!0;var t=u.f,e=r([].splice),n={};n[d]=1,t(n).length&&(u.f=function(n){for(var i=t(n),r=0,o=i.length;r<o;r++)if(i[r]===d){e(i,r,1);break}return i},i({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:f.f}))},fastKey:function(t,e){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,d)){if(!l(t))return"F";if(!e)return"E";y(t)}return t[d].objectID},getWeakData:function(t,e){if(!a(t,d)){if(!l(t))return!0;if(!e)return!1;y(t)}return t[d].weakData},onFreeze:function(t){return g&&p&&l(t)&&!a(t,d)&&y(t),t}};o[d]=!0},9909:(t,e,n)=>{var i,r,o,s=n(4811),a=n(7854),c=n(111),u=n(8880),f=n(2597),l=n(5465),h=n(6200),g=n(3501),p="Object already initialized",d=a.TypeError,v=a.WeakMap;if(s||l.state){var y=l.state||(l.state=new v);y.get=y.get,y.has=y.has,y.set=y.set,i=function(t,e){if(y.has(t))throw d(p);return e.facade=t,y.set(t,e),e},r=function(t){return y.get(t)||{}},o=function(t){return y.has(t)}}else{var m=h("state");g[m]=!0,i=function(t,e){if(f(t,m))throw d(p);return e.facade=t,u(t,m,e),e},r=function(t){return f(t,m)?t[m]:{}},o=function(t){return f(t,m)}}t.exports={set:i,get:r,has:o,enforce:function(t){return o(t)?r(t):i(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=r(e)).type!==t)throw d("Incompatible receiver, "+t+" required");return n}}}},7659:(t,e,n)=>{var i=n(5112),r=n(7497),o=i("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||s[o]===t)}},3157:(t,e,n)=>{var i=n(4326);t.exports=Array.isArray||function(t){return"Array"==i(t)}},614:(t,e,n)=>{var i=n(4154),r=i.all;t.exports=i.IS_HTMLDDA?function(t){return"function"==typeof t||t===r}:function(t){return"function"==typeof t}},4411:(t,e,n)=>{var i=n(1702),r=n(7293),o=n(614),s=n(648),a=n(5005),c=n(2788),u=function(){},f=[],l=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,g=i(h.exec),p=!h.exec(u),d=function(t){if(!o(t))return!1;try{return l(u,f,t),!0}catch(t){return!1}},v=function(t){if(!o(t))return!1;switch(s(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!g(h,c(t))}catch(t){return!0}};v.sham=!0,t.exports=!l||r((function(){var t;return d(d.call)||!d(Object)||!d((function(){t=!0}))||t}))?v:d},4705:(t,e,n)=>{var i=n(7293),r=n(614),o=/#|\.prototype\./,s=function(t,e){var n=c[a(t)];return n==f||n!=u&&(r(e)?i(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=s.data={},u=s.NATIVE="N",f=s.POLYFILL="P";t.exports=s},5988:(t,e,n)=>{var i=n(111),r=Math.floor;t.exports=Number.isInteger||function(t){return!i(t)&&isFinite(t)&&r(t)===t}},8554:t=>{t.exports=function(t){return null==t}},111:(t,e,n)=>{var i=n(614),r=n(4154),o=r.all;t.exports=r.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:i(t)||t===o}:function(t){return"object"==typeof t?null!==t:i(t)}},1913:t=>{t.exports=!1},7850:(t,e,n)=>{var i=n(111),r=n(4326),o=n(5112)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},2190:(t,e,n)=>{var i=n(5005),r=n(614),o=n(7976),s=n(3307),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return r(e)&&o(e.prototype,a(t))}},408:(t,e,n)=>{var i=n(9974),r=n(6916),o=n(9670),s=n(6330),a=n(7659),c=n(6244),u=n(7976),f=n(4121),l=n(1246),h=n(9212),g=TypeError,p=function(t,e){this.stopped=t,this.result=e},d=p.prototype;t.exports=function(t,e,n){var v,y,m,I,k,b,_,C=n&&n.that,O=!(!n||!n.AS_ENTRIES),T=!(!n||!n.IS_RECORD),x=!(!n||!n.IS_ITERATOR),E=!(!n||!n.INTERRUPTED),S=i(e,C),w=function(t){return v&&h(v,"normal",t),new p(!0,t)},R=function(t){return O?(o(t),E?S(t[0],t[1],w):S(t[0],t[1])):E?S(t,w):S(t)};if(T)v=t.iterator;else if(x)v=t;else{if(!(y=l(t)))throw g(s(t)+" is not iterable");if(a(y)){for(m=0,I=c(t);I>m;m++)if((k=R(t[m]))&&u(d,k))return k;return new p(!1)}v=f(t,y)}for(b=T?t.next:v.next;!(_=r(b,v)).done;){try{k=R(_.value)}catch(t){h(v,"throw",t)}if("object"==typeof k&&k&&u(d,k))return k}return new p(!1)}},9212:(t,e,n)=>{var i=n(6916),r=n(9670),o=n(8173);t.exports=function(t,e,n){var s,a;r(t);try{if(!(s=o(t,"return"))){if("throw"===e)throw n;return n}s=i(s,t)}catch(t){a=!0,s=t}if("throw"===e)throw n;if(a)throw s;return r(s),n}},3061:(t,e,n)=>{"use strict";var i=n(3383).IteratorPrototype,r=n(30),o=n(9114),s=n(8003),a=n(7497),c=function(){return this};t.exports=function(t,e,n,u){var f=e+" Iterator";return t.prototype=r(i,{next:o(+!u,n)}),s(t,f,!1,!0),a[f]=c,t}},1656:(t,e,n)=>{"use strict";var i=n(2109),r=n(6916),o=n(1913),s=n(6530),a=n(614),c=n(3061),u=n(9518),f=n(7674),l=n(8003),h=n(8880),g=n(8052),p=n(5112),d=n(7497),v=n(3383),y=s.PROPER,m=s.CONFIGURABLE,I=v.IteratorPrototype,k=v.BUGGY_SAFARI_ITERATORS,b=p("iterator"),_="keys",C="values",O="entries",T=function(){return this};t.exports=function(t,e,n,s,p,v,x){c(n,e,s);var E,S,w,R=function(t){if(t===p&&M)return M;if(!k&&t in D)return D[t];switch(t){case _:case C:case O:return function(){return new n(this,t)}}return function(){return new n(this)}},A=e+" Iterator",N=!1,D=t.prototype,P=D[b]||D["@@iterator"]||p&&D[p],M=!k&&P||R(p),F="Array"==e&&D.entries||P;if(F&&(E=u(F.call(new t)))!==Object.prototype&&E.next&&(o||u(E)===I||(f?f(E,I):a(E[b])||g(E,b,T)),l(E,A,!0,!0),o&&(d[A]=T)),y&&p==C&&P&&P.name!==C&&(!o&&m?h(D,"name",C):(N=!0,M=function(){return r(P,this)})),p)if(S={values:R(C),keys:v?M:R(_),entries:R(O)},x)for(w in S)(k||N||!(w in D))&&g(D,w,S[w]);else i({target:e,proto:!0,forced:k||N},S);return o&&!x||D[b]===M||g(D,b,M,{name:p}),d[e]=M,S}},3383:(t,e,n)=>{"use strict";var i,r,o,s=n(7293),a=n(614),c=n(111),u=n(30),f=n(9518),l=n(8052),h=n(5112),g=n(1913),p=h("iterator"),d=!1;[].keys&&("next"in(o=[].keys())?(r=f(f(o)))!==Object.prototype&&(i=r):d=!0),!c(i)||s((function(){var t={};return i[p].call(t)!==t}))?i={}:g&&(i=u(i)),a(i[p])||l(i,p,(function(){return this})),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:d}},7497:t=>{t.exports={}},6244:(t,e,n)=>{var i=n(7466);t.exports=function(t){return i(t.length)}},6339:(t,e,n)=>{var i=n(1702),r=n(7293),o=n(614),s=n(2597),a=n(9781),c=n(6530).CONFIGURABLE,u=n(2788),f=n(9909),l=f.enforce,h=f.get,g=String,p=Object.defineProperty,d=i("".slice),v=i("".replace),y=i([].join),m=a&&!r((function(){return 8!==p((function(){}),"length",{value:8}).length})),I=String(String).split("String"),k=t.exports=function(t,e,n){"Symbol("===d(g(e),0,7)&&(e="["+v(g(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||c&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),m&&n&&s(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var i=l(t);return s(i,"source")||(i.source=y(I,"string"==typeof e?e:"")),t};Function.prototype.toString=k((function(){return o(this)&&h(this).source||u(this)}),"toString")},4758:t=>{var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var i=+t;return(i>0?n:e)(i)}},5948:(t,e,n)=>{var i,r,o,s,a,c=n(7854),u=n(9974),f=n(1236).f,l=n(261).set,h=n(8572),g=n(6833),p=n(1528),d=n(1036),v=n(5268),y=c.MutationObserver||c.WebKitMutationObserver,m=c.document,I=c.process,k=c.Promise,b=f(c,"queueMicrotask"),_=b&&b.value;if(!_){var C=new h,O=function(){var t,e;for(v&&(t=I.domain)&&t.exit();e=C.get();)try{e()}catch(t){throw C.head&&i(),t}t&&t.enter()};g||v||d||!y||!m?!p&&k&&k.resolve?((s=k.resolve(void 0)).constructor=k,a=u(s.then,s),i=function(){a(O)}):v?i=function(){I.nextTick(O)}:(l=u(l,c),i=function(){l(O)}):(r=!0,o=m.createTextNode(""),new y(O).observe(o,{characterData:!0}),i=function(){o.data=r=!r}),_=function(t){C.head||i(),C.add(t)}}t.exports=_},8523:(t,e,n)=>{"use strict";var i=n(9662),r=TypeError,o=function(t){var e,n;this.promise=new t((function(t,i){if(void 0!==e||void 0!==n)throw r("Bad Promise constructor");e=t,n=i})),this.resolve=i(e),this.reject=i(n)};t.exports.f=function(t){return new o(t)}},3929:(t,e,n)=>{var i=n(7850),r=TypeError;t.exports=function(t){if(i(t))throw r("The method doesn't accept regular expressions");return t}},3009:(t,e,n)=>{var i=n(7854),r=n(7293),o=n(1702),s=n(1340),a=n(3111).trim,c=n(1361),u=i.parseInt,f=i.Symbol,l=f&&f.iterator,h=/^[+-]?0x/i,g=o(h.exec),p=8!==u(c+"08")||22!==u(c+"0x16")||l&&!r((function(){u(Object(l))}));t.exports=p?function(t,e){var n=a(s(t));return u(n,e>>>0||(g(h,n)?16:10))}:u},30:(t,e,n)=>{var i,r=n(9670),o=n(6048),s=n(748),a=n(3501),c=n(490),u=n(317),f=n(6200),l="prototype",h="script",g=f("IE_PROTO"),p=function(){},d=function(t){return"<"+h+">"+t+"</"+h+">"},v=function(t){t.write(d("")),t.close();var e=t.parentWindow.Object;return t=null,e},y=function(){try{i=new ActiveXObject("htmlfile")}catch(t){}var t,e,n;y="undefined"!=typeof document?document.domain&&i?v(i):(e=u("iframe"),n="java"+h+":",e.style.display="none",c.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(d("document.F=Object")),t.close(),t.F):v(i);for(var r=s.length;r--;)delete y[l][s[r]];return y()};a[g]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(p[l]=r(t),n=new p,p[l]=null,n[g]=t):n=y(),void 0===e?n:o.f(n,e)}},6048:(t,e,n)=>{var i=n(9781),r=n(3353),o=n(3070),s=n(9670),a=n(5656),c=n(1956);e.f=i&&!r?Object.defineProperties:function(t,e){s(t);for(var n,i=a(e),r=c(e),u=r.length,f=0;u>f;)o.f(t,n=r[f++],i[n]);return t}},3070:(t,e,n)=>{var i=n(9781),r=n(4664),o=n(3353),s=n(9670),a=n(4948),c=TypeError,u=Object.defineProperty,f=Object.getOwnPropertyDescriptor,l="enumerable",h="configurable",g="writable";e.f=i?o?function(t,e,n){if(s(t),e=a(e),s(n),"function"==typeof t&&"prototype"===e&&"value"in n&&g in n&&!n[g]){var i=f(t,e);i&&i[g]&&(t[e]=n.value,n={configurable:h in n?n[h]:i[h],enumerable:l in n?n[l]:i[l],writable:!1})}return u(t,e,n)}:u:function(t,e,n){if(s(t),e=a(e),s(n),r)try{return u(t,e,n)}catch(t){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:(t,e,n)=>{var i=n(9781),r=n(6916),o=n(5296),s=n(9114),a=n(5656),c=n(4948),u=n(2597),f=n(4664),l=Object.getOwnPropertyDescriptor;e.f=i?l:function(t,e){if(t=a(t),e=c(e),f)try{return l(t,e)}catch(t){}if(u(t,e))return s(!r(o.f,t,e),t[e])}},1156:(t,e,n)=>{var i=n(4326),r=n(5656),o=n(8006).f,s=n(1589),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"Window"==i(t)?function(t){try{return o(t)}catch(t){return s(a)}}(t):o(r(t))}},8006:(t,e,n)=>{var i=n(6324),r=n(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},5181:(t,e)=>{e.f=Object.getOwnPropertySymbols},9518:(t,e,n)=>{var i=n(2597),r=n(614),o=n(7908),s=n(6200),a=n(8544),c=s("IE_PROTO"),u=Object,f=u.prototype;t.exports=a?u.getPrototypeOf:function(t){var e=o(t);if(i(e,c))return e[c];var n=e.constructor;return r(n)&&e instanceof n?n.prototype:e instanceof u?f:null}},2050:(t,e,n)=>{var i=n(7293),r=n(111),o=n(4326),s=n(7556),a=Object.isExtensible,c=i((function(){a(1)}));t.exports=c||s?function(t){return!!r(t)&&(!s||"ArrayBuffer"!=o(t))&&(!a||a(t))}:a},7976:(t,e,n)=>{var i=n(1702);t.exports=i({}.isPrototypeOf)},6324:(t,e,n)=>{var i=n(1702),r=n(2597),o=n(5656),s=n(1318).indexOf,a=n(3501),c=i([].push);t.exports=function(t,e){var n,i=o(t),u=0,f=[];for(n in i)!r(a,n)&&r(i,n)&&c(f,n);for(;e.length>u;)r(i,n=e[u++])&&(~s(f,n)||c(f,n));return f}},1956:(t,e,n)=>{var i=n(6324),r=n(748);t.exports=Object.keys||function(t){return i(t,r)}},5296:(t,e)=>{"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);e.f=r?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},7674:(t,e,n)=>{var i=n(5668),r=n(9670),o=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=i(Object.prototype,"__proto__","set"))(n,[]),e=n instanceof Array}catch(t){}return function(n,i){return r(n),o(i),e?t(n,i):n.__proto__=i,n}}():void 0)},4699:(t,e,n)=>{var i=n(9781),r=n(1702),o=n(1956),s=n(5656),a=r(n(5296).f),c=r([].push),u=function(t){return function(e){for(var n,r=s(e),u=o(r),f=u.length,l=0,h=[];f>l;)n=u[l++],i&&!a(r,n)||c(h,t?[n,r[n]]:r[n]);return h}};t.exports={entries:u(!0),values:u(!1)}},288:(t,e,n)=>{"use strict";var i=n(1694),r=n(648);t.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},2140:(t,e,n)=>{var i=n(6916),r=n(614),o=n(111),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&r(n=t.toString)&&!o(a=i(n,t)))return a;if(r(n=t.valueOf)&&!o(a=i(n,t)))return a;if("string"!==e&&r(n=t.toString)&&!o(a=i(n,t)))return a;throw s("Can't convert object to primitive value")}},3887:(t,e,n)=>{var i=n(5005),r=n(1702),o=n(8006),s=n(5181),a=n(9670),c=r([].concat);t.exports=i("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=s.f;return n?c(e,n(t)):e}},857:(t,e,n)=>{var i=n(7854);t.exports=i},2534:t=>{t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},3702:(t,e,n)=>{var i=n(7854),r=n(2492),o=n(614),s=n(4705),a=n(2788),c=n(5112),u=n(7871),f=n(3823),l=n(1913),h=n(7392),g=r&&r.prototype,p=c("species"),d=!1,v=o(i.PromiseRejectionEvent),y=s("Promise",(function(){var t=a(r),e=t!==String(r);if(!e&&66===h)return!0;if(l&&(!g.catch||!g.finally))return!0;if(!h||h<51||!/native code/.test(t)){var n=new r((function(t){t(1)})),i=function(t){t((function(){}),(function(){}))};if((n.constructor={})[p]=i,!(d=n.then((function(){}))instanceof i))return!0}return!e&&(u||f)&&!v}));t.exports={CONSTRUCTOR:y,REJECTION_EVENT:v,SUBCLASSING:d}},2492:(t,e,n)=>{var i=n(7854);t.exports=i.Promise},9478:(t,e,n)=>{var i=n(9670),r=n(111),o=n(8523);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},612:(t,e,n)=>{var i=n(2492),r=n(7072),o=n(3702).CONSTRUCTOR;t.exports=o||!r((function(t){i.all(t).then(void 0,(function(){}))}))},2626:(t,e,n)=>{var i=n(3070).f;t.exports=function(t,e,n){n in t||i(t,n,{configurable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}},8572:t=>{var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var e={item:t,next:null},n=this.tail;n?n.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},t.exports=e},7651:(t,e,n)=>{var i=n(6916),r=n(9670),o=n(614),s=n(4326),a=n(2261),c=TypeError;t.exports=function(t,e){var n=t.exec;if(o(n)){var u=i(n,t,e);return null!==u&&r(u),u}if("RegExp"===s(t))return i(a,t,e);throw c("RegExp#exec called on incompatible receiver")}},2261:(t,e,n)=>{"use strict";var i,r,o=n(6916),s=n(1702),a=n(1340),c=n(7066),u=n(2999),f=n(2309),l=n(30),h=n(9909).get,g=n(9441),p=n(7168),d=f("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,y=v,m=s("".charAt),I=s("".indexOf),k=s("".replace),b=s("".slice),_=(r=/b*/g,o(v,i=/a/,"a"),o(v,r,"a"),0!==i.lastIndex||0!==r.lastIndex),C=u.BROKEN_CARET,O=void 0!==/()??/.exec("")[1];(_||O||C||g||p)&&(y=function(t){var e,n,i,r,s,u,f,g=this,p=h(g),T=a(t),x=p.raw;if(x)return x.lastIndex=g.lastIndex,e=o(y,x,T),g.lastIndex=x.lastIndex,e;var E=p.groups,S=C&&g.sticky,w=o(c,g),R=g.source,A=0,N=T;if(S&&(w=k(w,"y",""),-1===I(w,"g")&&(w+="g"),N=b(T,g.lastIndex),g.lastIndex>0&&(!g.multiline||g.multiline&&"\n"!==m(T,g.lastIndex-1))&&(R="(?: "+R+")",N=" "+N,A++),n=new RegExp("^(?:"+R+")",w)),O&&(n=new RegExp("^"+R+"$(?!\\s)",w)),_&&(i=g.lastIndex),r=o(v,S?n:g,N),S?r?(r.input=b(r.input,A),r[0]=b(r[0],A),r.index=g.lastIndex,g.lastIndex+=r[0].length):g.lastIndex=0:_&&r&&(g.lastIndex=g.global?r.index+r[0].length:i),O&&r&&r.length>1&&o(d,r[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(r[s]=void 0)})),r&&E)for(r.groups=u=l(null),s=0;s<E.length;s++)u[(f=E[s])[0]]=r[f[1]];return r}),t.exports=y},7066:(t,e,n)=>{"use strict";var i=n(9670);t.exports=function(){var t=i(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},4706:(t,e,n)=>{var i=n(6916),r=n(2597),o=n(7976),s=n(7066),a=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in a||r(t,"flags")||!o(a,t)?e:i(s,t)}},2999:(t,e,n)=>{var i=n(7293),r=n(7854).RegExp,o=i((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),s=o||i((function(){return!r("a","y").sticky})),a=o||i((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));t.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:o}},9441:(t,e,n)=>{var i=n(7293),r=n(7854).RegExp;t.exports=i((function(){var t=r(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},7168:(t,e,n)=>{var i=n(7293),r=n(7854).RegExp;t.exports=i((function(){var t=r("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},4488:(t,e,n)=>{var i=n(8554),r=TypeError;t.exports=function(t){if(i(t))throw r("Can't call method on "+t);return t}},1150:t=>{t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},6340:(t,e,n)=>{"use strict";var i=n(5005),r=n(7045),o=n(5112),s=n(9781),a=o("species");t.exports=function(t){var e=i(t);s&&e&&!e[a]&&r(e,a,{configurable:!0,get:function(){return this}})}},8003:(t,e,n)=>{var i=n(3070).f,r=n(2597),o=n(5112)("toStringTag");t.exports=function(t,e,n){t&&!n&&(t=t.prototype),t&&!r(t,o)&&i(t,o,{configurable:!0,value:e})}},6200:(t,e,n)=>{var i=n(2309),r=n(9711),o=i("keys");t.exports=function(t){return o[t]||(o[t]=r(t))}},5465:(t,e,n)=>{var i=n(7854),r=n(3072),o="__core-js_shared__",s=i[o]||r(o,{});t.exports=s},2309:(t,e,n)=>{var i=n(1913),r=n(5465);(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.30.1",mode:i?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.1/LICENSE",source:"https://github.com/zloirock/core-js"})},6707:(t,e,n)=>{var i=n(9670),r=n(9483),o=n(8554),s=n(5112)("species");t.exports=function(t,e){var n,a=i(t).constructor;return void 0===a||o(n=i(a)[s])?e:r(n)}},8710:(t,e,n)=>{var i=n(1702),r=n(9303),o=n(1340),s=n(4488),a=i("".charAt),c=i("".charCodeAt),u=i("".slice),f=function(t){return function(e,n){var i,f,l=o(s(e)),h=r(n),g=l.length;return h<0||h>=g?t?"":void 0:(i=c(l,h))<55296||i>56319||h+1===g||(f=c(l,h+1))<56320||f>57343?t?a(l,h):i:t?u(l,h,h+2):f-56320+(i-55296<<10)+65536}};t.exports={codeAt:f(!1),charAt:f(!0)}},3111:(t,e,n)=>{var i=n(1702),r=n(4488),o=n(1340),s=n(1361),a=i("".replace),c=RegExp("^["+s+"]+"),u=RegExp("(^|[^"+s+"])["+s+"]+$"),f=function(t){return function(e){var n=o(r(e));return 1&t&&(n=a(n,c,"")),2&t&&(n=a(n,u,"$1")),n}};t.exports={start:f(1),end:f(2),trim:f(3)}},6293:(t,e,n)=>{var i=n(7392),r=n(7293);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},6532:(t,e,n)=>{var i=n(6916),r=n(5005),o=n(5112),s=n(8052);t.exports=function(){var t=r("Symbol"),e=t&&t.prototype,n=e&&e.valueOf,a=o("toPrimitive");e&&!e[a]&&s(e,a,(function(t){return i(n,this)}),{arity:1})}},2015:(t,e,n)=>{var i=n(6293);t.exports=i&&!!Symbol.for&&!!Symbol.keyFor},261:(t,e,n)=>{var i,r,o,s,a=n(7854),c=n(2104),u=n(9974),f=n(614),l=n(2597),h=n(7293),g=n(490),p=n(206),d=n(317),v=n(8053),y=n(6833),m=n(5268),I=a.setImmediate,k=a.clearImmediate,b=a.process,_=a.Dispatch,C=a.Function,O=a.MessageChannel,T=a.String,x=0,E={},S="onreadystatechange";h((function(){i=a.location}));var w=function(t){if(l(E,t)){var e=E[t];delete E[t],e()}},R=function(t){return function(){w(t)}},A=function(t){w(t.data)},N=function(t){a.postMessage(T(t),i.protocol+"//"+i.host)};I&&k||(I=function(t){v(arguments.length,1);var e=f(t)?t:C(t),n=p(arguments,1);return E[++x]=function(){c(e,void 0,n)},r(x),x},k=function(t){delete E[t]},m?r=function(t){b.nextTick(R(t))}:_&&_.now?r=function(t){_.now(R(t))}:O&&!y?(s=(o=new O).port2,o.port1.onmessage=A,r=u(s.postMessage,s)):a.addEventListener&&f(a.postMessage)&&!a.importScripts&&i&&"file:"!==i.protocol&&!h(N)?(r=N,a.addEventListener("message",A,!1)):r=S in d("script")?function(t){g.appendChild(d("script"))[S]=function(){g.removeChild(this),w(t)}}:function(t){setTimeout(R(t),0)}),t.exports={set:I,clear:k}},863:(t,e,n)=>{var i=n(1702);t.exports=i(1..valueOf)},1400:(t,e,n)=>{var i=n(9303),r=Math.max,o=Math.min;t.exports=function(t,e){var n=i(t);return n<0?r(n+e,0):o(n,e)}},5656:(t,e,n)=>{var i=n(8361),r=n(4488);t.exports=function(t){return i(r(t))}},9303:(t,e,n)=>{var i=n(4758);t.exports=function(t){var e=+t;return e!=e||0===e?0:i(e)}},7466:(t,e,n)=>{var i=n(9303),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},7908:(t,e,n)=>{var i=n(4488),r=Object;t.exports=function(t){return r(i(t))}},7593:(t,e,n)=>{var i=n(6916),r=n(111),o=n(2190),s=n(8173),a=n(2140),c=n(5112),u=TypeError,f=c("toPrimitive");t.exports=function(t,e){if(!r(t)||o(t))return t;var n,c=s(t,f);if(c){if(void 0===e&&(e="default"),n=i(c,t,e),!r(n)||o(n))return n;throw u("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},4948:(t,e,n)=>{var i=n(7593),r=n(2190);t.exports=function(t){var e=i(t,"string");return r(e)?e:e+""}},1694:(t,e,n)=>{var i={};i[n(5112)("toStringTag")]="z",t.exports="[object z]"===String(i)},1340:(t,e,n)=>{var i=n(648),r=String;t.exports=function(t){if("Symbol"===i(t))throw TypeError("Cannot convert a Symbol value to a string");return r(t)}},6330:t=>{var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},9711:(t,e,n)=>{var i=n(1702),r=0,o=Math.random(),s=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++r+o,36)}},5143:(t,e,n)=>{var i=n(7293),r=n(5112),o=n(9781),s=n(1913),a=r("iterator");t.exports=!i((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,i){e.delete("b"),n+=i+t})),s&&!t.toJSON||!e.size&&(s||!o)||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},3307:(t,e,n)=>{var i=n(6293);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(t,e,n)=>{var i=n(9781),r=n(7293);t.exports=i&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:t=>{var e=TypeError;t.exports=function(t,n){if(t<n)throw e("Not enough arguments");return t}},4811:(t,e,n)=>{var i=n(7854),r=n(614),o=i.WeakMap;t.exports=r(o)&&/native code/.test(String(o))},6800:(t,e,n)=>{var i=n(857),r=n(2597),o=n(6061),s=n(3070).f;t.exports=function(t){var e=i.Symbol||(i.Symbol={});r(e,t)||s(e,t,{value:o.f(t)})}},6061:(t,e,n)=>{var i=n(5112);e.f=i},5112:(t,e,n)=>{var i=n(7854),r=n(2309),o=n(2597),s=n(9711),a=n(6293),c=n(3307),u=i.Symbol,f=r("wks"),l=c?u.for||u:u&&u.withoutSetter||s;t.exports=function(t){return o(f,t)||(f[t]=a&&o(u,t)?u[t]:l("Symbol."+t)),f[t]}},1361:t=>{t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},2222:(t,e,n)=>{"use strict";var i=n(2109),r=n(7293),o=n(3157),s=n(111),a=n(7908),c=n(6244),u=n(7207),f=n(6135),l=n(5417),h=n(1194),g=n(5112),p=n(7392),d=g("isConcatSpreadable"),v=p>=51||!r((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),y=function(t){if(!s(t))return!1;var e=t[d];return void 0!==e?!!e:o(t)};i({target:"Array",proto:!0,arity:1,forced:!v||!h("concat")},{concat:function(t){var e,n,i,r,o,s=a(this),h=l(s,0),g=0;for(e=-1,i=arguments.length;e<i;e++)if(y(o=-1===e?s:arguments[e]))for(r=c(o),u(g+r),n=0;n<r;n++,g++)n in o&&f(h,g,o[n]);else u(g+1),f(h,g++,o);return h.length=g,h}})},7327:(t,e,n)=>{"use strict";var i=n(2109),r=n(2092).filter;i({target:"Array",proto:!0,forced:!n(1194)("filter")},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},9826:(t,e,n)=>{"use strict";var i=n(2109),r=n(2092).find,o=n(1223),s="find",a=!0;s in[]&&Array(1)[s]((function(){a=!1})),i({target:"Array",proto:!0,forced:a},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o(s)},1038:(t,e,n)=>{var i=n(2109),r=n(8457);i({target:"Array",stat:!0,forced:!n(7072)((function(t){Array.from(t)}))},{from:r})},6699:(t,e,n)=>{"use strict";var i=n(2109),r=n(1318).includes,o=n(7293),s=n(1223);i({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),s("includes")},6992:(t,e,n)=>{"use strict";var i=n(5656),r=n(1223),o=n(7497),s=n(9909),a=n(3070).f,c=n(1656),u=n(6178),f=n(1913),l=n(9781),h="Array Iterator",g=s.set,p=s.getterFor(h);t.exports=c(Array,"Array",(function(t,e){g(this,{type:h,target:i(t),index:0,kind:e})}),(function(){var t=p(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?(t.target=void 0,u(void 0,!0)):u("keys"==n?i:"values"==n?e[i]:[i,e[i]],!1)}),"values");var d=o.Arguments=o.Array;if(r("keys"),r("values"),r("entries"),!f&&l&&"values"!==d.name)try{a(d,"name",{value:"values"})}catch(t){}},1249:(t,e,n)=>{"use strict";var i=n(2109),r=n(2092).map;i({target:"Array",proto:!0,forced:!n(1194)("map")},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},7042:(t,e,n)=>{"use strict";var i=n(2109),r=n(3157),o=n(4411),s=n(111),a=n(1400),c=n(6244),u=n(5656),f=n(6135),l=n(5112),h=n(1194),g=n(206),p=h("slice"),d=l("species"),v=Array,y=Math.max;i({target:"Array",proto:!0,forced:!p},{slice:function(t,e){var n,i,l,h=u(this),p=c(h),m=a(t,p),I=a(void 0===e?p:e,p);if(r(h)&&(n=h.constructor,(o(n)&&(n===v||r(n.prototype))||s(n)&&null===(n=n[d]))&&(n=void 0),n===v||void 0===n))return g(h,m,I);for(i=new(void 0===n?v:n)(y(I-m,0)),l=0;m<I;m++,l++)m in h&&f(i,l,h[m]);return i.length=l,i}})},8862:(t,e,n)=>{var i=n(2109),r=n(5005),o=n(2104),s=n(6916),a=n(1702),c=n(7293),u=n(614),f=n(2190),l=n(206),h=n(8044),g=n(6293),p=String,d=r("JSON","stringify"),v=a(/./.exec),y=a("".charAt),m=a("".charCodeAt),I=a("".replace),k=a(1..toString),b=/[\uD800-\uDFFF]/g,_=/^[\uD800-\uDBFF]$/,C=/^[\uDC00-\uDFFF]$/,O=!g||c((function(){var t=r("Symbol")();return"[null]"!=d([t])||"{}"!=d({a:t})||"{}"!=d(Object(t))})),T=c((function(){return'"\\udf06\\ud834"'!==d("\udf06\ud834")||'"\\udead"'!==d("\udead")})),x=function(t,e){var n=l(arguments),i=h(e);if(u(i)||void 0!==t&&!f(t))return n[1]=function(t,e){if(u(i)&&(e=s(i,this,p(t),e)),!f(e))return e},o(d,null,n)},E=function(t,e,n){var i=y(n,e-1),r=y(n,e+1);return v(_,t)&&!v(C,r)||v(C,t)&&!v(_,i)?"\\u"+k(m(t,0),16):t};d&&i({target:"JSON",stat:!0,arity:3,forced:O||T},{stringify:function(t,e,n){var i=l(arguments),r=o(O?x:d,null,i);return T&&"string"==typeof r?I(r,b,E):r}})},9098:(t,e,n)=>{"use strict";n(7710)("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n(5631))},1532:(t,e,n)=>{n(9098)},3689:(t,e,n)=>{n(2109)({target:"Math",stat:!0},{trunc:n(4758)})},9653:(t,e,n)=>{"use strict";var i=n(2109),r=n(1913),o=n(9781),s=n(7854),a=n(857),c=n(1702),u=n(4705),f=n(2597),l=n(9587),h=n(7976),g=n(2190),p=n(7593),d=n(7293),v=n(8006).f,y=n(1236).f,m=n(3070).f,I=n(863),k=n(3111).trim,b="Number",_=s[b],C=a[b],O=_.prototype,T=s.TypeError,x=c("".slice),E=c("".charCodeAt),S=u(b,!_(" 0o1")||!_("0b1")||_("+0x1")),w=function(t){var e,n=arguments.length<1?0:_(function(t){var e=p(t,"number");return"bigint"==typeof e?e:function(t){var e,n,i,r,o,s,a,c,u=p(t,"number");if(g(u))throw T("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=k(u),43===(e=E(u,0))||45===e){if(88===(n=E(u,2))||120===n)return NaN}else if(48===e){switch(E(u,1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+u}for(s=(o=x(u,2)).length,a=0;a<s;a++)if((c=E(o,a))<48||c>r)return NaN;return parseInt(o,i)}return+u}(e)}(t));return h(O,e=this)&&d((function(){I(e)}))?l(Object(n),this,w):n};w.prototype=O,S&&!r&&(O.constructor=w),i({global:!0,constructor:!0,wrap:!0,forced:S},{Number:w});var R=function(t,e){for(var n,i=o?v(e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),r=0;i.length>r;r++)f(e,n=i[r])&&!f(t,n)&&m(t,n,y(e,n))};r&&C&&R(a[b],C),(S||r)&&R(a[b],_)},3161:(t,e,n)=>{n(2109)({target:"Number",stat:!0},{isInteger:n(5988)})},3321:(t,e,n)=>{var i=n(2109),r=n(9781),o=n(6048).f;i({target:"Object",stat:!0,forced:Object.defineProperties!==o,sham:!r},{defineProperties:o})},9070:(t,e,n)=>{var i=n(2109),r=n(9781),o=n(3070).f;i({target:"Object",stat:!0,forced:Object.defineProperty!==o,sham:!r},{defineProperty:o})},9720:(t,e,n)=>{var i=n(2109),r=n(4699).entries;i({target:"Object",stat:!0},{entries:function(t){return r(t)}})},5003:(t,e,n)=>{var i=n(2109),r=n(7293),o=n(5656),s=n(1236).f,a=n(9781);i({target:"Object",stat:!0,forced:!a||r((function(){s(1)})),sham:!a},{getOwnPropertyDescriptor:function(t,e){return s(o(t),e)}})},9337:(t,e,n)=>{var i=n(2109),r=n(9781),o=n(3887),s=n(5656),a=n(1236),c=n(6135);i({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){for(var e,n,i=s(t),r=a.f,u=o(i),f={},l=0;u.length>l;)void 0!==(n=r(i,e=u[l++]))&&c(f,e,n);return f}})},9660:(t,e,n)=>{var i=n(2109),r=n(6293),o=n(7293),s=n(5181),a=n(7908);i({target:"Object",stat:!0,forced:!r||o((function(){s.f(1)}))},{getOwnPropertySymbols:function(t){var e=s.f;return e?e(a(t)):[]}})},7941:(t,e,n)=>{var i=n(2109),r=n(7908),o=n(1956);i({target:"Object",stat:!0,forced:n(7293)((function(){o(1)}))},{keys:function(t){return o(r(t))}})},1539:(t,e,n)=>{var i=n(1694),r=n(8052),o=n(288);i||r(Object.prototype,"toString",o,{unsafe:!0})},2479:(t,e,n)=>{var i=n(2109),r=n(4699).values;i({target:"Object",stat:!0},{values:function(t){return r(t)}})},1058:(t,e,n)=>{var i=n(2109),r=n(3009);i({global:!0,forced:parseInt!=r},{parseInt:r})},821:(t,e,n)=>{"use strict";var i=n(2109),r=n(6916),o=n(9662),s=n(8523),a=n(2534),c=n(408);i({target:"Promise",stat:!0,forced:n(612)},{all:function(t){var e=this,n=s.f(e),i=n.resolve,u=n.reject,f=a((function(){var n=o(e.resolve),s=[],a=0,f=1;c(t,(function(t){var o=a++,c=!1;f++,r(n,e,t).then((function(t){c||(c=!0,s[o]=t,--f||i(s))}),u)})),--f||i(s)}));return f.error&&u(f.value),n.promise}})},4164:(t,e,n)=>{"use strict";var i=n(2109),r=n(1913),o=n(3702).CONSTRUCTOR,s=n(2492),a=n(5005),c=n(614),u=n(8052),f=s&&s.prototype;if(i({target:"Promise",proto:!0,forced:o,real:!0},{catch:function(t){return this.then(void 0,t)}}),!r&&c(s)){var l=a("Promise").prototype.catch;f.catch!==l&&u(f,"catch",l,{unsafe:!0})}},3401:(t,e,n)=>{"use strict";var i,r,o,s=n(2109),a=n(1913),c=n(5268),u=n(7854),f=n(6916),l=n(8052),h=n(7674),g=n(8003),p=n(6340),d=n(9662),v=n(614),y=n(111),m=n(5787),I=n(6707),k=n(261).set,b=n(5948),_=n(842),C=n(2534),O=n(8572),T=n(9909),x=n(2492),E=n(3702),S=n(8523),w="Promise",R=E.CONSTRUCTOR,A=E.REJECTION_EVENT,N=E.SUBCLASSING,D=T.getterFor(w),P=T.set,M=x&&x.prototype,F=x,j=M,H=u.TypeError,L=u.document,V=u.process,U=S.f,B=U,G=!!(L&&L.createEvent&&u.dispatchEvent),q="unhandledrejection",K=function(t){var e;return!(!y(t)||!v(e=t.then))&&e},Q=function(t,e){var n,i,r,o=e.value,s=1==e.state,a=s?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{a?(s||(2===e.rejection&&$(e),e.rejection=1),!0===a?n=o:(l&&l.enter(),n=a(o),l&&(l.exit(),r=!0)),n===t.promise?u(H("Promise-chain cycle")):(i=K(n))?f(i,n,c,u):c(n)):u(o)}catch(t){l&&!r&&l.exit(),u(t)}},z=function(t,e){t.notified||(t.notified=!0,b((function(){for(var n,i=t.reactions;n=i.get();)Q(n,t);t.notified=!1,e&&!t.rejection&&W(t)})))},J=function(t,e,n){var i,r;G?((i=L.createEvent("Event")).promise=e,i.reason=n,i.initEvent(t,!1,!0),u.dispatchEvent(i)):i={promise:e,reason:n},!A&&(r=u["on"+t])?r(i):t===q&&_("Unhandled promise rejection",n)},W=function(t){f(k,u,(function(){var e,n=t.facade,i=t.value;if(Y(t)&&(e=C((function(){c?V.emit("unhandledRejection",i,n):J(q,n,i)})),t.rejection=c||Y(t)?2:1,e.error))throw e.value}))},Y=function(t){return 1!==t.rejection&&!t.parent},$=function(t){f(k,u,(function(){var e=t.facade;c?V.emit("rejectionHandled",e):J("rejectionhandled",e,t.value)}))},Z=function(t,e,n){return function(i){t(e,i,n)}},X=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,z(t,!0))},tt=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw H("Promise can't be resolved itself");var i=K(e);i?b((function(){var n={done:!1};try{f(i,e,Z(tt,n,t),Z(X,n,t))}catch(e){X(n,e,t)}})):(t.value=e,t.state=1,z(t,!1))}catch(e){X({done:!1},e,t)}}};if(R&&(j=(F=function(t){m(this,j),d(t),f(i,this);var e=D(this);try{t(Z(tt,e),Z(X,e))}catch(t){X(e,t)}}).prototype,(i=function(t){P(this,{type:w,done:!1,notified:!1,parent:!1,reactions:new O,rejection:!1,state:0,value:void 0})}).prototype=l(j,"then",(function(t,e){var n=D(this),i=U(I(this,F));return n.parent=!0,i.ok=!v(t)||t,i.fail=v(e)&&e,i.domain=c?V.domain:void 0,0==n.state?n.reactions.add(i):b((function(){Q(i,n)})),i.promise})),r=function(){var t=new i,e=D(t);this.promise=t,this.resolve=Z(tt,e),this.reject=Z(X,e)},S.f=U=function(t){return t===F||void 0===t?new r(t):B(t)},!a&&v(x)&&M!==Object.prototype)){o=M.then,N||l(M,"then",(function(t,e){var n=this;return new F((function(t,e){f(o,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete M.constructor}catch(t){}h&&h(M,j)}s({global:!0,constructor:!0,wrap:!0,forced:R},{Promise:F}),g(F,w,!1,!0),p(w)},8674:(t,e,n)=>{n(3401),n(821),n(4164),n(6027),n(683),n(6294)},6027:(t,e,n)=>{"use strict";var i=n(2109),r=n(6916),o=n(9662),s=n(8523),a=n(2534),c=n(408);i({target:"Promise",stat:!0,forced:n(612)},{race:function(t){var e=this,n=s.f(e),i=n.reject,u=a((function(){var s=o(e.resolve);c(t,(function(t){r(s,e,t).then(n.resolve,i)}))}));return u.error&&i(u.value),n.promise}})},683:(t,e,n)=>{"use strict";var i=n(2109),r=n(6916),o=n(8523);i({target:"Promise",stat:!0,forced:n(3702).CONSTRUCTOR},{reject:function(t){var e=o.f(this);return r(e.reject,void 0,t),e.promise}})},6294:(t,e,n)=>{"use strict";var i=n(2109),r=n(5005),o=n(1913),s=n(2492),a=n(3702).CONSTRUCTOR,c=n(9478),u=r("Promise"),f=o&&!a;i({target:"Promise",stat:!0,forced:o||a},{resolve:function(t){return c(f&&this===u?s:this,t)}})},2419:(t,e,n)=>{var i=n(2109),r=n(5005),o=n(2104),s=n(7065),a=n(9483),c=n(9670),u=n(111),f=n(30),l=n(7293),h=r("Reflect","construct"),g=Object.prototype,p=[].push,d=l((function(){function t(){}return!(h((function(){}),[],t)instanceof t)})),v=!l((function(){h((function(){}))})),y=d||v;i({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(t,e){a(t),c(e);var n=arguments.length<3?t:a(arguments[2]);if(v&&!d)return h(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return o(p,i,e),new(o(s,t,i))}var r=n.prototype,l=f(u(r)?r:g),y=o(t,l,e);return u(y)?y:l}})},4603:(t,e,n)=>{var i=n(9781),r=n(7854),o=n(1702),s=n(4705),a=n(9587),c=n(8880),u=n(8006).f,f=n(7976),l=n(7850),h=n(1340),g=n(4706),p=n(2999),d=n(2626),v=n(8052),y=n(7293),m=n(2597),I=n(9909).enforce,k=n(6340),b=n(5112),_=n(9441),C=n(7168),O=b("match"),T=r.RegExp,x=T.prototype,E=r.SyntaxError,S=o(x.exec),w=o("".charAt),R=o("".replace),A=o("".indexOf),N=o("".slice),D=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,P=/a/g,M=/a/g,F=new T(P)!==P,j=p.MISSED_STICKY,H=p.UNSUPPORTED_Y;if(s("RegExp",i&&(!F||j||_||C||y((function(){return M[O]=!1,T(P)!=P||T(M)==M||"/a/i"!=T(P,"i")}))))){for(var L=function(t,e){var n,i,r,o,s,u,p=f(x,this),d=l(t),v=void 0===e,y=[],k=t;if(!p&&d&&v&&t.constructor===L)return t;if((d||f(x,t))&&(t=t.source,v&&(e=g(k))),t=void 0===t?"":h(t),e=void 0===e?"":h(e),k=t,_&&"dotAll"in P&&(i=!!e&&A(e,"s")>-1)&&(e=R(e,/s/g,"")),n=e,j&&"sticky"in P&&(r=!!e&&A(e,"y")>-1)&&H&&(e=R(e,/y/g,"")),C&&(o=function(t){for(var e,n=t.length,i=0,r="",o=[],s={},a=!1,c=!1,u=0,f="";i<=n;i++){if("\\"===(e=w(t,i)))e+=w(t,++i);else if("]"===e)a=!1;else if(!a)switch(!0){case"["===e:a=!0;break;case"("===e:S(D,N(t,i+1))&&(i+=2,c=!0),r+=e,u++;continue;case">"===e&&c:if(""===f||m(s,f))throw new E("Invalid capture group name");s[f]=!0,o[o.length]=[f,u],c=!1,f="";continue}c?f+=e:r+=e}return[r,o]}(t),t=o[0],y=o[1]),s=a(T(t,e),p?this:x,L),(i||r||y.length)&&(u=I(s),i&&(u.dotAll=!0,u.raw=L(function(t){for(var e,n=t.length,i=0,r="",o=!1;i<=n;i++)"\\"!==(e=w(t,i))?o||"."!==e?("["===e?o=!0:"]"===e&&(o=!1),r+=e):r+="[\\s\\S]":r+=e+w(t,++i);return r}(t),n)),r&&(u.sticky=!0),y.length&&(u.groups=y)),t!==k)try{c(s,"source",""===k?"(?:)":k)}catch(t){}return s},V=u(T),U=0;V.length>U;)d(L,T,V[U++]);x.constructor=L,L.prototype=x,v(r,"RegExp",L,{constructor:!0})}k("RegExp")},4916:(t,e,n)=>{"use strict";var i=n(2109),r=n(2261);i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},2087:(t,e,n)=>{var i=n(7854),r=n(9781),o=n(7045),s=n(7066),a=n(7293),c=i.RegExp,u=c.prototype;r&&a((function(){var t=!0;try{c(".","d")}catch(e){t=!1}var e={},n="",i=t?"dgimsy":"gimsy",r=function(t,i){Object.defineProperty(e,t,{get:function(){return n+=i,!0}})},o={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var s in t&&(o.hasIndices="d"),o)r(s,o[s]);return Object.getOwnPropertyDescriptor(u,"flags").get.call(e)!==i||n!==i}))&&o(u,"flags",{configurable:!0,get:s})},9714:(t,e,n)=>{"use strict";var i=n(6530).PROPER,r=n(8052),o=n(9670),s=n(1340),a=n(7293),c=n(4706),u="toString",f=RegExp.prototype[u],l=a((function(){return"/a/b"!=f.call({source:"a",flags:"b"})})),h=i&&f.name!=u;(l||h)&&r(RegExp.prototype,u,(function(){var t=o(this);return"/"+s(t.source)+"/"+s(c(t))}),{unsafe:!0})},7227:(t,e,n)=>{"use strict";n(7710)("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n(5631))},189:(t,e,n)=>{n(7227)},7852:(t,e,n)=>{"use strict";var i,r=n(2109),o=n(1470),s=n(1236).f,a=n(7466),c=n(1340),u=n(3929),f=n(4488),l=n(4964),h=n(1913),g=o("".endsWith),p=o("".slice),d=Math.min,v=l("endsWith");r({target:"String",proto:!0,forced:!(!h&&!v&&(i=s(String.prototype,"endsWith"),i&&!i.writable)||v)},{endsWith:function(t){var e=c(f(this));u(t);var n=arguments.length>1?arguments[1]:void 0,i=e.length,r=void 0===n?i:d(a(n),i),o=c(t);return g?g(e,o,r):p(e,r-o.length,r)===o}})},2023:(t,e,n)=>{"use strict";var i=n(2109),r=n(1702),o=n(3929),s=n(4488),a=n(1340),c=n(4964),u=r("".indexOf);i({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~u(a(s(this)),a(o(t)),arguments.length>1?arguments[1]:void 0)}})},8783:(t,e,n)=>{"use strict";var i=n(8710).charAt,r=n(1340),o=n(9909),s=n(1656),a=n(6178),c="String Iterator",u=o.set,f=o.getterFor(c);s(String,"String",(function(t){u(this,{type:c,string:r(t),index:0})}),(function(){var t,e=f(this),n=e.string,r=e.index;return r>=n.length?a(void 0,!0):(t=i(n,r),e.index+=t.length,a(t,!1))}))},5306:(t,e,n)=>{"use strict";var i=n(2104),r=n(6916),o=n(1702),s=n(7007),a=n(7293),c=n(9670),u=n(614),f=n(8554),l=n(9303),h=n(7466),g=n(1340),p=n(4488),d=n(1530),v=n(8173),y=n(647),m=n(7651),I=n(5112)("replace"),k=Math.max,b=Math.min,_=o([].concat),C=o([].push),O=o("".indexOf),T=o("".slice),x="$0"==="a".replace(/./,"$0"),E=!!/./[I]&&""===/./[I]("a","$0");s("replace",(function(t,e,n){var o=E?"$":"$0";return[function(t,n){var i=p(this),o=f(t)?void 0:v(t,I);return o?r(o,t,i,n):r(e,g(i),t,n)},function(t,r){var s=c(this),a=g(t);if("string"==typeof r&&-1===O(r,o)&&-1===O(r,"$<")){var f=n(e,s,a,r);if(f.done)return f.value}var p=u(r);p||(r=g(r));var v=s.global;if(v){var I=s.unicode;s.lastIndex=0}for(var x=[];;){var E=m(s,a);if(null===E)break;if(C(x,E),!v)break;""===g(E[0])&&(s.lastIndex=d(a,h(s.lastIndex),I))}for(var S,w="",R=0,A=0;A<x.length;A++){for(var N=g((E=x[A])[0]),D=k(b(l(E.index),a.length),0),P=[],M=1;M<E.length;M++)C(P,void 0===(S=E[M])?S:String(S));var F=E.groups;if(p){var j=_([N],P,D,a);void 0!==F&&C(j,F);var H=g(i(r,void 0,j))}else H=y(N,a,D,P,F,r);D>=R&&(w+=T(a,R,D)+H,R=D+N.length)}return w+T(a,R)}]}),!!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!x||E)},4765:(t,e,n)=>{"use strict";var i=n(6916),r=n(7007),o=n(9670),s=n(8554),a=n(4488),c=n(1150),u=n(1340),f=n(8173),l=n(7651);r("search",(function(t,e,n){return[function(e){var n=a(this),r=s(e)?void 0:f(e,t);return r?i(r,e,n):new RegExp(e)[t](u(n))},function(t){var i=o(this),r=u(t),s=n(e,i,r);if(s.done)return s.value;var a=i.lastIndex;c(a,0)||(i.lastIndex=0);var f=l(i,r);return c(i.lastIndex,a)||(i.lastIndex=a),null===f?-1:f.index}]}))},6755:(t,e,n)=>{"use strict";var i,r=n(2109),o=n(1470),s=n(1236).f,a=n(7466),c=n(1340),u=n(3929),f=n(4488),l=n(4964),h=n(1913),g=o("".startsWith),p=o("".slice),d=Math.min,v=l("startsWith");r({target:"String",proto:!0,forced:!(!h&&!v&&(i=s(String.prototype,"startsWith"),i&&!i.writable)||v)},{startsWith:function(t){var e=c(f(this));u(t);var n=a(d(arguments.length>1?arguments[1]:void 0,e.length)),i=c(t);return g?g(e,i,n):p(e,n,n+i.length)===i}})},4032:(t,e,n)=>{"use strict";var i=n(2109),r=n(7854),o=n(6916),s=n(1702),a=n(1913),c=n(9781),u=n(6293),f=n(7293),l=n(2597),h=n(7976),g=n(9670),p=n(5656),d=n(4948),v=n(1340),y=n(9114),m=n(30),I=n(1956),k=n(8006),b=n(1156),_=n(5181),C=n(1236),O=n(3070),T=n(6048),x=n(5296),E=n(8052),S=n(7045),w=n(2309),R=n(6200),A=n(3501),N=n(9711),D=n(5112),P=n(6061),M=n(6800),F=n(6532),j=n(8003),H=n(9909),L=n(2092).forEach,V=R("hidden"),U="Symbol",B="prototype",G=H.set,q=H.getterFor(U),K=Object[B],Q=r.Symbol,z=Q&&Q[B],J=r.TypeError,W=r.QObject,Y=C.f,$=O.f,Z=b.f,X=x.f,tt=s([].push),et=w("symbols"),nt=w("op-symbols"),it=w("wks"),rt=!W||!W[B]||!W[B].findChild,ot=c&&f((function(){return 7!=m($({},"a",{get:function(){return $(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=Y(K,e);i&&delete K[e],$(t,e,n),i&&t!==K&&$(K,e,i)}:$,st=function(t,e){var n=et[t]=m(z);return G(n,{type:U,tag:t,description:e}),c||(n.description=e),n},at=function(t,e,n){t===K&&at(nt,e,n),g(t);var i=d(e);return g(n),l(et,i)?(n.enumerable?(l(t,V)&&t[V][i]&&(t[V][i]=!1),n=m(n,{enumerable:y(0,!1)})):(l(t,V)||$(t,V,y(1,{})),t[V][i]=!0),ot(t,i,n)):$(t,i,n)},ct=function(t,e){g(t);var n=p(e),i=I(n).concat(ht(n));return L(i,(function(e){c&&!o(ut,n,e)||at(t,e,n[e])})),t},ut=function(t){var e=d(t),n=o(X,this,e);return!(this===K&&l(et,e)&&!l(nt,e))&&(!(n||!l(this,e)||!l(et,e)||l(this,V)&&this[V][e])||n)},ft=function(t,e){var n=p(t),i=d(e);if(n!==K||!l(et,i)||l(nt,i)){var r=Y(n,i);return!r||!l(et,i)||l(n,V)&&n[V][i]||(r.enumerable=!0),r}},lt=function(t){var e=Z(p(t)),n=[];return L(e,(function(t){l(et,t)||l(A,t)||tt(n,t)})),n},ht=function(t){var e=t===K,n=Z(e?nt:p(t)),i=[];return L(n,(function(t){!l(et,t)||e&&!l(K,t)||tt(i,et[t])})),i};u||(E(z=(Q=function(){if(h(z,this))throw J("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?v(arguments[0]):void 0,e=N(t),n=function(t){this===K&&o(n,nt,t),l(this,V)&&l(this[V],e)&&(this[V][e]=!1),ot(this,e,y(1,t))};return c&&rt&&ot(K,e,{configurable:!0,set:n}),st(e,t)})[B],"toString",(function(){return q(this).tag})),E(Q,"withoutSetter",(function(t){return st(N(t),t)})),x.f=ut,O.f=at,T.f=ct,C.f=ft,k.f=b.f=lt,_.f=ht,P.f=function(t){return st(D(t),t)},c&&(S(z,"description",{configurable:!0,get:function(){return q(this).description}}),a||E(K,"propertyIsEnumerable",ut,{unsafe:!0}))),i({global:!0,constructor:!0,wrap:!0,forced:!u,sham:!u},{Symbol:Q}),L(I(it),(function(t){M(t)})),i({target:U,stat:!0,forced:!u},{useSetter:function(){rt=!0},useSimple:function(){rt=!1}}),i({target:"Object",stat:!0,forced:!u,sham:!c},{create:function(t,e){return void 0===e?m(t):ct(m(t),e)},defineProperty:at,defineProperties:ct,getOwnPropertyDescriptor:ft}),i({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:lt}),F(),j(Q,U),A[V]=!0},1817:(t,e,n)=>{"use strict";var i=n(2109),r=n(9781),o=n(7854),s=n(1702),a=n(2597),c=n(614),u=n(7976),f=n(1340),l=n(7045),h=n(9920),g=o.Symbol,p=g&&g.prototype;if(r&&c(g)&&(!("description"in p)||void 0!==g().description)){var d={},v=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:f(arguments[0]),e=u(p,this)?new g(t):void 0===t?g():g(t);return""===t&&(d[e]=!0),e};h(v,g),v.prototype=p,p.constructor=v;var y="Symbol(test)"==String(g("test")),m=s(p.valueOf),I=s(p.toString),k=/^Symbol\((.*)\)[^)]+$/,b=s("".replace),_=s("".slice);l(p,"description",{configurable:!0,get:function(){var t=m(this);if(a(d,t))return"";var e=I(t),n=y?_(e,7,-1):b(e,k,"$1");return""===n?void 0:n}}),i({global:!0,constructor:!0,forced:!0},{Symbol:v})}},763:(t,e,n)=>{var i=n(2109),r=n(5005),o=n(2597),s=n(1340),a=n(2309),c=n(2015),u=a("string-to-symbol-registry"),f=a("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!c},{for:function(t){var e=s(t);if(o(u,e))return u[e];var n=r("Symbol")(e);return u[e]=n,f[n]=e,n}})},2165:(t,e,n)=>{n(6800)("iterator")},2526:(t,e,n)=>{n(4032),n(763),n(6620),n(8862),n(9660)},6620:(t,e,n)=>{var i=n(2109),r=n(2597),o=n(2190),s=n(6330),a=n(2309),c=n(2015),u=a("symbol-to-string-registry");i({target:"Symbol",stat:!0,forced:!c},{keyFor:function(t){if(!o(t))throw TypeError(s(t)+" is not a symbol");if(r(u,t))return u[t]}})},4747:(t,e,n)=>{var i=n(7854),r=n(8324),o=n(8509),s=n(8533),a=n(8880),c=function(t){if(t&&t.forEach!==s)try{a(t,"forEach",s)}catch(e){t.forEach=s}};for(var u in r)r[u]&&c(i[u]&&i[u].prototype);c(o)},3948:(t,e,n)=>{var i=n(7854),r=n(8324),o=n(8509),s=n(6992),a=n(8880),c=n(5112),u=c("iterator"),f=c("toStringTag"),l=s.values,h=function(t,e){if(t){if(t[u]!==l)try{a(t,u,l)}catch(e){t[u]=l}if(t[f]||a(t,f,e),r[e])for(var n in s)if(t[n]!==s[n])try{a(t,n,s[n])}catch(e){t[n]=s[n]}}};for(var g in r)h(i[g]&&i[g].prototype,g);h(o,"DOMTokenList")},5556:(t,e,n)=>{"use strict";n(6992);var i=n(2109),r=n(7854),o=n(6916),s=n(1702),a=n(9781),c=n(5143),u=n(8052),f=n(7045),l=n(9190),h=n(8003),g=n(3061),p=n(9909),d=n(5787),v=n(614),y=n(2597),m=n(9974),I=n(648),k=n(9670),b=n(111),_=n(1340),C=n(30),O=n(9114),T=n(4121),x=n(1246),E=n(8053),S=n(5112),w=n(4362),R=S("iterator"),A="URLSearchParams",N=A+"Iterator",D=p.set,P=p.getterFor(A),M=p.getterFor(N),F=Object.getOwnPropertyDescriptor,j=function(t){if(!a)return r[t];var e=F(r,t);return e&&e.value},H=j("fetch"),L=j("Request"),V=j("Headers"),U=L&&L.prototype,B=V&&V.prototype,G=r.RegExp,q=r.TypeError,K=r.decodeURIComponent,Q=r.encodeURIComponent,z=s("".charAt),J=s([].join),W=s([].push),Y=s("".replace),$=s([].shift),Z=s([].splice),X=s("".split),tt=s("".slice),et=/\+/g,nt=Array(4),it=function(t){return nt[t-1]||(nt[t-1]=G("((?:%[\\da-f]{2}){"+t+"})","gi"))},rt=function(t){try{return K(t)}catch(e){return t}},ot=function(t){var e=Y(t,et," "),n=4;try{return K(e)}catch(t){for(;n;)e=Y(e,it(n--),rt);return e}},st=/[!'()~]|%20/g,at={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ct=function(t){return at[t]},ut=function(t){return Y(Q(t),st,ct)},ft=g((function(t,e){D(this,{type:N,iterator:T(P(t).entries),kind:e})}),"Iterator",(function(){var t=M(this),e=t.kind,n=t.iterator.next(),i=n.value;return n.done||(n.value="keys"===e?i.key:"values"===e?i.value:[i.key,i.value]),n}),!0),lt=function(t){this.entries=[],this.url=null,void 0!==t&&(b(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===z(t,0)?tt(t,1):t:_(t)))};lt.prototype={type:A,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,n,i,r,s,a,c,u=x(t);if(u)for(n=(e=T(t,u)).next;!(i=o(n,e)).done;){if(s=(r=T(k(i.value))).next,(a=o(s,r)).done||(c=o(s,r)).done||!o(s,r).done)throw q("Expected sequence with length 2");W(this.entries,{key:_(a.value),value:_(c.value)})}else for(var f in t)y(t,f)&&W(this.entries,{key:f,value:_(t[f])})},parseQuery:function(t){if(t)for(var e,n,i=X(t,"&"),r=0;r<i.length;)(e=i[r++]).length&&(n=X(e,"="),W(this.entries,{key:ot($(n)),value:ot(J(n,"="))}))},serialize:function(){for(var t,e=this.entries,n=[],i=0;i<e.length;)t=e[i++],W(n,ut(t.key)+"="+ut(t.value));return J(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ht=function(){d(this,gt);var t=D(this,new lt(arguments.length>0?arguments[0]:void 0));a||(this.length=t.entries.length)},gt=ht.prototype;if(l(gt,{append:function(t,e){E(arguments.length,2);var n=P(this);W(n.entries,{key:_(t),value:_(e)}),a||this.length++,n.updateURL()},delete:function(t){E(arguments.length,1);for(var e=P(this),n=e.entries,i=_(t),r=0;r<n.length;)n[r].key===i?Z(n,r,1):r++;a||(this.length=n.length),e.updateURL()},get:function(t){E(arguments.length,1);for(var e=P(this).entries,n=_(t),i=0;i<e.length;i++)if(e[i].key===n)return e[i].value;return null},getAll:function(t){E(arguments.length,1);for(var e=P(this).entries,n=_(t),i=[],r=0;r<e.length;r++)e[r].key===n&&W(i,e[r].value);return i},has:function(t){E(arguments.length,1);for(var e=P(this).entries,n=_(t),i=0;i<e.length;)if(e[i++].key===n)return!0;return!1},set:function(t,e){E(arguments.length,1);for(var n,i=P(this),r=i.entries,o=!1,s=_(t),c=_(e),u=0;u<r.length;u++)(n=r[u]).key===s&&(o?Z(r,u--,1):(o=!0,n.value=c));o||W(r,{key:s,value:c}),a||(this.length=r.length),i.updateURL()},sort:function(){var t=P(this);w(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,n=P(this).entries,i=m(t,arguments.length>1?arguments[1]:void 0),r=0;r<n.length;)i((e=n[r++]).value,e.key,this)},keys:function(){return new ft(this,"keys")},values:function(){return new ft(this,"values")},entries:function(){return new ft(this,"entries")}},{enumerable:!0}),u(gt,R,gt.entries,{name:"entries"}),u(gt,"toString",(function(){return P(this).serialize()}),{enumerable:!0}),a&&f(gt,"size",{get:function(){return P(this).entries.length},configurable:!0,enumerable:!0}),h(ht,A),i({global:!0,constructor:!0,forced:!c},{URLSearchParams:ht}),!c&&v(V)){var pt=s(B.has),dt=s(B.set),vt=function(t){if(b(t)){var e,n=t.body;if(I(n)===A)return e=t.headers?new V(t.headers):new V,pt(e,"content-type")||dt(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),C(t,{body:O(0,_(n)),headers:O(0,e)})}return t};if(v(H)&&i({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return H(t,arguments.length>1?vt(arguments[1]):{})}}),v(L)){var yt=function(t){return d(this,U),new L(t,arguments.length>1?vt(arguments[1]):{})};U.constructor=yt,yt.prototype=U,i({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:yt})}}t.exports={URLSearchParams:ht,getState:P}},1637:(t,e,n)=>{n(5556)},7187:t=>{"use strict";var e,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var r=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(t,e){return new Promise((function(n,i){function r(n){t.removeListener(e,o),i(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",r),n([].slice.call(arguments))}d(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&d(t,"error",e,{once:!0})}(t,r)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function u(t,e,n,i){var r,o,s,u;if(a(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),void 0===s)s=o[e]=n,++t._eventsCount;else if("function"==typeof s?s=o[e]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(r=c(t))>0&&s.length>r&&!s.warned){s.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=t,f.type=e,f.count=s.length,u=f,console&&console.warn&&console.warn(u)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=f.bind(i);return r.listener=n,i.wrapFn=r,r}function h(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):p(r,r.length)}function g(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function d(t,e,n,i){if("function"==typeof t.on)i.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(o){i.once&&t.removeEventListener(e,r),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[t];if(void 0===c)return!1;if("function"==typeof c)i(c,this,e);else{var u=c.length,f=p(c,u);for(n=0;n<u;++n)i(f[n],this,e)}return!0},o.prototype.addListener=function(t,e){return u(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return u(this,t,e,!0)},o.prototype.once=function(t,e){return a(e),this.on(t,l(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return a(e),this.prependListener(t,l(this,t,e)),this},o.prototype.removeListener=function(t,e){var n,i,r,o,s;if(a(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,s||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},o.prototype.listeners=function(t){return h(this,t,!0)},o.prototype.rawListeners=function(t){return h(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},o.prototype.listenerCount=g,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},7061:(t,e,n)=>{var i=n(8698).default;function r(){"use strict";t.exports=r=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},n=Object.prototype,o=n.hasOwnProperty,s=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function h(t,e,n,i){var r=e&&e.prototype instanceof d?e:d,o=Object.create(r.prototype),a=new S(i||[]);return s(o,"_invoke",{value:O(t,n,a)}),o}function g(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var p={};function d(){}function v(){}function y(){}var m={};l(m,c,(function(){return this}));var I=Object.getPrototypeOf,k=I&&I(I(w([])));k&&k!==n&&o.call(k,c)&&(m=k);var b=y.prototype=d.prototype=Object.create(m);function _(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(r,s,a,c){var u=g(t[r],t,s);if("throw"!==u.type){var f=u.arg,l=f.value;return l&&"object"==i(l)&&o.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(l).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var r;s(this,"_invoke",{value:function(t,i){function o(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(o,o):o()}})}function O(t,e,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return{value:void 0,done:!0}}for(n.method=r,n.arg=o;;){var s=n.delegate;if(s){var a=T(s,n);if(a){if(a===p)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=g(t,e,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function T(t,e){var n=e.method,i=t.iterator[n];if(void 0===i)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,T(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var r=g(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,p;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function w(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:R}}function R(){return{value:void 0,done:!0}}return v.prototype=y,s(b,"constructor",{value:y,configurable:!0}),s(y,"constructor",{value:v,configurable:!0}),v.displayName=l(y,f,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,f,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},_(C.prototype),l(C.prototype,u,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var s=new C(h(t,n,i,r),o);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},_(b),l(b,f,"Generator"),l(b,c,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=w,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return s.type="throw",s.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],s=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var a=o.call(r,"catchLoc"),c=o.call(r,"finallyLoc");if(a&&c){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=t,s.arg=e,r?(this.method="next",this.next=r.finallyLoc,p):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:w(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},8698:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},4687:(t,e,n)=>{var i=n(7061)();t.exports=i;try{regeneratorRuntime=i}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};(()=>{"use strict";function t(t,e,n,i,r,o,s){try{var a=t[o](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(i,r)}function e(e){return function(){var n=this,i=arguments;return new Promise((function(r,o){var s=e.apply(n,i);function a(e){t(s,r,o,a,c,"next",e)}function c(e){t(s,r,o,a,c,"throw",e)}a(void 0)}))}}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===r(e)?e:String(e)}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,o(i.key),i)}}function a(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}n.r(i),n.d(i,{APP_VERSION_CODE:()=>Kn,APP_VERSION_NAME:()=>qn,CARRIER_NAME:()=>Bn,CacheStrategy:()=>Jt,DEVICE_LOCALE:()=>Rn,DEVICE_MODEL:()=>Nn,DEVICE_TYPE:()=>An,DecisionApiConfig:()=>ne,DecisionMode:()=>Rt,EventCategory:()=>ke,FLAGSHIP_CLIENT:()=>zn,FLAGSHIP_CONTEXT:()=>Yn,FLAGSHIP_VERSION:()=>Jn,FLAGSHIP_VISITOR:()=>Wn,FSFetchReasons:()=>Dt,FSFetchStatus:()=>Zn,FSFlag:()=>di,FSFlagCollection:()=>vi,FSFlagMetadata:()=>$n,FSFlagStatus:()=>hi,FSSdkStatus:()=>wt,Flagship:()=>Hi,HitType:()=>ye,INTERFACE_NAME:()=>Qn,INTERNET_CONNECTION:()=>Gn,IP:()=>Hn,LOCATION_CITY:()=>Dn,LOCATION_COUNTRY:()=>Mn,LOCATION_LAT:()=>Fn,LOCATION_LONG:()=>jn,LOCATION_REGION:()=>Pn,LogLevel:()=>Nt,OS_NAME:()=>Ln,OS_VERSION_CODE:()=>Un,OS_VERSION_NAME:()=>Vn,TroubleshootingLabel:()=>re,Visitor:()=>St,VisitorCacheStatus:()=>oe,default:()=>Li});var c=n(4687),u=n.n(c);function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}n(1539),n(2419);var d=n(7187),v="4.0.5",y={name:"TypeScript",version:v},m=25e5,I="https://decision.flagship.io/v2/",k="https://events.flagship.io",b="https://events.flagship.io/troubleshooting",_="https://events.flagship.io/analytics",C="activate",O="https://qa-assistant.flagship.io/bundle.js",T="https://staging-qa-assistant.flagship.io/bundle.js",x="https://local-qa-assistant.flagship.io/bundle.js",E="qa-assistant.abtasty.com",S="qa-assistant.flagship.io",w="fs_consent",R="FS_IS_QA_MODE_ENABLED",A="FS_FORCED_VARIATIONS",N="FS_QA_ASSISTANT_SCRIPT_TAG_ID",D=144e5,P="ready",M="https://docs.developers.flagship.io/docs/js-v3",F="Params 'envId' and 'apiKey' must not be null or empty.\n  Learn more: ".concat(M,"#initialization"),j="{0} must be a {1}",H="Visitor {0}, method {1} is deactivated while SDK status is: {2}.",L="SEND BATCH",V="without calling `fetchFlags` method afterwards. So, the value of the flag `{1}` might be outdated",U='You can\'t create a new visitor without first calling the "Flagship.start" method.\nLearn more: '.concat(M,"#initialization\n"),B="INITIALIZATION",G="UPDATE CONTEXT",q="NEW VISITOR",K="ADD HIT",Q="cid",z="cuid",J="vid",W="ds",Y="qt",$="APP",Z="x-api-key",X="Content-Type",tt="x-sdk-client",et="x-sdk-version",nt="application/json",it="BUCKETING",rt="Visitor {0}, the key '{1}' must be a non null String.\nLearn more: ".concat(M,"#updating-the-visitor-context"),ot="Visitor {0}, 'value' for key '{1}[], must be one of the following types : String, Number, Boolean\nLearn more: ".concat(M,"#updating-the-visitor-context"),st="visitor {0}, Predefined Context {0} must be of type {1}\nLearn more: ".concat(M,"#predefined-user-context-keys-"),at="FETCH_FLAGS",ct="FLAG_VALUE",ut="GET_FLAG",ft="FLAG_VISITOR_EXPOSED",lt="FLAG_METADATA",ht="Visitor {0}, No Flags found for key {1}:  Empty metadata object is returned",gt="Visitor {0}, Flag for key {1} Method Flag.metadata is deactivated while SDK status is NOT_READY: Empty metadata object is returned {2}\nLearn more: ".concat(M,"#getting-flags-campaigns-metadata"),pt="Visitor {0}, Flag for key {1} Method Flag.metadata is deactivated while SDK status is PANIC: Empty metadata object is returned {2}\nLearn more: ".concat("https://docs.developers.flagship.io/docs/glossary#panic-mode"),dt="AUTHENTICATE",vt="Visitor {0}, visitorId must not be null or empty\nLearn more: ".concat(M,"#authenticate"),yt="UNAUTHENTICATE",mt="ALLOCATION",It="lookupVisitor method has loaded a bad format version ({0}) for visitor {1}.\nLearn more: ".concat(M,"#managing-visitor-cache"),kt="CACHE",bt="visitor {0}. {1} threw an exception {2}",_t="{0} threw an exception {1}",Ct="TRACKING_MANAGER",Ot="{0} Unexpected Error occurred {1}",Tt="{0} has been sent : {1}",xt="ACTIVATE HIT",Et="BATCH HIT";var St=function(t){l(r,t);var e,n,i=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=p(e);if(n){var r=p(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return g(this,t)});function r(t){var e;return(e=i.call(this)).visitorDelegate=t,e.visitorDelegate.on(P,(function(t){e.emit(P,t)})),e}return a(r,[{key:"visitorId",get:function(){return this.visitorDelegate.visitorId},set:function(t){this.visitorDelegate.visitorId=t}},{key:"anonymousId",get:function(){return this.visitorDelegate.anonymousId}},{key:"config",get:function(){return this.visitorDelegate.config}},{key:"context",get:function(){return this.visitorDelegate.context}},{key:"fetchStatus",get:function(){return this.visitorDelegate.fetchStatus}},{key:"hasConsented",get:function(){return this.visitorDelegate.hasConsented}},{key:"setConsent",value:function(t){this.visitorDelegate.setConsent(t)}},{key:"updateContext",value:function(t,e){this.visitorDelegate.updateContext(t,e)}},{key:"clearContext",value:function(){this.visitorDelegate.clearContext()}},{key:"getFlag",value:function(t){return this.visitorDelegate.getFlag(t)}},{key:"getFlags",value:function(){return this.visitorDelegate.getFlags()}},{key:"fetchFlags",value:function(){return this.visitorDelegate.fetchFlags()}},{key:"sendHit",value:function(t){return this.visitorDelegate.sendHit(t)}},{key:"sendHits",value:function(t){return this.visitorDelegate.sendHits(t)}},{key:"authenticate",value:function(t){this.visitorDelegate.authenticate(t)}},{key:"unauthenticate",value:function(){this.visitorDelegate.unauthenticate()}}]),r}(d.EventEmitter),wt=function(t){return t[t.SDK_NOT_INITIALIZED=0]="SDK_NOT_INITIALIZED",t[t.SDK_INITIALIZING=1]="SDK_INITIALIZING",t[t.SDK_PANIC=2]="SDK_PANIC",t[t.SDK_INITIALIZED=3]="SDK_INITIALIZED",t}({}),Rt=function(t){return t.DECISION_API="DECISION-API",t.BUCKETING="BUCKETING",t.BUCKETING_EDGE="BUCKETING_EDGE",t}({});function At(t,e,n){return(e=o(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n(7941),n(2526),n(7327),n(5003),n(4747),n(9337),n(3321),n(9070);var Nt=function(t){return t[t.NONE=0]="NONE",t[t.EMERGENCY=1]="EMERGENCY",t[t.ALERT=2]="ALERT",t[t.CRITICAL=3]="CRITICAL",t[t.ERROR=4]="ERROR",t[t.WARNING=5]="WARNING",t[t.NOTICE=6]="NOTICE",t[t.INFO=7]="INFO",t[t.DEBUG=8]="DEBUG",t[t.ALL=9]="ALL",t}({}),Dt=(n(6992),n(1532),n(8783),n(3948),n(1038),n(4916),n(5306),n(4603),n(9714),n(2222),n(8674),n(7042),n(1058),function(t){return t.UPDATE_CONTEXT="UPDATE_CONTEXT",t.AUTHENTICATE="AUTHENTICATE",t.UNAUTHENTICATE="UNAUTHENTICATE",t.FETCH_ERROR="FETCH_ERROR",t.READ_FROM_CACHE="READ_FROM_CACHE",t.VISITOR_CREATED="VISITOR_CREATED",t.NONE="NONE",t}({}));function Pt(t){for(var e=t,n=0;n<(arguments.length<=1?0:arguments.length-1);n++){var i=n+1<1||arguments.length<=n+1?void 0:arguments[n+1],r="string"==typeof i?i:JSON.stringify(i instanceof Map?Array.from(i.values()):i);e=e.replace(new RegExp("\\{".concat(n,"\\}"),"g"),r)}return e}function Mt(t,e,n){if(t&&t.logLevel&&!(t.logLevel<Nt.ERROR)){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];Ft(t,Pt.apply(void 0,[n].concat(r)),e)}}function Ft(t,e,n){!t||!t.logLevel||t.logLevel<Nt.ERROR||("function"==typeof t.onLog&&t.onLog(Nt.ERROR,n,e),t.logManager&&"function"==typeof t.logManager.error&&t.logManager.error(e,n))}function jt(t,e,n){if(t&&t.logLevel&&!(t.logLevel<Nt.WARNING)){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];Ht(t,Pt.apply(void 0,[n].concat(r)),e)}}function Ht(t,e,n){!t||!t.logLevel||t.logLevel<Nt.WARNING||("function"==typeof t.onLog&&t.onLog(Nt.WARNING,n,e),t.logManager&&"function"==typeof t.logManager.warning&&t.logManager.warning(e,n))}function Lt(t,e,n){if(t&&t.logLevel&&!(t.logLevel<Nt.INFO)){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];Vt(t,Pt.apply(void 0,[n].concat(r)),e)}}function Vt(t,e,n){!t||!t.logLevel||t.logLevel<Nt.INFO||("function"==typeof t.onLog&&t.onLog(Nt.INFO,n,e),t.logManager&&"function"==typeof t.logManager.info&&t.logManager.info(e,n))}function Ut(t,e,n){if(t&&t.logLevel&&!(t.logLevel<Nt.DEBUG)){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];Bt(t,Pt.apply(void 0,[n].concat(r)),e)}}function Bt(t,e,n){!t||!t.logLevel||t.logLevel<Nt.DEBUG||("function"==typeof t.onLog&&t.onLog(Nt.DEBUG,n,e),t.logManager&&"function"==typeof t.logManager.debug&&t.logManager.debug(e,n))}function Gt(){return"undefined"!=typeof window&&void 0!==window.document}function qt(t,e){return r(t)===r(e)&&("object"!==r(t)||"object"!==r(e)||Array.isArray(t)===Array.isArray(e))}function Kt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function Qt(t,e){return JSON.stringify({message:t,data:e})}function zt(t,e){if("string"!=typeof t)return Mt(e,"hexToValue","Invalid hex string: {0}",t),null;for(var n="",i=0;i<t.length;i+=2){var r=t.slice(i,i+2),o=parseInt(r,16);if(isNaN(o))return Mt(e,"hexToValue","Invalid hex character: {0}",r),null;n+=String.fromCharCode(o)}try{return JSON.parse(n)}catch(t){return Mt(e,"hexToValue","Error while parsing JSON: {0}",t),null}}var Jt=function(t){return t[t.CONTINUOUS_CACHING=0]="CONTINUOUS_CACHING",t[t.PERIODIC_CACHING=1]="PERIODIC_CACHING",t}({}),Wt=function(){function t(t){this.batchIntervals=null==t?void 0:t.batchIntervals,this.poolMaxSize=null==t?void 0:t.poolMaxSize,this._batchStrategy=this.getCacheStrategy(null==t?void 0:t.cacheStrategy)}return a(t,[{key:"getCacheStrategy",value:function(t){return"number"==typeof t?t:Gt()?Jt.CONTINUOUS_CACHING:Jt.PERIODIC_CACHING}},{key:"batchIntervals",get:function(){return this._batchIntervals},set:function(t){("number"!=typeof t||t<1||t>10800)&&(t=Gt()?5:10),this._batchIntervals=t}},{key:"poolMaxSize",get:function(){return this._poolMaxSize},set:function(t){("number"!=typeof t||t<5)&&(t=Gt()?10:100),this._poolMaxSize=t}},{key:"cacheStrategy",get:function(){return this._batchStrategy}}]),t}(),Yt=function(){function t(t){var e=t.envId,n=t.apiKey,i=t.timeout,r=t.logLevel,o=t.logManager,s=t.onSdkStatusChanged,a=t.fetchNow,c=t.decisionMode,u=t.reuseVisitorIds,f=t.initialBucketing,l=t.decisionApiUrl,h=t.hitDeduplicationTime,g=t.visitorCacheImplementation,p=t.hitCacheImplementation,d=t.disableCache,v=t.language,y=t.sdkVersion,m=t.trackingManagerConfig,k=t.onLog,b=t.onVisitorExposed,_=t.nextFetchConfig,C=t.fetchFlagsBufferingTime,O=t.disableDeveloperUsageTracking;this.initQaMode(),this.initSDKInfo(v,y),o&&(this.logManager=o),this.fetchFlagsBufferingTime=null!=C?C:2,this.nextFetchConfig=_||{revalidate:20},this._trackingManagerConfig=new Wt(m||{}),this.onLog=k,this.decisionApiUrl=l||I,this._envId=e,this._apiKey=n,this.logLevel=null!=r?r:Nt.ALL,this.timeout=i||2,this.fetchNow=void 0===a||a,this.reuseVisitorIds=void 0===u||u,this._decisionMode=c||Rt.DECISION_API,this._initialBucketing=f,this.hitDeduplicationTime=null!=h?h:2.5,this.disableCache=!!d,this.disableDeveloperUsageTracking=O||!1,g&&(this.visitorCacheImplementation=g),p&&(this.hitCacheImplementation=p),this.onSdkStatusChanged=s,this._onVisitorExposed=b}return a(t,[{key:"isQAModeEnabled",get:function(){return this._isQAModeEnabled},set:function(t){this._isQAModeEnabled=t}},{key:"disableDeveloperUsageTracking",get:function(){return this._disableDeveloperUsageTracking},set:function(t){this._disableDeveloperUsageTracking=t}},{key:"fetchFlagsBufferingTime",get:function(){return this._fetchFlagsBufferingTime},set:function(t){this._fetchFlagsBufferingTime=t}},{key:"nextFetchConfig",get:function(){return this._nextFetchConfig},set:function(t){this._nextFetchConfig=t}},{key:"fetchThirdPartyData",get:function(){return this._fetchThirdPartyData},set:function(t){this._fetchThirdPartyData=t}},{key:"trackingManagerConfig",get:function(){return this._trackingManagerConfig}},{key:"onLog",get:function(){return this._onLog},set:function(t){this._onLog=t}},{key:"onVisitorExposed",get:function(){return this._onVisitorExposed}},{key:"initQaMode",value:function(){if(Gt())try{var t=sessionStorage.getItem(R);this.isQAModeEnabled=t?JSON.parse(t):void 0}catch(t){Ft(this,Qt(t.message||t),"initQaMode"),this.isQAModeEnabled=!1}}},{key:"initSDKInfo",value:function(t,e){switch(t){case 1:y.name="ReactJS",y.version=null!=e?e:v;break;case 2:y.name="React-Native",y.version=null!=e?e:v;break;default:y.name="undefined"!=typeof window&&"Deno"in window?"Deno":"TypeScript",y.version=v}}},{key:"initialBucketing",get:function(){return this._initialBucketing},set:function(t){this._initialBucketing=t}},{key:"reuseVisitorIds",get:function(){return this._reuseVisitorIds},set:function(t){this._reuseVisitorIds=t}},{key:"onBucketingSuccess",get:function(){return this._onBucketingSuccess},set:function(t){this._onBucketingSuccess=t}},{key:"onBucketingFail",get:function(){return this._onBucketingFail},set:function(t){this._onBucketingFail=t}},{key:"onBucketingUpdated",get:function(){return this._onBucketingUpdated},set:function(t){this._onBucketingUpdated=t}},{key:"envId",get:function(){return this._envId},set:function(t){this._envId=t}},{key:"apiKey",get:function(){return this._apiKey},set:function(t){this._apiKey=t}},{key:"decisionMode",get:function(){return this._decisionMode}},{key:"timeout",get:function(){return this._timeout},set:function(t){this._timeout=t}},{key:"logLevel",get:function(){return this._logLevel},set:function(t){this._logLevel=t}},{key:"fetchNow",get:function(){return this._fetchNow},set:function(t){this._fetchNow=t}},{key:"pollingInterval",get:function(){return this._pollingInterval},set:function(t){this._pollingInterval=t}},{key:"hitDeduplicationTime",get:function(){return this._hitDeduplicationTime},set:function(t){"number"==typeof t?this._hitDeduplicationTime=t:Ft(this,Pt(j,"hitDeduplicationTime","number"),"hitDeduplicationTime")}},{key:"visitorCacheImplementation",get:function(){return this._visitorCacheImplementation},set:function(t){this._visitorCacheImplementation=t}},{key:"hitCacheImplementation",get:function(){return this._hitCacheImplementation},set:function(t){this._hitCacheImplementation=t}},{key:"disableCache",get:function(){return this._disableCache},set:function(t){this._disableCache=t}},{key:"onSdkStatusChanged",get:function(){return this._onSdkStatusChanged},set:function(t){t&&"function"!=typeof t?Ft(this,"statusChangedCallback must be a function","onSdkStatusChanged"):this._onSdkStatusChanged=t}},{key:"logManager",get:function(){return this._logManager},set:function(t){this._logManager=t}},{key:"decisionApiUrl",get:function(){return this._decisionApiUrl},set:function(t){"string"==typeof t?this._decisionApiUrl=t:Ft(this,Pt(j,"decisionApiUrl","string"),"decisionApiUrl")}}]),t}();function $t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$t(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$t(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Xt=function(t){l(r,t);var e,n,i=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=p(e);if(n){var r=p(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return g(this,t)});function r(t){var e,n;return(n=i.call(this,Zt(Zt({},t),{},{decisionMode:Rt.BUCKETING}))).pollingInterval=null!=(e=null==t?void 0:t.pollingInterval)?e:5,n.onBucketingFail=null==t?void 0:t.onBucketingFail,n.onBucketingSuccess=null==t?void 0:t.onBucketingSuccess,n.onBucketingUpdated=null==t?void 0:t.onBucketingUpdated,n.fetchThirdPartyData=null==t?void 0:t.fetchThirdPartyData,n}return a(r)}(Yt);function te(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ee(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?te(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ne=function(t){l(r,t);var e,n,i=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=p(e);if(n){var r=p(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return g(this,t)});function r(t){return i.call(this,ee(ee({},t),{},{decisionMode:Rt.DECISION_API}))}return a(r)}(Yt),ie=function(){function t(t,e,n){this._config=t,this._decisionManager=e,this._trackingManager=n}return a(t,[{key:"config",get:function(){return this._config},set:function(t){this._config=t}},{key:"decisionManager",get:function(){return this._decisionManager},set:function(t){this._decisionManager=t}},{key:"trackingManager",get:function(){return this._trackingManager},set:function(t){this._trackingManager=t}}]),t}(),re=function(t){return t.VISITOR_SEND_HIT="VISITOR_SEND_HIT",t.VISITOR_FETCH_CAMPAIGNS_ERROR="VISITOR_FETCH_CAMPAIGNS_ERROR",t.VISITOR_FETCH_CAMPAIGNS="VISITOR_FETCH_CAMPAIGNS",t.VISITOR_AUTHENTICATE="VISITOR_AUTHENTICATE",t.VISITOR_UNAUTHENTICATE="VISITOR_UNAUTHENTICATE",t.VISITOR_EXPOSED_FLAG_NOT_FOUND="VISITOR_EXPOSED_FLAG_NOT_FOUND",t.FLAG_VALUE_NOT_CALLED="FLAG_VALUE_NOT_CALLED",t.GET_FLAG_VALUE_FLAG_NOT_FOUND="GET_FLAG_VALUE_FLAG_NOT_FOUND",t.GET_FLAG_METADATA_TYPE_WARNING="GET_FLAG_METADATA_TYPE_WARNING",t.GET_FLAG_VALUE_TYPE_WARNING="GET_FLAG_VALUE_TYPE_WARNING",t.VISITOR_EXPOSED_TYPE_WARNING="VISITOR_EXPOSED_TYPE_WARNING",t.VISITOR_SEND_ACTIVATE="VISITOR_SEND_ACTIVATE",t.GET_CAMPAIGNS_ROUTE_RESPONSE_ERROR="GET_CAMPAIGNS_ROUTE_RESPONSE_ERROR",t.GET_CAMPAIGNS_ROUTE_RESPONSE="GET_CAMPAIGNS_ROUTE_RESPONSE",t.SDK_BUCKETING_FILE="SDK_BUCKETING_FILE",t.SEND_ACTIVATE_HIT_ROUTE_ERROR="SEND_ACTIVATE_HIT_ROUTE_ERROR",t.SEND_BATCH_HIT_ROUTE_RESPONSE_ERROR="SEND_BATCH_HIT_ROUTE_RESPONSE_ERROR",t.SEND_HIT_ROUTE_ERROR="SEND_HIT_ROUTE_ERROR",t.SDK_BUCKETING_FILE_ERROR="SDK_BUCKETING_FILE_ERROR",t.SDK_CONFIG="SDK_CONFIG",t}({}),oe=function(t){return t.NONE="NONE",t.ANONYMOUS_ID_CACHE="ANONYMOUS_ID_CACHE",t.VISITOR_ID_CACHE="VISITOR_ID_CACHE",t.VISITOR_ID_CACHE_NOT_ANONYMOUS_ID_CACHE="VISITOR_ID_CACHE_NOT_ANONYMOUS_ID_CACHE",t}({}),se=(n(3161),n(9653),function(){function t(t){var e=t.type,n=t.userIp,i=t.screenResolution,r=t.locale,o=t.sessionNumber,s=t.visitorId,a=t.anonymousId,c=t.ds,u=t.qaMode;this._type=e,n&&(this.userIp=n),i&&(this.screenResolution=i),r&&(this.locale=r),o&&(this.sessionNumber=o),this.visitorId=s,this._anonymousId=a||null,this.createdAt=Date.now(),this.ds=c||$,this.qaMode=u}return a(t,[{key:"key",get:function(){return this._key},set:function(t){this._key=t}},{key:"sessionNumber",get:function(){return this._sessionNumber},set:function(t){this._sessionNumber=t}},{key:"locale",get:function(){return this._locale},set:function(t){this._locale=t}},{key:"screenResolution",get:function(){return this._screenResolution},set:function(t){this._screenResolution=t}},{key:"userIp",get:function(){return this._userIp},set:function(t){this._userIp=t}},{key:"anonymousId",get:function(){return this._anonymousId},set:function(t){this._anonymousId=t}},{key:"visitorId",get:function(){return this._visitorId},set:function(t){this._visitorId=t}},{key:"ds",get:function(){return this._ds},set:function(t){this._ds=t}},{key:"type",get:function(){return this._type}},{key:"config",get:function(){return this._config},set:function(t){this._config=t}},{key:"createdAt",get:function(){return this._createdAt},set:function(t){this._createdAt=t}},{key:"qaMode",get:function(){return this._qaMode},set:function(t){this._qaMode=t}},{key:"isNotEmptyString",value:function(t,e){return!(!t||"string"!=typeof t)||(Ft(this.config,Pt(j,e,"string"),e),!1)}},{key:"isNumeric",value:function(t,e){return!(!t||"number"!=typeof t)||(Ft(this.config,Pt(j,e,"number"),e),!1)}},{key:"isInteger",value:function(t,e){return!!Number.isInteger(t)||(Ft(this.config,Pt(j,e,"integer"),e),!1)}},{key:"toApiKeys",value:function(){var t,e,n=(At(e={},J,this.visitorId),At(e,W,this.ds),At(e,Q,"".concat(null==(t=this.config)?void 0:t.envId)),At(e,"t",this.type),At(e,z,null),At(e,Y,Date.now()-this._createdAt),e);return this.qaMode&&(n.qa=!0),this.userIp&&(n.uip=this.userIp),this.screenResolution&&(n.sr=this.screenResolution),this.locale&&(n.ul=this.locale),this.sessionNumber&&(n.sn=this.sessionNumber),this.visitorId&&this.anonymousId&&(n[J]=this.anonymousId,n[z]=this.visitorId),n}},{key:"toObject",value:function(){return{key:this.key,visitorId:this.visitorId,ds:this.ds,type:this.type,userIp:this.userIp,screenResolution:this.screenResolution,locale:this.locale,sessionNumber:this.sessionNumber,anonymousId:this.anonymousId,createdAt:this.createdAt,qaMode:this.qaMode}}},{key:"isReady",value:function(){return!!(this.visitorId&&this.ds&&this.config&&this.config.envId&&this.type)}}]),t}()),ae=function(t){return t[t.Timer=0]="Timer",t[t.BatchLength=1]="BatchLength",t[t.Flush=2]="Flush",t[t.ActivateLength=3]="ActivateLength",t[t.DirectHit=4]="DirectHit",t[t.DirectActivate=5]="DirectActivate",t}({});var ce=function(t){l(o,t);var e,n,i=(e=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=p(e);if(n){var r=p(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return g(this,t)});function o(t){var e;e=i.call(this,{type:t.type,userIp:t.userIp,screenResolution:t.screenResolution,locale:t.locale,sessionNumber:t.sessionNumber,visitorId:t.visitorId,anonymousId:t.anonymousId});var n=t.version,r=t.logLevel,o=t.accountId,s=t.envId,a=t.timestamp,c=t.label,u=t.stackType,f=t.stackName,l=t.stackVersion,h=t.stackOriginName,g=t.stackOriginVersion,p=t.sdkStatus,d=t.sdkConfigMode,v=t.sdkConfigCustomLogManager,m=t.sdkConfigCustomCacheManager,I=t.sdkConfigStatusListener,k=t.sdkConfigTimeout,b=t.sdkConfigPollingInterval,_=t.sdkConfigTrackingManagerStrategy,C=t.sdkConfigTrackingManagerBatchIntervals,O=t.sdkConfigTrackingManagerPoolMaxSize,T=t.httpRequestUrl,x=t.httpRequestMethod,E=t.httpRequestHeaders,S=t.httpRequestBody,w=t.httpResponseTime,R=t.httpResponseUrl,A=t.httpResponseMethod,N=t.httpResponseHeaders,D=t.httpResponseCode,P=t.httpResponseBody,M=t.visitorStatus,F=t.visitorInstanceType,j=t.visitorContext,H=t.visitorConsent,L=t.visitorAssignmentHistory,V=t.visitorFlags,U=t.visitorIsAuthenticated,B=t.config,G=t.flagKey,q=t.flagValue,K=t.flagDefault,Q=t.flagMetadataCampaignId,z=t.flagMetadataVariationGroupId,J=t.flagMetadataVariationId,W=t.flagMetadataCampaignSlug,Y=t.flagMetadataCampaignType,Z=t.sdkConfigFetchNow,X=t.sdkConfigReuseVisitorIds,tt=t.sdkConfigInitialBucketing,et=t.sdkConfigDecisionApiUrl,nt=t.sdkConfigHitDeduplicationTime,it=t.flagshipInstanceId,rt=t.hitContent,ot=t.traffic,st=t.lastInitializationTimestamp,at=t.lastBucketingTimestamp,ct=t.batchTriggeredBy,ut=t.visitorCampaigns,ft=t.visitorCampaignFromCache,lt=t.visitorInitialCampaigns,ht=t.visitorInitialFlagsData,gt=t.flagMetadataCampaignIsReference,pt=t.contextKey,dt=t.contextValue,vt=t.sdkBucketingFile,yt=t.flagMetadataCampaignName,mt=t.flagMetadataVariationGroupName,It=t.flagMetadataVariationName,kt=t.sdkConfigUsingCustomHitCache,bt=t.sdkConfigUsingCustomVisitorCache,_t=t.sdkConfigUsingOnVisitorExposed,Ct=t.sdkConfigFetchThirdPartyData,Ot=t.sdkConfigFetchFlagsBufferingTime,Tt=t.sdkConfigDisableDeveloperUsageTracking,xt=t.sdkConfigNextFetchConfig,Et=t.sdkConfigDisableCache,St=t.visitorSessionId,wt=t.sdkConfigLogLevel;return e.visitorSessionId=St,e.sdkConfigDisableCache=Et,e.sdkConfigDisableDeveloperUsageTracking=Tt,e.sdkConfigNextFetchConfig=xt,e.sdkConfigFetchFlagsBufferingTime=Ot,e.sdkConfigFetchThirdPartyData=Ct,e.sdkConfigUsingCustomHitCache=kt,e.sdkConfigUsingCustomVisitorCache=bt,e.sdkConfigUsingOnVisitorExposed=_t,e.flagMetadataCampaignName=yt,e.flagMetadataVariationGroupName=mt,e.flagMetadataVariationName=It,e.traffic=ot,e.sdkBucketingFile=vt,e.contextKey=pt,e.contextValue=dt,e.lastBucketingTimestamp=at,e.lastInitializationTimestamp=st,e.batchTriggeredBy=ct,e.visitorCampaigns=ut,e.visitorAssignmentHistory=L,e.visitorInitialCampaigns=lt,e.visitorInitialFlagsData=ht,e.visitorCampaignFromCache=ft,e.flagMetadataCampaignIsReference=gt,e.config=B,e.version=n||"1",e.logLevel=r,e.flagshipInstanceId=it,e.accountId=o,e.envId=s||B.envId,e.timestamp=a||new Date(Date.now()).toISOString(),e.timeZone=e.getTimezone(),e.label=c,e.stackType=u||"SDK",e.stackName=f||y.name,e.stackVersion=l||y.version,e.stackOriginName=h,e.stackOriginVersion=g,e.sdkStatus=p,e.sdkConfigMode=d,e.sdkConfigCustomLogManager=v,e.sdkConfigCustomCacheManager=m,e.sdkConfigStatusListener=I,e.sdkConfigTimeout=k,e.sdkConfigPollingInterval=b,e.sdkConfigTrackingManagerStrategy=_,e.sdkConfigTrackingManagerBatchIntervals=C,e.sdkConfigTrackingManagerPoolMaxSize=O,e.sdkConfigFetchNow=Z,e.sdkConfigReuseVisitorIds=X,e.sdkConfigInitialBucketing=tt,e.sdkConfigDecisionApiUrl=et,e.sdkConfigHitDeduplicationTime=nt,e.httpRequestUrl=T,e.httpRequestMethod=x,e.httpRequestHeaders=E,e.httpRequestBody=S,e.httpResponseUrl=R,e.httpResponseMethod=A,e.httpResponseHeaders=N,e.httpResponseCode=D,e.httpResponseBody=P,e.httpResponseTime=w,e.visitorStatus=M,e.visitorInstanceType=F,e.visitorContext=j,e.visitorConsent=H,e.visitorAssignmentHistory=L,e.visitorFlags=V,e.visitorIsAuthenticated=U,e.flagKey=G,e.flagValue=q,e.flagDefault=K,e.flagMetadataCampaignId=Q,e.flagMetadataVariationGroupId=z,e.flagMetadataVariationId=J,e.flagMetadataCampaignSlug=W,e.flagMetadataCampaignType=Y,e.hitContent=rt,e.ds=$,e.sdkConfigLogLevel=wt,e}return a(o,[{key:"sdkConfigLogLevel",get:function(){return this._sdkConfigLogLevel},set:function(t){this._sdkConfigLogLevel=t}},{key:"traffic",get:function(){return this._traffic},set:function(t){this._traffic=t}},{key:"flagshipInstanceId",get:function(){return this._flagshipInstanceId},set:function(t){this._flagshipInstanceId=t}},{key:"visitorSessionId",get:function(){return this._visitorSessionId},set:function(t){this._visitorSessionId=t}},{key:"sdkConfigDisableCache",get:function(){return this._sdkConfigDisableCache},set:function(t){this._sdkConfigDisableCache=t}},{key:"sdkConfigDisableDeveloperUsageTracking",get:function(){return this._sdkConfigDisableDeveloperUsageTracking},set:function(t){this._sdkConfigDisableDeveloperUsageTracking=t}},{key:"sdkConfigNextFetchConfig",get:function(){return this._sdkConfigNextFetchConfig},set:function(t){this._sdkConfigNextFetchConfig=t}},{key:"sdkConfigFetchFlagsBufferingTime",get:function(){return this._sdkConfigFetchFlagsBufferingTime},set:function(t){this._sdkConfigFetchFlagsBufferingTime=t}},{key:"sdkConfigFetchThirdPartyData",get:function(){return this._sdkConfigFetchThirdPartyData},set:function(t){this._sdkConfigFetchThirdPartyData=t}},{key:"sdkConfigUsingOnVisitorExposed",get:function(){return this._sdkConfigUsingOnVisitorExposed},set:function(t){this._sdkConfigUsingOnVisitorExposed=t}},{key:"sdkConfigUsingCustomVisitorCache",get:function(){return this._sdkConfigUsingCustomVisitorCache},set:function(t){this._sdkConfigUsingCustomVisitorCache=t}},{key:"sdkConfigUsingCustomHitCache",get:function(){return this._sdkConfigUsingCustomHitCache},set:function(t){this._sdkConfigUsingCustomHitCache=t}},{key:"flagMetadataVariationName",get:function(){return this._flagMetadataVariationName},set:function(t){this._flagMetadataVariationName=t}},{key:"flagMetadataVariationGroupName",get:function(){return this._flagMetadataVariationGroupName},set:function(t){this._flagMetadataVariationGroupName=t}},{key:"flagMetadataCampaignName",get:function(){return this._flagMetadataCampaignName},set:function(t){this._flagMetadataCampaignName=t}},{key:"sdkBucketingFile",get:function(){return this._sdkBucketingFile},set:function(t){this._sdkBucketingFile=t}},{key:"contextValue",get:function(){return this._contextValue},set:function(t){this._contextValue=t}},{key:"contextKey",get:function(){return this._contextKey},set:function(t){this._contextKey=t}},{key:"flagMetadataCampaignIsReference",get:function(){return this._flagMetadataCampaignIsReference},set:function(t){this._flagMetadataCampaignIsReference=t}},{key:"timeZone",get:function(){return this._timeZone},set:function(t){this._timeZone=t}},{key:"visitorCampaignFromCache",get:function(){return this._visitorCampaignFromCache},set:function(t){this._visitorCampaignFromCache=t}},{key:"batchTriggeredBy",get:function(){return this._batchTriggeredBy},set:function(t){this._batchTriggeredBy=t}},{key:"lastBucketingTimestamp",get:function(){return this._lastBucketingTimestamp},set:function(t){this._lastBucketingTimestamp=t}},{key:"lastInitializationTimestamp",get:function(){return this._lastInitializationTimestamp},set:function(t){this._lastInitializationTimestamp=t}},{key:"hitContent",get:function(){return this._hitContent},set:function(t){this._hitContent=t}},{key:"httpResponseTime",get:function(){return this._httRequestTime},set:function(t){this._httRequestTime=t}},{key:"visitorCampaigns",get:function(){return this._visitorCampaign},set:function(t){this._visitorCampaign=t}},{key:"visitorInitialFlagsData",get:function(){return this._visitorInitialFlagsData},set:function(t){this._visitorInitialFlagsData=t}},{key:"visitorInitialCampaigns",get:function(){return this._visitorInitialCampaigns},set:function(t){this._visitorInitialCampaigns=t}},{key:"sdkConfigHitDeduplicationTime",get:function(){return this._sdkConfigHitDeduplicationTime},set:function(t){this._sdkConfigHitDeduplicationTime=t}},{key:"sdkConfigDecisionApiUrl",get:function(){return this._sdkConfigDecisionApiUrl},set:function(t){this._sdkConfigDecisionApiUrl=t}},{key:"sdkConfigInitialBucketing",get:function(){return this._sdkConfigInitialBucketing},set:function(t){this._sdkConfigInitialBucketing=t}},{key:"sdkConfigReuseVisitorIds",get:function(){return this._sdkConfigReuseVisitorIds},set:function(t){this._sdkConfigReuseVisitorIds=t}},{key:"sdkConfigFetchNow",get:function(){return this._sdkConfigFetchNow},set:function(t){this._sdkConfigFetchNow=t}},{key:"flagMetadataCampaignType",get:function(){return this._flagMetadataCampaignType},set:function(t){this._flagMetadataCampaignType=t}},{key:"flagMetadataCampaignSlug",get:function(){return this._flagMetadataCampaignSlug},set:function(t){this._flagMetadataCampaignSlug=t}},{key:"flagMetadataVariationId",get:function(){return this._flagMetadataVariationId},set:function(t){this._flagMetadataVariationId=t}},{key:"flagMetadataVariationGroupId",get:function(){return this._flagMetadataVariationGroupId},set:function(t){this._flagMetadataVariationGroupId=t}},{key:"flagMetadataCampaignId",get:function(){return this._flagMetadataCampaignId},set:function(t){this._flagMetadataCampaignId=t}},{key:"flagDefault",get:function(){return this._flagDefault},set:function(t){this._flagDefault=t}},{key:"flagValue",get:function(){return this._flagValue},set:function(t){this._flagValue=t}},{key:"flagKey",get:function(){return this._flagKey},set:function(t){this._flagKey=t}},{key:"visitorIsAuthenticated",get:function(){return this._visitorIsAuthenticated},set:function(t){this._visitorIsAuthenticated=t}},{key:"visitorFlags",get:function(){return this._visitorFlags},set:function(t){this._visitorFlags=t}},{key:"visitorAssignmentHistory",get:function(){return this._visitorAssignmentHistory},set:function(t){this._visitorAssignmentHistory=t}},{key:"visitorConsent",get:function(){return this._visitorConsent},set:function(t){this._visitorConsent=t}},{key:"visitorContext",get:function(){return this._visitorContext},set:function(t){this._visitorContext=t}},{key:"visitorInstanceType",get:function(){return this._visitorInstanceType},set:function(t){this._visitorInstanceType=t}},{key:"visitorStatus",get:function(){return this._visitorStatus},set:function(t){this._visitorStatus=t}},{key:"httpResponseBody",get:function(){return this._httpResponseBody},set:function(t){this._httpResponseBody=t}},{key:"httpResponseCode",get:function(){return this._httpResponseCode},set:function(t){this._httpResponseCode=t}},{key:"httpResponseHeaders",get:function(){return this._httpResponseHeaders},set:function(t){this._httpResponseHeaders=t}},{key:"httpResponseMethod",get:function(){return this._httpResponseMethod},set:function(t){this._httpResponseMethod=t}},{key:"httpResponseUrl",get:function(){return this._httpResponseUrl},set:function(t){this._httpResponseUrl=t}},{key:"httpRequestBody",get:function(){return this._httpRequestBody},set:function(t){this._httpRequestBody=t}},{key:"httpRequestHeaders",get:function(){return this._httpRequestHeaders},set:function(t){this._httpRequestHeaders=t}},{key:"httpRequestMethod",get:function(){return this._httpRequestMethod},set:function(t){this._httpRequestMethod=t}},{key:"httpRequestUrl",get:function(){return this._httpRequestUrl},set:function(t){this._httpRequestUrl=t}},{key:"sdkConfigTrackingManagerPoolMaxSize",get:function(){return this._sdkConfigTrackingManagerConfigBatchLength},set:function(t){this._sdkConfigTrackingManagerConfigBatchLength=t}},{key:"sdkConfigTrackingManagerBatchIntervals",get:function(){return this._sdkConfigTrackingManagerConfigBatchIntervals},set:function(t){this._sdkConfigTrackingManagerConfigBatchIntervals=t}},{key:"sdkConfigTrackingManagerStrategy",get:function(){return this._sdkConfigTrackingManagerConfigStrategy},set:function(t){this._sdkConfigTrackingManagerConfigStrategy=t}},{key:"sdkConfigPollingInterval",get:function(){return this._sdkConfigPollingTime},set:function(t){this._sdkConfigPollingTime=t}},{key:"sdkConfigTimeout",get:function(){return this._sdkConfigTimeout},set:function(t){this._sdkConfigTimeout=t}},{key:"sdkConfigStatusListener",get:function(){return this._sdkConfigStatusListener},set:function(t){this._sdkConfigStatusListener=t}},{key:"sdkConfigCustomCacheManager",get:function(){return this._sdkConfigCustomCacheManager},set:function(t){this._sdkConfigCustomCacheManager=t}},{key:"sdkConfigCustomLogManager",get:function(){return this._sdkConfigCustomLogManager},set:function(t){this._sdkConfigCustomLogManager=t}},{key:"sdkConfigMode",get:function(){return this._sdkConfigMode},set:function(t){this._sdkConfigMode=t}},{key:"sdkStatus",get:function(){return this._sdkStatus},set:function(t){this._sdkStatus=t}},{key:"stackOriginVersion",get:function(){return this._stackOriginVersion},set:function(t){this._stackOriginVersion=t}},{key:"stackOriginName",get:function(){return this._stackOriginName},set:function(t){this._stackOriginName=t}},{key:"stackVersion",get:function(){return this._stackVersion},set:function(t){this._stackVersion=t}},{key:"stackName",get:function(){return this._stackName},set:function(t){this._stackName=t}},{key:"stackType",get:function(){return this._stackType},set:function(t){this._stackType=t}},{key:"label",get:function(){return this._label},set:function(t){this._label=t}},{key:"timestamp",get:function(){return this._timestamp},set:function(t){this._timestamp=t}},{key:"envId",get:function(){return this._envId},set:function(t){this._envId=t}},{key:"accountId",get:function(){return this._accountId},set:function(t){this._accountId=t}},{key:"logLevel",get:function(){return this._logLevel},set:function(t){this._logLevel=t}},{key:"version",get:function(){return this._logVersion},set:function(t){this._logVersion=t}},{key:"getTimezone",value:function(){var t,e;return("object"===("undefined"==typeof Intl?"undefined":r(Intl))?null==(t=Intl.DateTimeFormat())||null==(e=t.resolvedOptions())?void 0:e.timeZone:void 0)||"".concat((new Date).getTimezoneOffset()/60)}},{key:"toApiKeys",value:function(){var t,e,n=(At(e={},J,this.visitorId),At(e,W,this.ds),At(e,Q,"".concat(null==(t=this.config)?void 0:t.envId)),At(e,"t",this.type),At(e,"cv",{}),e),i={version:"".concat(this.version),logLevel:"".concat(Nt[this.logLevel]),timestamp:"".concat(this.timestamp),timeZone:"".concat(this.timeZone),label:"".concat(this.label),"stack.type":"".concat(this.stackType),"stack.name":"".concat(this.stackName),"stack.version":"".concat(this.stackVersion)};if(void 0!==this.lastBucketingTimestamp&&(i.lastBucketingTimestamp="".concat(this.lastBucketingTimestamp)),void 0!==this.lastInitializationTimestamp&&(i.lastInitializationTimestamp="".concat(this.lastInitializationTimestamp)),void 0!==this.flagshipInstanceId&&(i.flagshipInstanceId="".concat(this.flagshipInstanceId)),this.accountId&&(i.accountId="".concat(this.accountId)),this.envId&&(i.envId="".concat(this.envId)),void 0!==this.sdkBucketingFile&&(i.sdkBucketingFile=JSON.stringify(this.sdkBucketingFile)),void 0!==this.stackOriginName&&(i["stack.origin.name"]="".concat(this.stackOriginName)),void 0!==this.stackOriginVersion&&(i["stack.origin.version"]="".concat(this.stackOriginVersion)),void 0!==this.sdkStatus&&(i["sdk.status"]="".concat(wt[this.sdkStatus])),void 0!==this.sdkConfigLogLevel&&(i["sdk.config.logLevel"]="".concat(Nt[this.sdkConfigLogLevel])),void 0!==this.sdkConfigMode&&(i["sdk.config.mode"]="".concat(this.sdkConfigMode)),void 0!==this.sdkConfigCustomLogManager&&(i["sdk.config.customLogManager"]="".concat(this.sdkConfigCustomLogManager)),void 0!==this.sdkConfigCustomCacheManager&&(i["sdk.config.customCacheManager"]="".concat(this.sdkConfigCustomCacheManager)),void 0!==this.sdkConfigStatusListener&&(i["sdk.config.custom.StatusListener"]="".concat(this.sdkConfigStatusListener)),void 0!==this.sdkConfigTimeout&&(i["sdk.config.timeout"]="".concat(1e3*this.sdkConfigTimeout)),void 0!==this.sdkConfigPollingInterval&&(i["sdk.config.pollingTime"]="".concat(1e3*this.sdkConfigPollingInterval)),void 0!==this.sdkConfigTrackingManagerStrategy&&(i["sdk.config.trackingManager.strategy"]="".concat(Jt[this.sdkConfigTrackingManagerStrategy])),void 0!==this.sdkConfigTrackingManagerBatchIntervals&&(i["sdk.config.trackingManager.batchIntervals"]="".concat(1e3*this.sdkConfigTrackingManagerBatchIntervals)),void 0!==this.sdkConfigTrackingManagerPoolMaxSize&&(i["sdk.config.trackingManager.poolMaxSize"]="".concat(this.sdkConfigTrackingManagerPoolMaxSize)),void 0!==this.sdkConfigFetchNow&&(i["sdk.config.fetchNow"]="".concat(this.sdkConfigFetchNow)),void 0!==this.sdkConfigReuseVisitorIds&&(i["sdk.config.reuseVisitorIds"]="".concat(this.sdkConfigReuseVisitorIds)),void 0!==this.sdkConfigInitialBucketing&&(i["sdk.config.initialBucketing"]=JSON.stringify(this.sdkConfigInitialBucketing)),void 0!==this.sdkConfigDecisionApiUrl&&(i["sdk.config.decisionApiUrl"]="".concat(this.sdkConfigDecisionApiUrl)),void 0!==this.sdkConfigHitDeduplicationTime&&(i["sdk.config.hitDeduplicationTime"]="".concat(1e3*this.sdkConfigHitDeduplicationTime)),void 0!==this.sdkConfigUsingCustomHitCache&&(i["sdk.config.usingCustomHitCache"]=JSON.stringify(this.sdkConfigUsingCustomHitCache)),void 0!==this.sdkConfigUsingCustomVisitorCache&&(i["sdk.config.usingCustomVisitorCache"]=JSON.stringify(this.sdkConfigUsingCustomVisitorCache)),void 0!==this.sdkConfigUsingOnVisitorExposed&&(i["sdk.config.usingOnVisitorExposed"]=JSON.stringify(this.sdkConfigUsingOnVisitorExposed)),void 0!==this.sdkConfigFetchThirdPartyData&&(i["sdk.config.fetchThirdPartyData"]=JSON.stringify(this.sdkConfigFetchThirdPartyData)),void 0!==this.sdkConfigFetchFlagsBufferingTime&&(i["sdk.config.fetchFlagsBufferingTime"]=JSON.stringify(1e3*this.sdkConfigFetchFlagsBufferingTime)),void 0!==this.sdkConfigNextFetchConfig&&(i["sdk.config.nextFetchConfig"]=JSON.stringify(this.sdkConfigNextFetchConfig)),void 0!==this.sdkConfigDisableDeveloperUsageTracking&&(i["sdk.config.disableDeveloperUsageTracking"]=JSON.stringify(this.sdkConfigDisableDeveloperUsageTracking)),void 0!==this.sdkConfigDisableCache&&(i["sdk.config.disableCache"]=JSON.stringify(this.sdkConfigDisableCache)),void 0!==this.httpRequestUrl&&(i["http.request.url"]="".concat(this.httpRequestUrl)),void 0!==this.httpRequestMethod&&(i["http.request.method"]="".concat(this.httpRequestMethod)),void 0!==this.httpRequestHeaders&&(i["http.request.headers"]=JSON.stringify(this.httpRequestHeaders)),void 0!==this.httpRequestBody&&(i["http.request.body"]=JSON.stringify(this.httpRequestBody)),void 0!==this.httpResponseUrl&&(i["http.response.url"]="".concat(this.httpResponseUrl)),void 0!==this.httpResponseMethod&&(i["http.response.method"]="".concat(this.httpResponseMethod)),void 0!==this.httpResponseHeaders&&(i["http.response.headers"]=JSON.stringify(this.httpResponseHeaders)),void 0!==this.httpResponseCode&&(i["http.response.code"]="".concat(this.httpResponseCode)),void 0!==this.httpResponseBody&&(i["http.response.body"]=JSON.stringify(this.httpResponseBody)),void 0!==this.httpResponseTime&&(i["http.response.time"]="".concat(this.httpResponseTime)),void 0!==this.visitorId&&(i["visitor.visitorId"]="".concat(this.visitorId)),void 0!==this.anonymousId&&(i["visitor.anonymousId"]="".concat(this.anonymousId)),void 0!==this.visitorSessionId&&(i["visitor.sessionId"]="".concat(this.visitorSessionId)),void 0!==this.visitorStatus&&(i["visitor.status"]="".concat(this.visitorStatus)),void 0!==this.visitorInstanceType&&(i["visitor.instanceType"]="".concat(this.visitorInstanceType)),void 0!==this.visitorContext)for(var r in this.visitorContext){var o=this.visitorContext[r];i["visitor.context.[".concat(r,"]")]="".concat(o)}if(void 0!==this.visitorConsent&&(i["visitor.consent"]="".concat(this.visitorConsent)),void 0!==this.visitorAssignmentHistory)for(var s in this.visitorAssignmentHistory){var a=this.visitorAssignmentHistory[s];i["visitor.assignments.[".concat(s,"]")]=a}if(void 0!==this.visitorFlags&&this.visitorFlags.forEach((function(t,e){for(var n in t){var r=t[n],o="value"===n||"key"===n,s="string"==typeof r?r:JSON.stringify(r);i["visitor.flags.[".concat(e,"]").concat(o?"":".metadata",".").concat(n)]=s}})),void 0!==this.visitorIsAuthenticated&&(i["visitor.isAuthenticated"]="".concat(this.visitorIsAuthenticated)),void 0!==this.visitorInitialCampaigns&&(i["visitor.initialCampaigns"]=JSON.stringify(this.visitorInitialCampaigns)),void 0!==this.visitorInitialFlagsData&&(i["visitor.initialFlagsData"]=JSON.stringify(Array.isArray(this.visitorInitialFlagsData)?this.visitorInitialFlagsData:Array.from(this.visitorInitialFlagsData))),void 0!==this.visitorCampaigns&&(i["visitor.campaigns"]=JSON.stringify(this.visitorCampaigns)),void 0!==this.visitorCampaignFromCache&&(i["visitor.campaignFromCache"]=JSON.stringify(this.visitorCampaignFromCache)),void 0!==this.contextKey&&(i.contextKey="".concat(this.contextKey)),void 0!==this.contextValue&&(i.contextValue="".concat(this.contextValue)),void 0!==this.flagKey&&(i["flag.key"]="".concat(this.flagKey)),void 0!==this.flagValue&&(i["flag.value"]="".concat(this.flagValue)),void 0!==this.flagDefault&&(i["flag.default"]=JSON.stringify(this.flagDefault)),void 0!==this.flagMetadataCampaignId&&(i["flag.metadata.campaignId"]="".concat(this.flagMetadataCampaignId)),void 0!==this.flagMetadataCampaignName&&(i["flag.metadata.campaignName"]="".concat(this.flagMetadataCampaignName)),void 0!==this.flagMetadataVariationGroupId&&(i["flag.metadata.variationGroupId"]="".concat(this.flagMetadataVariationGroupId)),void 0!==this.flagMetadataVariationGroupName&&(i["flag.metadata.variationGroupName"]="".concat(this.flagMetadataVariationGroupName)),void 0!==this.flagMetadataVariationId&&(i["flag.metadata.variationId"]="".concat(this.flagMetadataVariationId)),void 0!==this.flagMetadataVariationName&&(i["flag.metadata.variationName"]="".concat(this.flagMetadataVariationName)),void 0!==this.flagMetadataCampaignSlug&&(i["flag.metadata.campaignSlug"]="".concat(this.flagMetadataCampaignSlug)),void 0!==this.flagMetadataCampaignType&&(i["flag.metadata.campaignType"]="".concat(this.flagMetadataCampaignType)),void 0!==this.flagMetadataCampaignIsReference&&(i["flag.metadata.isReference"]="".concat(this.flagMetadataCampaignIsReference)),void 0!==this.hitContent)for(var c in this.hitContent){var u=this.hitContent[c];i["hit.".concat(c)]="string"==typeof u?u:JSON.stringify(u)}return void 0!==this.batchTriggeredBy&&(i.batchTriggeredBy="".concat(ae[this.batchTriggeredBy])),n.cv=i,n}},{key:"isReady",value:function(){return!((!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&!t.prototype.isReady.call(this))}},{key:"getErrorMessage",value:function(){return"event category and event action are required"}}]),o}(se);function ue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function fe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ue(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var le=function(t){l(r,t);var e,n,i=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=p(e);if(n){var r=p(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return g(this,t)});function r(t){return i.call(this,fe(fe({},t),{},{type:"TROUBLESHOOTING"}))}return a(r)}(ce),he=function(){function t(t,e){At(this,"_panic",!1),this._config=e,this._httpClient=t}var n;return a(t,[{key:"trackingManager",get:function(){return this._trackingManager},set:function(t){this._trackingManager=t}},{key:"flagshipInstanceId",get:function(){return this._flagshipInstanceId},set:function(t){this._flagshipInstanceId=t}},{key:"lastBucketingTimestamp",get:function(){return this._lastBucketingTimestamp}},{key:"troubleshooting",get:function(){return this._troubleshooting},set:function(t){this._troubleshooting=t}},{key:"config",get:function(){return this._config}},{key:"panic",set:function(t){this.updateFlagshipStatus(t?wt.SDK_PANIC:wt.SDK_INITIALIZED),this._panic=t,t&&Bt(this.config,"Panic mode is enabled : all feature are disabled except fetchFlags.",at)}},{key:"statusChangedCallback",value:function(t){this._statusChangedCallback=t}},{key:"updateFlagshipStatus",value:function(t){"function"==typeof this._statusChangedCallback&&this._statusChangedCallback&&this._statusChangedCallback(t)}},{key:"getModifications",value:function(t){var e=new Map;return t.forEach((function(t){var n=t.variation.modifications.value;for(var i in n){var r=n[i];e.set(i,{key:i,campaignId:t.id,campaignName:t.name||"",variationGroupId:t.variationGroupId,variationGroupName:t.variationGroupName||"",variationId:t.variation.id,variationName:t.variation.name||"",isReference:!!t.variation.reference,campaignType:t.type,slug:t.slug,value:r})}})),e}},{key:"isPanic",value:function(){return this._panic}},{key:"getDecisionApiCampaignsAsync",value:(n=e(u().mark((function t(e){var n,i,r,o,s,a,c,f,l,h,g,p,d,v,m;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return At(n={},Z,"".concat(this.config.apiKey)),At(n,tt,y.name),At(n,et,y.version),At(n,X,nt),i=n,r={visitorId:e.visitorId,anonymousId:e.anonymousId,trigger_hit:!1,context:e.context,visitor_consent:e.hasConsented},o="".concat(this.config.decisionApiUrl||I).concat(this.config.envId).concat("/campaigns","?").concat("exposeAllKeys","=true&extras[]=accountSettings"),s=Date.now(),t.prev=4,t.next=7,this._httpClient.postAsync(o,{headers:i,timeout:this.config.timeout,body:r,nextFetchConfig:this.config.nextFetchConfig});case 7:return g=t.sent,this.panic=!(null==g||null==(a=g.body)||!a.panic),p=null,null!=g&&null!=(c=g.body)&&c.campaigns&&(p=g.body.campaigns),(d=null==g||null==(f=g.body)||null==(l=f.extras)||null==(h=l.accountSettings)?void 0:h.troubleshooting)&&(this.troubleshooting={startDate:new Date(d.startDate),endDate:new Date(d.endDate),timezone:d.timezone,traffic:d.traffic}),t.abrupt("return",p);case 16:return t.prev=16,t.t0=t.catch(4),v=new le({label:re.GET_CAMPAIGNS_ROUTE_RESPONSE_ERROR,logLevel:Nt.ERROR,visitorId:e.visitorId,anonymousId:e.anonymousId,visitorSessionId:e.instanceId,traffic:100,config:this.config,visitorContext:e.context,httpRequestBody:r,httpRequestHeaders:i,httpRequestMethod:"POST",httpRequestUrl:o,httpResponseBody:null==t.t0?void 0:t.t0.message,httpResponseHeaders:null==t.t0?void 0:t.t0.headers,httpResponseCode:null==t.t0?void 0:t.t0.statusCode,httpResponseTime:Date.now()-s}),t.next=21,this.trackingManager.addTroubleshootingHit(v);case 21:throw m=Qt(t.t0.message||t.t0,{url:o,headers:i,body:r,duration:Date.now()-s}),new Error(m);case 23:case"end":return t.stop()}}),t,this,[[4,16]])}))),function(t){return n.apply(this,arguments)})}]),t}();var ge=function(t){l(s,t);var n,i,r,o=(i=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(i);if(r){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return g(this,t)});function s(){return o.apply(this,arguments)}return a(s,[{key:"getCampaignsAsync",value:(n=e(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getDecisionApiCampaignsAsync(e));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})}]),s}(he);function pe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function de(t,e){if(t){if("string"==typeof t)return pe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pe(t,e):void 0}}function ve(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],c=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);c=!0);}catch(t){u=!0,r=t}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw r}}return a}}(t,e)||de(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n(9720);var ye=function(t){return t.PAGE_VIEW="PAGEVIEW",t.PAGE="PAGEVIEW",t.SCREEN_VIEW="SCREENVIEW",t.SCREEN="SCREENVIEW",t.TRANSACTION="TRANSACTION",t.ITEM="ITEM",t.EVENT="EVENT",t}({});function me(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ie(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?me(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n(6699),n(2023),n(2479);var ke=function(t){return t.ACTION_TRACKING="Action Tracking",t.USER_ENGAGEMENT="User Engagement",t}({}),be=function(t){l(r,t);var e,n,i=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=p(e);if(n){var r=p(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return g(this,t)});function r(t){var e;e=i.call(this,{type:ye.EVENT,userIp:t.userIp,screenResolution:t.screenResolution,locale:t.locale,sessionNumber:t.sessionNumber,visitorId:t.visitorId,anonymousId:t.anonymousId,qaMode:t.qaMode});var n=t.category,r=t.action,o=t.label,s=t.value;return e.category=n,e.action=r,o&&(e.label=o),s&&(e.value=s),e}return a(r,[{key:"category",get:function(){return this._category},set:function(t){Object.values(ke).includes(t)?this._category=t:Ft(this.config,"The category value must be either EventCategory::ACTION_TRACKING or EventCategory::ACTION_TRACKING","category")}},{key:"action",get:function(){return this._action},set:function(t){this.isNotEmptyString(t,"action")&&(this._action=t)}},{key:"label",get:function(){return this._label},set:function(t){this.isNotEmptyString(t,"label")&&(this._label=t)}},{key:"value",get:function(){return this._value},set:function(t){!Number.isInteger(t)||t<0?Ft(this.config,"value must be an integer and be >= 0","value"):this._value=t}},{key:"toApiKeys",value:function(){var e=t.prototype.toApiKeys.call(this);return e.ec=this.category,e.ea=this.action,this.label&&(e.el=this.label),this.value&&(e.ev=this.value),e}},{key:"toObject",value:function(){return Ie(Ie({},t.prototype.toObject.call(this)),{},{category:this.category,action:this.action,label:this.label,value:this.value})}},{key:"isReady",value:function(){return!((!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&!t.prototype.isReady.call(this)||!this.category||!this.action)}},{key:"getErrorMessage",value:function(){return"event category and event action are required"}}]),r}(se);function _e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ce(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_e(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n(3689);var Oe=function(t){l(r,t);var e,n,i=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=p(e);if(n){var r=p(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return g(this,t)});function r(t){var e;e=i.call(this,{type:ye.ITEM,userIp:t.userIp,screenResolution:t.screenResolution,locale:t.locale,sessionNumber:t.sessionNumber,visitorId:t.visitorId,anonymousId:t.anonymousId,qaMode:t.qaMode});var n=t.transactionId,r=t.productName,o=t.productSku,s=t.itemCategory,a=t.itemPrice,c=t.itemQuantity;return e.transactionId=n,e.productName=r,e.productSku=o,s&&(e.itemCategory=s),a&&(e.itemPrice=a),c&&(e.itemQuantity=c),e}return a(r,[{key:"transactionId",get:function(){return this._transactionId},set:function(t){this.isNotEmptyString(t,"transactionId")&&(this._transactionId=t)}},{key:"productName",get:function(){return this._productName},set:function(t){this.isNotEmptyString(t,"productName")&&(this._productName=t)}},{key:"productSku",get:function(){return this._productSku},set:function(t){this.isNotEmptyString(t,"productSku")&&(this._productSku=t)}},{key:"itemPrice",get:function(){return this._itemPrice},set:function(t){this.isNumeric(t,"itemPrice")&&(this._itemPrice=t)}},{key:"itemQuantity",get:function(){return this._itemQuantity},set:function(t){this.isInteger(t,"itemQuantity")&&(this._itemQuantity=Math.trunc(t))}},{key:"itemCategory",get:function(){return this._itemCategory},set:function(t){this.isNotEmptyString(t,"itemCategory")&&(this._itemCategory=t)}},{key:"isReady",value:function(){return!((!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&!t.prototype.isReady.call(this)||!this.transactionId||!this.productName||!this.productSku)}},{key:"toApiKeys",value:function(){var e=t.prototype.toApiKeys.call(this);return e.tid=this.transactionId,e.in=this.productName,e.ic=this.productSku,this.itemPrice&&(e.ip=this.itemPrice),this.itemQuantity&&(e.iq=this.itemQuantity),this.itemCategory&&(e.iv=this.itemCategory),e}},{key:"toObject",value:function(){return Ce(Ce({},t.prototype.toObject.call(this)),{},{transactionId:this.transactionId,productName:this.productName,productSku:this.productSku,itemPrice:this.itemPrice,itemQuantity:this.itemQuantity,itemCategory:this.itemCategory})}},{key:"getErrorMessage",value:function(){return"Transaction Id, Item name and item code are required"}}]),r}(se);function Te(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function xe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Te(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ee=function(t){l(r,t);var e,n,i=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=p(e);if(n){var r=p(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return g(this,t)});function r(t){var e;return(e=i.call(this,{type:ye.PAGE_VIEW,userIp:t.userIp,screenResolution:t.screenResolution,locale:t.locale,sessionNumber:t.sessionNumber,visitorId:t.visitorId,anonymousId:t.anonymousId,qaMode:t.qaMode})).documentLocation=t.documentLocation,e}return a(r,[{key:"documentLocation",get:function(){return this._documentLocation},set:function(t){this.isNotEmptyString(t,"documentLocation")&&(this._documentLocation=t)}},{key:"isReady",value:function(){return!((!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&!t.prototype.isReady.call(this)||!this.documentLocation)}},{key:"toApiKeys",value:function(){var e=t.prototype.toApiKeys.call(this);return e.dl=this.documentLocation,e}},{key:"toObject",value:function(){return xe(xe({},t.prototype.toObject.call(this)),{},{documentLocation:this.documentLocation})}},{key:"getErrorMessage",value:function(){return"documentLocation url is required"}}]),r}(se);function Se(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function we(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Se(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Re=function(t){l(r,t);var e,n,i=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=p(e);if(n){var r=p(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return g(this,t)});function r(t){var e;return(e=i.call(this,{type:ye.SCREEN_VIEW,userIp:t.userIp,screenResolution:t.screenResolution,locale:t.locale,sessionNumber:t.sessionNumber,visitorId:t.visitorId,anonymousId:t.anonymousId,qaMode:t.qaMode})).documentLocation=t.documentLocation,e}return a(r,[{key:"documentLocation",get:function(){return this._documentLocation},set:function(t){this.isNotEmptyString(t,"documentLocation")&&(this._documentLocation=t)}},{key:"isReady",value:function(){return!((!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&!t.prototype.isReady.call(this)||!this.documentLocation)}},{key:"toApiKeys",value:function(){var e=t.prototype.toApiKeys.call(this);return e.dl=this.documentLocation,e}},{key:"toObject",value:function(){return we(we({},t.prototype.toObject.call(this)),{},{documentLocation:this.documentLocation})}},{key:"getErrorMessage",value:function(){return"Screen name is required"}}]),r}(se);function Ae(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ae(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var De=function(t){l(r,t);var e,n,i=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=p(e);if(n){var r=p(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return g(this,t)});function r(t){var e;e=i.call(this,{type:ye.TRANSACTION,userIp:t.userIp,screenResolution:t.screenResolution,locale:t.locale,sessionNumber:t.sessionNumber,visitorId:t.visitorId,anonymousId:t.anonymousId,qaMode:t.qaMode});var n=t.transactionId,r=t.affiliation,o=t.taxes,s=t.currency,a=t.couponCode,c=t.itemCount,u=t.shippingMethod,f=t.paymentMethod,l=t.totalRevenue,h=t.shippingCosts;return e.transactionId=n,e.affiliation=r,o&&(e.taxes=o),s&&(e.currency=s),a&&(e.couponCode=a),c&&(e.itemCount=c),u&&(e.shippingMethod=u),f&&(e.paymentMethod=f),l&&(e.totalRevenue=l),h&&(e.shippingCosts=h),e}return a(r,[{key:"transactionId",get:function(){return this._transactionId},set:function(t){this.isNotEmptyString(t,"transactionId")&&(this._transactionId=t)}},{key:"affiliation",get:function(){return this._affiliation},set:function(t){this.isNotEmptyString(t,"affiliation")&&(this._affiliation=t)}},{key:"taxes",get:function(){return this._taxes},set:function(t){this.isNumeric(t,"taxes")&&(this._taxes=t)}},{key:"currency",get:function(){return this._currency},set:function(t){t&&"string"==typeof t&&3===t.length?this._currency=t:Ft(this.config,Pt("{0} must be a string and have exactly 3 letters","currency"),"currency")}},{key:"couponCode",get:function(){return this._couponCode},set:function(t){this.isNotEmptyString(t,"couponCode")&&(this._couponCode=t)}},{key:"itemCount",get:function(){return this._itemCount},set:function(t){this.isInteger(t,"itemCount")&&(this._itemCount=Math.trunc(t))}},{key:"shippingMethod",get:function(){return this._shippingMethod},set:function(t){this.isNotEmptyString(t,"shippingMethod")&&(this._shippingMethod=t)}},{key:"paymentMethod",get:function(){return this._paymentMethod},set:function(t){this.isNotEmptyString(t,"paymentMethod")&&(this._paymentMethod=t)}},{key:"totalRevenue",get:function(){return this._totalRevenue},set:function(t){this.isNumeric(t,"totalRevenue")&&(this._totalRevenue=t)}},{key:"shippingCosts",get:function(){return this._shippingCosts},set:function(t){this.isNumeric(t,"shippingCosts")&&(this._shippingCosts=t)}},{key:"isReady",value:function(){return!((!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&!t.prototype.isReady.call(this)||!this.transactionId||!this.affiliation)}},{key:"toApiKeys",value:function(){var e=t.prototype.toApiKeys.call(this);return e.tid=this.transactionId,e.ta=this.affiliation,this.taxes&&(e.tt=this.taxes),this.currency&&(e.tc=this.currency),this.couponCode&&(e.tcc=this.couponCode),this.itemCount&&(e.icn=this.itemCount),this.shippingMethod&&(e.sm=this.shippingMethod),this.paymentMethod&&(e.pm=this.paymentMethod),this.totalRevenue&&(e.tr=this.totalRevenue),this.shippingCosts&&(e.ts=this.shippingCosts),e}},{key:"toObject",value:function(){return Ne(Ne({},t.prototype.toObject.call(this)),{},{transactionId:this.transactionId,affiliation:this.affiliation,taxes:this.taxes,currency:this.currency,couponCode:this.couponCode,itemCount:this.itemCount,shippingMethod:this.shippingMethod,paymentMethod:this.paymentMethod,totalRevenue:this.totalRevenue,shippingCosts:this.shippingCosts})}},{key:"getErrorMessage",value:function(){return"Transaction Id and Transaction affiliation are required"}}]),r}(se);function Pe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Me(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pe(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Fe=function(t){l(r,t);var e,n,i=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=p(e);if(n){var r=p(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return g(this,t)});function r(t){var e;return(e=i.call(this,{type:"SEGMENT",userIp:t.userIp,screenResolution:t.screenResolution,locale:t.locale,sessionNumber:t.sessionNumber,visitorId:t.visitorId,anonymousId:t.anonymousId,qaMode:t.qaMode})).context=t.context,e}return a(r,[{key:"context",get:function(){return this._context},set:function(t){this._context=t}},{key:"isReady",value:function(){return!((!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&!t.prototype.isReady.call(this)||!this.context)}},{key:"toApiKeys",value:function(){var e=t.prototype.toApiKeys.call(this);return e.s=this.context,e}},{key:"toObject",value:function(){return Me(Me({},t.prototype.toObject.call(this)),{},{context:this.context})}},{key:"getErrorMessage",value:function(){return"data property is required"}}]),r}(se),je=(n(1249),function(){function t(t,e){this._config=e,this._hits=t}return a(t,[{key:"hits",get:function(){return this._hits}},{key:"config",get:function(){return this._config}},{key:"toApiKeys",value:function(){var t,e;return At(e={},Q,"".concat(null==(t=this.config)?void 0:t.envId)),At(e,"batch",this.hits.map((function(t){var e=t.toApiKeys();return delete e[Q],e}))),e}}]),t}());function He(t){return function(t){if(Array.isArray(t))return pe(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||de(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ve(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Le(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n(1817),n(2165);var Ue=function(t){l(r,t);var e,n,i=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=p(e);if(n){var r=p(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return g(this,t)});function r(t){var e;return(e=i.call(this,Ve(Ve({},t),{},{visitorId:"",anonymousId:"",type:"BATCH"}))).hits=t.hits,e}return a(r,[{key:"hits",get:function(){return this._hits},set:function(t){this._hits=t}},{key:"isReady",value:function(){return!!(t.prototype.isReady.call(this)&&this.hits&&this.hits.length>0&&this.hits.every((function(t){return t.isReady(!1)})))}},{key:"toApiKeys",value:function(){var t,e,n=(At(e={},W,this.ds),At(e,Q,"".concat(null==(t=this.config)?void 0:t.envId)),At(e,"t",this.type),At(e,Y,Date.now()-this.createdAt),e);return n.h=this.hits.map((function(t){var e=t.toApiKeys();return delete e[W],delete e[Q],e})),n}},{key:"getErrorMessage",value:function(){return"Please check required fields"}}]),r}(se),Be=function(t){return t.QaAssistantClose="ABTASTY_QA_ASSISTANT_CLOSE",t.FsApplyForcedVariations="FS_APPLY_FORCED_VARIATIONS",t.FsResetForcedVariations="FS_RESET_FORCED_VARIATIONS",t.FsQaAssistantReady="FS_QA_ASSISTANT_READY",t.MinimizeQaAssistantClose="ABTASTY_QA_MINIMIZE_QA_ASSISTANT_CLOSE",t.FsTriggerRender="FS_TRIGGER_RENDER",t}({}),Ge=function(t){return t.FsUpdateVisitorAllocatedVariation="FS_UPDATE_VISITOR_ALLOCATED_VARIATION",t.FsVisitorExposedVariation="FS_VISITOR_EXPOSED_VARIATION",t.FsHIT="FS_HIT",t}({}),qe=function(t){return t.FsTriggerRendering="FS_TRIGGER_RENDERING",t}({});function Ke(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Qe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ke(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ze(t){var e,n;null!=(e=window)&&null!=(n=e.frames)&&n.ABTastyQaAssistant&&Gt()&&window.frames.ABTastyQaAssistant.postMessage(t,"*")}function Je(t){Gt()&&(window.flagship=Qe(Qe({},window.flagship),{},{visitorVariations:t}),ze({name:Ge.FsUpdateVisitorAllocatedVariation,value:t}))}function We(t){ze({name:Ge.FsVisitorExposedVariation,value:t})}function Ye(t){ze({name:Ge.FsHIT,value:t.map((function(t){return Qe(Qe({},t),{},{timestamp:Date.now()-t.qt})}))})}function $e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ze(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$e(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Xe(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return tn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tn(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function tn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var en=function(){function t(t){var e=t.config,n=t.hitsPoolQueue,i=t.httpClient,r=t.activatePoolQueue,o=t.troubleshootingQueue,s=t.flagshipInstanceId,a=t.analyticHitQueue;this._HitsToFsQa=[],this._config=e,this._hitsPoolQueue=n,this._httpClient=i,this._activatePoolQueue=r,this._troubleshootingQueue=o,this._flagshipInstanceId=s,this._usageHitQueue=a,this._isUsageHitQueueSending=!1,this._isTroubleshootingQueueSending=!1}var n,i,r,o,s,c,f,l,h,g,p,d,v,I;return a(t,[{key:"flagshipInstanceId",get:function(){return this._flagshipInstanceId}},{key:"troubleshootingData",get:function(){return this._troubleshootingData},set:function(t){this._troubleshootingData=t}},{key:"config",get:function(){return this._config}},{key:"sendHitsToFsQa",value:function(t){var e,n=this;Gt()&&this.config.isQAModeEnabled&&((e=this._HitsToFsQa).push.apply(e,He(t)),this._HitsToFsQa.length>=10&&(Ye(this._HitsToFsQa.map((function(t){return t.toApiKeys()}))),this._HitsToFsQa=[]),this._sendFsHitToQATimeoutId&&clearTimeout(this._sendFsHitToQATimeoutId),this._HitsToFsQa.length&&(this._sendFsHitToQATimeoutId=setTimeout((function(){Ye(n._HitsToFsQa.map((function(t){return t.toApiKeys()}))),n._HitsToFsQa=[]}),3e3)))}},{key:"addHit",value:(I=e(u().mark((function t(e){var n,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="".concat(e.visitorId,":").concat(Kt()),e.key=i,t.next=4,this.addHitInPoolQueue(e);case 4:if(e.type!==ye.EVENT||e.action!==w||e.label!=="".concat(y.name,":false")){t.next=7;break}return t.next=7,this.notConsent(e.visitorId);case 7:Ut(this.config,Ct,"The HIT has been added into the pool queue : {0}",e.toApiKeys()),null!=(n=this.config.trackingManagerConfig)&&n.poolMaxSize&&this._hitsPoolQueue.size>=this.config.trackingManagerConfig.poolMaxSize&&this.config.decisionMode!==Rt.BUCKETING_EDGE&&this.sendBatch();case 9:case"end":return t.stop()}}),t,this)}))),function(t){return I.apply(this,arguments)})},{key:"activateFlag",value:(v=e(u().mark((function t(e){var n,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="".concat(e.visitorId,":").concat(Kt()),e.key=n,this.config.decisionMode!==Rt.BUCKETING_EDGE){t.next=7;break}return t.next=5,this.activateFlagEdgeMode(e);case 5:return Bt(this.config,Pt("The ACTIVATE has been added to the pool queue : {0}",JSON.stringify(e.toApiKeys())),"ADD ACTIVATE"),t.abrupt("return");case 7:return i=[],this._activatePoolQueue.size&&(i=Array.from(this._activatePoolQueue.values())),this._activatePoolQueue.clear(),t.next=12,this.sendActivate({activateHitsPool:i,currentActivate:e,batchTriggeredBy:ae.ActivateLength});case 12:case"end":return t.stop()}}),t,this)}))),function(t){return v.apply(this,arguments)})},{key:"activateFlagEdgeMode",value:(d=e(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._activatePoolQueue.set(e.key,e),t.next=3,this.cacheHit(new Map([[e.key,e]]));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"onVisitorExposed",value:function(t){var e=this.config.onVisitorExposed;if("function"==typeof e){var n={key:t.flagKey,value:t.flagValue,defaultValue:t.flagDefaultValue,metadata:t.flagMetadata};e({exposedVisitor:{id:t.visitorId,anonymousId:t.anonymousId,context:t.visitorContext},fromFlag:n})}}},{key:"sendBatch",value:(p=e(u().mark((function t(){var e,n,i,r,o,s,a,c,f,l,h,g,p,d=this,v=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=v.length>0&&void 0!==v[0]?v[0]:ae.BatchLength,!this._activatePoolQueue.size){t.next=6;break}return n=Array.from(this._activatePoolQueue.values()),this._activatePoolQueue.clear(),t.next=6,this.sendActivate({activateHitsPool:n,batchTriggeredBy:e});case 6:(i=new Ue({hits:[],ds:$})).config=this.config,r=[],o=Xe(this._hitsPoolQueue),t.prev=10,o.s();case 12:if((s=o.n()).done){t.next=24;break}if(a=ve(s.value,2),c=a[0],f=a[1],!(Date.now()-f.createdAt>=D)){t.next=17;break}return r.push(c),t.abrupt("continue",22);case 17:if(!(JSON.stringify(i).length>m)){t.next=20;break}return t.abrupt("break",24);case 20:i.hits.push(f),r.push(c);case 22:t.next=12;break;case 24:t.next=29;break;case 26:t.prev=26,t.t0=t.catch(10),o.e(t.t0);case 29:return t.prev=29,o.f(),t.finish(29);case 32:if(r.forEach((function(t){d._hitsPoolQueue.delete(t)})),i.hits.length){t.next=35;break}return t.abrupt("return");case 35:return l=At({},X,nt),h=i.toApiKeys(),g=Date.now(),t.prev=38,t.next=41,this._httpClient.postAsync(k,{headers:l,body:h,timeout:this.config.timeout,nextFetchConfig:this.config.nextFetchConfig});case 41:return Ut(this.config,Ct,Tt,Et,{url:k,body:h,headers:l,nextFetchConfig:this.config.nextFetchConfig,duration:Date.now()-g,batchTriggeredBy:ae[e]}),t.next=44,this.flushHits(r);case 44:this.sendHitsToFsQa(i.hits),t.next=54;break;case 47:return t.prev=47,t.t1=t.catch(38),i.hits.forEach((function(t){d._hitsPoolQueue.set(t.key,t)})),Mt(this.config,Ct,Ot,Et,{httpRequestBody:h,httpRequestHeaders:l,httpRequestMethod:"POST",httpRequestUrl:k,httpResponseBody:null==t.t1?void 0:t.t1.message,httpResponseHeaders:null==t.t1?void 0:t.t1.headers,httpResponseCode:null==t.t1?void 0:t.t1.statusCode,duration:Date.now()-g,batchTriggeredBy:ae[e]}),p=new le({label:re.SEND_BATCH_HIT_ROUTE_RESPONSE_ERROR,logLevel:Nt.ERROR,visitorId:"".concat(this._flagshipInstanceId),flagshipInstanceId:this._flagshipInstanceId,traffic:0,config:this.config,httpRequestBody:i.hits,httpRequestHeaders:l,httpResponseBody:null==t.t1?void 0:t.t1.message,httpResponseHeaders:null==t.t1?void 0:t.t1.headers,httpResponseMethod:"POST",httpResponseUrl:k,httpResponseCode:null==t.t1?void 0:t.t1.statusCode,httpResponseTime:Date.now()-g,batchTriggeredBy:e}),t.next=54,this.sendTroubleshootingHit(p);case 54:case"end":return t.stop()}}),t,this,[[10,26,29,32],[38,47]])}))),function(){return p.apply(this,arguments)})},{key:"notConsent",value:(g=e(u().mark((function t(e){var n,i,r,o=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Array.from(this._hitsPoolQueue).filter((function(t){var n=ve(t,2),i=(n[0],n[1]);return!((null==i?void 0:i.type)===ye.EVENT&&(null==i?void 0:i.action)===w||i.visitorId!==e&&i.anonymousId!==e)})),i=Array.from(this._activatePoolQueue).filter((function(t){var n=ve(t,2),i=(n[0],n[1]);return i.visitorId===e||i.anonymousId===e})),r=[],n.forEach((function(t){var e=ve(t,1)[0];o._hitsPoolQueue.delete(e),r.push(e)})),i.forEach((function(t){var e=ve(t,1)[0];o._activatePoolQueue.delete(e),r.push(e)})),r.length){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,this.flushHits(r);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return g.apply(this,arguments)})},{key:"cacheHit",value:(h=e(u().mark((function t(e){var n,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=this.config.hitCacheImplementation,!this.config.disableCache&&n&&"function"==typeof n.cacheHit){t.next=4;break}return t.abrupt("return");case 4:return i={},e.forEach((function(t,e){var n={version:1,data:{visitorId:t.visitorId,anonymousId:t.anonymousId,type:t.type,content:t.toObject(),time:Date.now()}};i[e]=n})),t.next=8,n.cacheHit(i);case 8:Ut(this.config,"CACHE HIT","Hit cache has been saved into database : {0}",i),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),Mt(this.config,kt,_t,"cacheHit",t.t0.message||t.t0);case 14:case"end":return t.stop()}}),t,this,[[0,11]])}))),function(t){return h.apply(this,arguments)})},{key:"flushHits",value:(l=e(u().mark((function t(e){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=this.config.hitCacheImplementation,!this.config.disableCache&&n&&"function"==typeof n.flushHits){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,n.flushHits(e);case 6:Ut(this.config,kt,"The following hit keys have been flushed from database : {0}",e),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),Mt(this.config,kt,_t,"flushHits",t.t0.message||t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])}))),function(t){return l.apply(this,arguments)})},{key:"flushAllHits",value:(f=e(u().mark((function t(){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e=this.config.hitCacheImplementation,!this.config.disableCache&&e&&"function"==typeof e.flushAllHits){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.flushAllHits();case 6:Bt(this.config,"All hits cache has been flushed from database","FLUSH HIT"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),Mt(this.config,kt,_t,"flushAllHits",t.t0.message||t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])}))),function(){return f.apply(this,arguments)})},{key:"isTroubleshootingActivated",value:function(){if(!this.troubleshootingData)return!1;var t=new Date;return t>=this.troubleshootingData.startDate&&!(t>this.troubleshootingData.endDate)}},{key:"addTroubleshootingHit",value:(c=e(u().mark((function t(e){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.key||(n="".concat(e.visitorId,":").concat(Kt()),e.key=n),this._troubleshootingQueue.set(e.key,e),Bt(this.config,Pt("The TROUBLESHOOTING HIT has been added to the pool queue : {0}",JSON.stringify(e.toApiKeys())),"ADD TROUBLESHOOTING HIT");case 3:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"sendTroubleshootingHit",value:(s=e(u().mark((function t(e){var n,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isTroubleshootingActivated()&&void 0!==e.traffic&&!(this.troubleshootingData.traffic<e.traffic)){t.next=2;break}return t.abrupt("return");case 2:return n=e.toApiKeys(),i=Date.now(),t.prev=4,t.next=7,this._httpClient.postAsync(b,{body:n});case 7:if(Bt(this.config,Pt("Troubleshooting hit has been sent : {0}",JSON.stringify(Ze(Ze({},n),{},{duration:Date.now()-i}))),"SEND TROUBLESHOOTING"),!e.key){t.next=12;break}return this._troubleshootingQueue.delete(e.key),t.next=12,this.flushHits([e.key]);case 12:t.next=20;break;case 14:if(t.prev=14,t.t0=t.catch(4),!this.isTroubleshootingActivated()){t.next=19;break}return t.next=19,this.addTroubleshootingHit(e);case 19:Ft(this.config,Qt(t.t0.message||t.t0,{url:b,headers:{},body:n,duration:Date.now()-i}),L);case 20:case"end":return t.stop()}}),t,this,[[4,14]])}))),function(t){return s.apply(this,arguments)})},{key:"sendTroubleshootingQueue",value:(o=e(u().mark((function t(){var e,n,i,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isTroubleshootingActivated()&&!this._isTroubleshootingQueueSending&&0!==this._troubleshootingQueue.size){t.next=2;break}return t.abrupt("return");case 2:this._isTroubleshootingQueueSending=!0,e=0,n=Array.from(this._troubleshootingQueue);case 4:if(!(e<n.length)){t.next=11;break}return(i=ve(n[e],2))[0],r=i[1],t.next=8,this.sendTroubleshootingHit(r);case 8:e++,t.next=4;break;case 11:this._isTroubleshootingQueueSending=!1;case 12:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"addUsageHit",value:(r=e(u().mark((function t(e){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.key||(n="".concat(e.visitorId,":").concat(Kt()),e.key=n),this._usageHitQueue.set(e.key,e),Bt(this.config,Pt("The USAGE HIT has been added to the pool queue : {0}",JSON.stringify(e.toApiKeys())),"ADD USAGE HIT");case 3:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"sendUsageHit",value:(i=e(u().mark((function t(e){var n,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.toApiKeys(),i=Date.now(),t.prev=2,t.next=5,this._httpClient.postAsync(_,{body:n});case 5:if(Bt(this.config,Pt("Usage hit has been sent : {0}",JSON.stringify(Ze(Ze({},n),{},{duration:Date.now()-i}))),"SEND USAGE HIT"),!e.key){t.next=10;break}return this._usageHitQueue.delete(e.key),t.next=10,this.flushHits([e.key]);case 10:t.next=17;break;case 12:return t.prev=12,t.t0=t.catch(2),t.next=16,this.addUsageHit(e);case 16:Ft(this.config,Qt(t.t0.message||t.t0,{url:_,headers:{},body:n,duration:Date.now()-i}),L);case 17:case"end":return t.stop()}}),t,this,[[2,12]])}))),function(t){return i.apply(this,arguments)})},{key:"sendUsageHitQueue",value:(n=e(u().mark((function t(){var e,n,i,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._isUsageHitQueueSending&&0!==this._usageHitQueue.size){t.next=2;break}return t.abrupt("return");case 2:this._isUsageHitQueueSending=!0,e=0,n=Array.from(this._usageHitQueue);case 4:if(!(e<n.length)){t.next=11;break}return(i=ve(n[e],2))[0],r=i[1],t.next=8,this.sendUsageHit(r);case 8:e++,t.next=4;break;case 11:this._isUsageHitQueueSending=!1;case 12:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),t}();var nn=function(t){l(c,t);var n,i,r,o,s=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(r);if(o){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return g(this,t)});function c(){return s.apply(this,arguments)}return a(c,[{key:"addHitInPoolQueue",value:(i=e(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._hitsPoolQueue.set(e.key,e),t.next=3,this.cacheHit(new Map([[e.key,e]]));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"sendActivate",value:(n=e(u().mark((function t(e){var n,i,r,o,s,a,c,f,l,h,g,p=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.activateHitsPool,r=e.currentActivate,o=e.batchTriggeredBy,At(n={},Z,this.config.apiKey),At(n,tt,y.name),At(n,et,y.version),At(n,X,nt),s=n,a=new je(Array.from(i.filter((function(t){return Date.now()-t.createdAt<D}))),this.config),r&&a.hits.push(r),c=a.toApiKeys(),f=I+C,l=Date.now(),t.prev=7,t.next=10,this._httpClient.postAsync(f,{headers:s,body:c,timeout:this.config.timeout,nextFetchConfig:this.config.nextFetchConfig});case 10:if(Ut(this.config,Ct,Tt,xt,{httpRequestBody:c,httpRequestHeaders:s,httpRequestMethod:"POST",httpRequestUrl:f,duration:Date.now()-l,batchTriggeredBy:ae[o]}),h=i.map((function(t){return t.key})),a.hits.forEach((function(t){p.onVisitorExposed(t)})),!h.length){t.next=16;break}return t.next=16,this.flushHits(h);case 16:this.sendHitsToFsQa(a.hits),t.next=29;break;case 19:if(t.prev=19,t.t0=t.catch(7),a.hits.forEach((function(t){p._activatePoolQueue.set(t.key,t)})),!r){t.next=25;break}return t.next=25,this.cacheHit(new Map([[r.key,r]]));case 25:return Mt(this.config,Ct,Ot,xt,{httpRequestBody:c,httpRequestHeaders:s,httpRequestMethod:"POST",httpRequestUrl:f,httpResponseBody:null==t.t0?void 0:t.t0.message,httpResponseHeaders:null==t.t0?void 0:t.t0.headers,httpResponseCode:null==t.t0?void 0:t.t0.statusCode,duration:Date.now()-l,batchTriggeredBy:ae[o]}),g=new le({label:re.SEND_ACTIVATE_HIT_ROUTE_ERROR,logLevel:Nt.ERROR,visitorId:"".concat(this._flagshipInstanceId),traffic:0,config:this.config,httpRequestBody:c,httpRequestHeaders:s,httpRequestMethod:"POST",httpRequestUrl:f,httpResponseBody:null==t.t0?void 0:t.t0.message,httpResponseHeaders:null==t.t0?void 0:t.t0.headers,httpResponseCode:null==t.t0?void 0:t.t0.statusCode,httpResponseTime:Date.now()-l,batchTriggeredBy:o}),t.next=29,this.sendTroubleshootingHit(g);case 29:case"end":return t.stop()}}),t,this,[[7,19]])}))),function(t){return n.apply(this,arguments)})}]),c}(en);function rn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return on(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?on(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function on(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var sn=function(t){l(f,t);var n,i,r,o,s,c=(o=f,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(o);if(s){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return g(this,t)});function f(){return c.apply(this,arguments)}return a(f,[{key:"addHitInPoolQueue",value:(r=e(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._hitsPoolQueue.set(e.key,e);case 1:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"sendActivate",value:(i=e(u().mark((function t(e){var n,i,r,o,s,a,c,f,l,h,g=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.activateHitsPool,r=e.currentActivate,o=e.batchTriggeredBy,At(n={},Z,this.config.apiKey),At(n,tt,y.name),At(n,et,y.version),At(n,X,nt),s=n,a=new je(Array.from(i.filter((function(t){return Date.now()-t.createdAt<D}))),this.config),r&&a.hits.push(r),c=a.toApiKeys(),f=I+C,l=Date.now(),t.prev=7,t.next=10,this._httpClient.postAsync(f,{headers:s,body:c,timeout:this.config.timeout,nextFetchConfig:this.config.nextFetchConfig});case 10:Ut(this.config,Ct,Tt,xt,{httpRequestBody:c,httpRequestHeaders:s,httpRequestMethod:"POST",httpRequestUrl:f,duration:Date.now()-l,batchTriggeredBy:ae[o]}),a.hits.forEach((function(t){g.onVisitorExposed(t)})),this.sendHitsToFsQa(a.hits),t.next=22;break;case 15:return t.prev=15,t.t0=t.catch(7),a.hits.forEach((function(t){g._activatePoolQueue.set(t.key,t)})),Mt(this.config,Ct,Ot,xt,{httpRequestBody:c,httpRequestHeaders:s,httpRequestMethod:"POST",httpRequestUrl:f,httpResponseBody:null==t.t0?void 0:t.t0.message,httpResponseHeaders:null==t.t0?void 0:t.t0.headers,httpResponseCode:null==t.t0?void 0:t.t0.statusCode,duration:Date.now()-l,batchTriggeredBy:ae[o]}),h=new le({label:re.SEND_ACTIVATE_HIT_ROUTE_ERROR,logLevel:Nt.ERROR,visitorId:"".concat(this._flagshipInstanceId),traffic:0,config:this.config,httpRequestBody:c,httpRequestHeaders:s,httpRequestMethod:"POST",httpRequestUrl:f,httpResponseBody:null==t.t0?void 0:t.t0.message,httpResponseHeaders:null==t.t0?void 0:t.t0.headers,httpResponseCode:null==t.t0?void 0:t.t0.statusCode,httpResponseTime:Date.now()-l,batchTriggeredBy:o}),t.next=22,this.sendTroubleshootingHit(h);case 22:case"end":return t.stop()}}),t,this,[[7,15]])}))),function(t){return i.apply(this,arguments)})},{key:"sendBatch",value:(n=e(u().mark((function t(){var e,n,i,r,o,s,a,c,f,l,h,g,p,d,v,y=this,I=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=I.length>0&&void 0!==I[0]?I[0]:ae.BatchLength,n=!1,!this._activatePoolQueue.size){t.next=8;break}return i=Array.from(this._activatePoolQueue.values()),this._activatePoolQueue.clear(),t.next=7,this.sendActivate({activateHitsPool:i,batchTriggeredBy:e});case 7:n=!0;case 8:r=At({},X,nt),(o=new Ue({hits:[]})).config=this.config,s=[],a=rn(this._hitsPoolQueue),t.prev=14,a.s();case 16:if((c=a.n()).done){t.next=28;break}if(f=ve(c.value,2),l=f[0],h=f[1],!(Date.now()-h.createdAt>=D)){t.next=21;break}return s.push(l),t.abrupt("continue",26);case 21:if(!(JSON.stringify(o).length>m)){t.next=24;break}return t.abrupt("break",28);case 24:o.hits.push(h),s.push(l);case 26:t.next=16;break;case 28:t.next=33;break;case 30:t.prev=30,t.t0=t.catch(14),a.e(t.t0);case 33:return t.prev=33,a.f(),t.finish(33);case 36:if(s.forEach((function(t){y._hitsPoolQueue.delete(t)})),o.hits.length){t.next=42;break}if(!n){t.next=41;break}return t.next=41,this.cacheHit(this._activatePoolQueue);case 41:return t.abrupt("return");case 42:return g=o.toApiKeys(),p=Date.now(),t.prev=44,t.next=47,this._httpClient.postAsync(k,{headers:r,body:g,timeout:this.config.timeout,nextFetchConfig:this.config.nextFetchConfig});case 47:Ut(this.config,Ct,Tt,Et,{httpRequestBody:g,httpRequestHeaders:r,httpRequestMethod:"POST",httpRequestUrl:k,duration:Date.now()-p,batchTriggeredBy:ae[e]}),this.sendHitsToFsQa(o.hits),t.next=57;break;case 51:t.prev=51,t.t1=t.catch(44),o.hits.forEach((function(t){y._hitsPoolQueue.set(t.key,t)})),Mt(this.config,Ct,Ot,Et,{httpRequestBody:g,httpRequestHeaders:r,httpRequestMethod:"POST",httpRequestUrl:k,httpResponseBody:null==t.t1?void 0:t.t1.message,httpResponseHeaders:null==t.t1?void 0:t.t1.headers,httpResponseCode:null==t.t1?void 0:t.t1.statusCode,duration:Date.now()-p,batchTriggeredBy:ae[e]}),d=new le({label:re.SEND_BATCH_HIT_ROUTE_RESPONSE_ERROR,logLevel:Nt.ERROR,visitorId:"".concat(this._flagshipInstanceId),traffic:0,config:this.config,httpRequestBody:g,httpRequestHeaders:r,httpResponseBody:null==t.t1?void 0:t.t1.message,httpResponseHeaders:null==t.t1?void 0:t.t1.headers,httpResponseMethod:"POST",httpResponseUrl:k,httpResponseCode:null==t.t1?void 0:t.t1.statusCode,httpResponseTime:Date.now()-p}),this.addTroubleshootingHit(d);case 57:return v=new Map([].concat(He(this._hitsPoolQueue),He(this._activatePoolQueue))),t.next=60,this.flushAllHits();case 60:return t.next=62,this.cacheHit(v);case 62:case"end":return t.stop()}}),t,this,[[14,30,33,36],[44,51]])}))),function(){return n.apply(this,arguments)})}]),f}(en);function an(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return cn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cn(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function cn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var un=function(t){l(d,t);var n,i,r,o,s,c,f,h=(c=d,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(c);if(f){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return g(this,t)});function d(t){var e;return(e=h.call(this,t)).cacheHitKeys={},e}return a(d,[{key:"activateFlag",value:(s=e(u().mark((function t(e){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(e.visitorId,":").concat(Kt()),e.key=n,t.next=4,this.sendActivate({activateHitsPool:[],currentActivate:e,batchTriggeredBy:ae.ActivateLength});case 4:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"addHit",value:(o=e(u().mark((function t(e){var n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="".concat(e.visitorId,":").concat(Kt()),e.key=n,e.type!==ye.EVENT||e.action!==w||e.label!=="".concat(y.name,":false")){t.next=5;break}return t.next=5,this.notConsent(e.visitorId);case 5:return t.next=7,this.sendHit(e);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"addHitInPoolQueue",value:function(t){return Promise.resolve()}},{key:"sendHit",value:(r=e(u().mark((function t(e){var n,i,r,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=At({},X,nt),i=e.toApiKeys(),r=Date.now(),t.prev=3,t.next=6,this._httpClient.postAsync(k,{headers:n,body:i,timeout:this.config.timeout,nextFetchConfig:this.config.nextFetchConfig});case 6:Ut(this.config,Ct,Tt,"HIT",{httpRequestBody:i,httpRequestHeaders:n,httpRequestMethod:"POST",httpRequestUrl:k,duration:Date.now()-r,batchTriggeredBy:ae[ae.DirectHit]}),this.sendHitsToFsQa([e]),t.next=19;break;case 10:return t.prev=10,t.t0=t.catch(3),e.type===ye.EVENT&&e.action===w||(this.cacheHitKeys[e.key]=e.visitorId),t.next=15,this.cacheHit((new Map).set(e.key,e));case 15:return Mt(this.config,Ct,Ot,"HIT",{httpRequestBody:i,httpRequestHeaders:n,httpRequestMethod:"POST",httpRequestUrl:k,httpResponseBody:null==t.t0?void 0:t.t0.message,httpResponseHeaders:null==t.t0?void 0:t.t0.headers,httpResponseCode:null==t.t0?void 0:t.t0.statusCode,duration:Date.now()-r,batchTriggeredBy:ae[ae.DirectHit]}),o=new le({label:re.SEND_HIT_ROUTE_ERROR,logLevel:Nt.ERROR,visitorId:"".concat(this._flagshipInstanceId),traffic:0,config:this.config,httpRequestBody:i,httpRequestHeaders:n,httpRequestMethod:"POST",httpRequestUrl:k,httpResponseBody:null==t.t0?void 0:t.t0.message,httpResponseHeaders:null==t.t0?void 0:t.t0.headers,httpResponseCode:null==t.t0?void 0:t.t0.statusCode,httpResponseTime:Date.now()-r,batchTriggeredBy:ae.DirectHit}),t.next=19,this.sendTroubleshootingHit(o);case 19:case"end":return t.stop()}}),t,this,[[3,10]])}))),function(t){return r.apply(this,arguments)})},{key:"notConsent",value:(i=e(u().mark((function t(e){var n,i,r,o,s,a,c,f,l,h,g=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object.entries(this.cacheHitKeys).filter((function(t){var n=ve(t,2);return n[0],n[1]===e})),i=[],r=an(n);try{for(r.s();!(o=r.n()).done;)s=ve(o.value,1),a=s[0],i.push(a)}catch(t){r.e(t)}finally{r.f()}if(c=Array.from(this._hitsPoolQueue).filter((function(t){var n=ve(t,2),i=(n[0],n[1]);return!((null==i?void 0:i.type)===ye.EVENT&&(null==i?void 0:i.action)===w||i.visitorId!==e&&i.anonymousId!==e)})),f=Array.from(this._activatePoolQueue).filter((function(t){var n=ve(t,2),i=(n[0],n[1]);return i.visitorId===e||i.anonymousId===e})),l=[],c.forEach((function(t){var e=ve(t,1)[0];g._hitsPoolQueue.delete(e),l.push(e)})),f.forEach((function(t){var e=ve(t,1)[0];g._activatePoolQueue.delete(e),l.push(e)})),(h=[].concat(i,l)).length){t.next=12;break}return t.abrupt("return");case 12:return t.next=14,this.flushHits(h);case 14:this.cacheHitKeys={};case 15:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"sendActivate",value:(n=e(u().mark((function t(e){var n,i,r,o,s,a,c,f,l,h,g,p=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.activateHitsPool,r=e.currentActivate,o=e.batchTriggeredBy,At(n={},Z,this.config.apiKey),At(n,tt,y.name),At(n,et,y.version),At(n,X,nt),s=n,a=new je(Array.from(i.filter((function(t){return Date.now()-t.createdAt<D}))),this.config),r&&a.hits.push(r),c=a.toApiKeys(),f=I+C,l=Date.now(),t.prev=7,t.next=10,this._httpClient.postAsync(f,{headers:s,body:c,timeout:this.config.timeout,nextFetchConfig:this.config.nextFetchConfig});case 10:if(Ut(this.config,Ct,Tt,xt,{httpRequestBody:c,httpRequestHeaders:s,httpRequestMethod:"POST",httpRequestUrl:f,duration:Date.now()-l,batchTriggeredBy:ae[o]}),h=i.map((function(t){return t.key})),a.hits.forEach((function(t){p.onVisitorExposed(t)})),!h.length){t.next=16;break}return t.next=16,this.flushHits(h);case 16:this.sendHitsToFsQa(a.hits),t.next=29;break;case 19:if(t.prev=19,t.t0=t.catch(7),a.hits.forEach((function(t){p.cacheHitKeys[t.key]=t.visitorId})),!r){t.next=25;break}return t.next=25,this.cacheHit(new Map([[r.key,r]]));case 25:return Mt(this.config,Ct,Ot,xt,{httpRequestBody:c,httpRequestHeaders:s,httpRequestMethod:"POST",httpRequestUrl:f,httpResponseBody:null==t.t0?void 0:t.t0.message,httpResponseHeaders:null==t.t0?void 0:t.t0.headers,httpResponseCode:null==t.t0?void 0:t.t0.statusCode,duration:Date.now()-l,batchTriggeredBy:ae[o]}),g=new le({label:re.SEND_ACTIVATE_HIT_ROUTE_ERROR,logLevel:Nt.ERROR,visitorId:"".concat(this._flagshipInstanceId),traffic:0,config:this.config,httpRequestBody:c,httpRequestHeaders:s,httpRequestMethod:"POST",httpRequestUrl:f,httpResponseBody:null==t.t0?void 0:t.t0.message,httpResponseHeaders:null==t.t0?void 0:t.t0.headers,httpResponseMethod:"POST",httpResponseUrl:f,httpResponseCode:null==t.t0?void 0:t.t0.statusCode,httpResponseTime:Date.now()-l,batchTriggeredBy:o}),t.next=29,this.sendTroubleshootingHit(g);case 29:case"end":return t.stop()}}),t,this,[[7,19]])}))),function(t){return n.apply(this,arguments)})}]),d}(en);function fn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ln(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fn(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var hn=function(t){l(r,t);var e,n,i=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=p(e);if(n){var r=p(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return g(this,t)});function r(t){var e;e=i.call(this,{type:"ACTIVATE",userIp:t.userIp,screenResolution:t.screenResolution,locale:t.locale,sessionNumber:t.sessionNumber,visitorId:t.visitorId,anonymousId:t.anonymousId,qaMode:t.qaMode});var n=t.variationGroupId,r=t.variationId,o=t.flagKey,s=t.flagValue,a=t.flagDefaultValue,c=t.flagMetadata,u=t.visitorContext;return e.variationGroupId=n,e.variationId=r,e.flagKey=o,e.flagValue=s,e.flagDefaultValue=a,e.flagMetadata=c,e.visitorContext=u,e}return a(r,[{key:"variationGroupId",get:function(){return this._variationGroupId},set:function(t){this._variationGroupId=t}},{key:"variationId",get:function(){return this._variationId},set:function(t){this._variationId=t}},{key:"flagKey",get:function(){return this._flagKey},set:function(t){this._flagKey=t}},{key:"flagValue",get:function(){return this._flagValue},set:function(t){this._flagValue=t}},{key:"flagDefaultValue",get:function(){return this._flagDefaultValue},set:function(t){this._flagDefaultValue=t}},{key:"flagMetadata",get:function(){return this._flagMetadata},set:function(t){this._flagMetadata=t}},{key:"visitorContext",get:function(){return this._visitorContext},set:function(t){this._visitorContext=t}},{key:"isReady",value:function(){return!((!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&!t.prototype.isReady.call(this)||!this.variationGroupId||!this.variationId)}},{key:"toApiKeys",value:function(){var t,e=(At(t={},J,this.anonymousId||this.visitorId),At(t,"vaid",this.variationId),At(t,"caid",this.variationGroupId),At(t,"cid",this.config.envId),At(t,"aid",null),At(t,Y,Date.now()-this.createdAt),t);return this.visitorId&&this.anonymousId&&(e[J]=this.visitorId,e.aid=this.anonymousId),this.qaMode&&(e.qa=this.qaMode),e}},{key:"toObject",value:function(){return ln(ln({},t.prototype.toObject.call(this)),{},{variationGroupId:this.variationGroupId,variationId:this.variationId})}},{key:"getErrorMessage",value:function(){return"variationGroupId and variationId are required"}}]),r}(se);var gn=function(t){l(f,t);var n,i,r,o,s,c=(o=f,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(o);if(s){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return g(this,t)});function f(){return c.apply(this,arguments)}return a(f,[{key:"activateFlag",value:(r=e(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.strategy.activateFlag(e);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"addHit",value:(i=e(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.strategy.addHit(e);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"sendBatch",value:(n=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.strategy.sendBatch(ae.Flush);case 2:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),f}(function(){function t(t,e,n){At(this,"_isPooling",!1),this._flagshipInstanceId=n,this._hitsPoolQueue=new Map,this._activatePoolQueue=new Map,this._troubleshootingQueue=new Map,this._analyticHitQueue=new Map,this._httpClient=t,this._config=e,this.strategy=this.initStrategy(),this.lookupHits()}var n,i,r,o,s;return a(t,[{key:"flagshipInstanceId",get:function(){return this._flagshipInstanceId}},{key:"troubleshootingData",get:function(){return this.strategy.troubleshootingData},set:function(t){this.strategy.troubleshootingData=t}},{key:"initStrategy",value:function(){var t,e,n={config:this.config,httpClient:this.httpClient,hitsPoolQueue:this._hitsPoolQueue,activatePoolQueue:this._activatePoolQueue,troubleshootingQueue:this._troubleshootingQueue,analyticHitQueue:this._analyticHitQueue,flagshipInstanceId:this.flagshipInstanceId};switch(null==(t=this.config.trackingManagerConfig)?void 0:t.cacheStrategy){case Jt.PERIODIC_CACHING:e=new sn(n);break;case Jt.CONTINUOUS_CACHING:e=new nn(n);break;default:e=new un(n)}return e}},{key:"httpClient",get:function(){return this._httpClient}},{key:"config",get:function(){return this._config}},{key:"sendTroubleshootingHit",value:(s=e(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.strategy.sendTroubleshootingHit(e);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"startBatchingLoop",value:function(){var t,e=this,n=1e3*(null==(t=this.config.trackingManagerConfig)?void 0:t.batchIntervals);Lt(this.config,Ct,"The Batch Loop has been started with a time interval of {0} ms",n),this._intervalID=setInterval((function(){e.batchingLoop()}),n)}},{key:"stopBatchingLoop",value:function(){clearInterval(this._intervalID),this._isPooling=!1,Vt(this.config,"The Batch Loop has been stopped",Ct)}},{key:"batchingLoop",value:(o=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._isPooling){t.next=2;break}return t.abrupt("return");case 2:return this._isPooling=!0,t.next=5,this.strategy.sendBatch(ae.Timer);case 5:return t.next=7,this.strategy.sendTroubleshootingQueue();case 7:return t.next=9,this.strategy.sendUsageHitQueue();case 9:this._isPooling=!1;case 10:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"checkLookupHitData",value:function(t){var e,n;return!(1!==(null==t?void 0:t.version)||null==t||null==(e=t.data)||!e.type||null==t||null==(n=t.data)||!n.content)||(Ft(this.config,"JSON DATA must fit the type HitCacheDTO","LOOKUP HIT"),!1)}},{key:"lookupHits",value:(r=e(u().mark((function t(){var e,n,i,r,o=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e=this.config.hitCacheImplementation,!this.config.disableCache&&e&&"function"==typeof e.lookupHits){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.lookupHits();case 6:if(n=t.sent,Ut(this.config,kt,"Hits cache has been loaded from database: {0}",n),n&&Object.keys(n).length){t.next=10;break}return t.abrupt("return");case 10:if(i=function(t){return Date.now()-t<=D},r=[],Object.entries(n).forEach((function(t){var e=ve(t,2),n=e[0],s=e[1];if(o.checkLookupHitData(s)&&i(s.data.time)){var a;switch(s.data.type){case ye.EVENT:a=new be(s.data.content);break;case ye.ITEM:a=new Oe(s.data.content);break;case ye.PAGE:a=new Ee(s.data.content);break;case ye.SCREEN:a=new Re(s.data.content);break;case"SEGMENT":a=new Fe(s.data.content);break;case"ACTIVATE":return(a=new hn(s.data.content)).key=n,a.createdAt=s.data.content.createdAt,a.config=o.config,void o._activatePoolQueue.set(n,a);case ye.TRANSACTION:a=new De(s.data.content);break;default:return}a.key=n,a.createdAt=s.data.content.createdAt,a.config=o.config,o._hitsPoolQueue.set(n,a)}else r.push(n)})),!r.length){t.next=16;break}return t.next=16,this.strategy.flushHits(r);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),Mt(this.config,kt,_t,"lookupHits",t.t0.message||t.t0);case 21:case"end":return t.stop()}}),t,this,[[0,18]])}))),function(){return r.apply(this,arguments)})},{key:"sendUsageHit",value:(i=e(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.strategy.sendUsageHit(e);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"addTroubleshootingHit",value:(n=e(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.strategy.addTroubleshootingHit(e);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})}]),t}()),pn=function(){function t(){var t,e,n;this.consoleError=null!=(t=console.error)?t:console.log,this.consoleWarn=null!=(e=console.warn)?e:console.log,this.consoleDebug=null!=(n=console.debug)?n:console.log}return a(t,[{key:"emergency",value:function(t,e){this.consoleError(this.formatOutput(Nt.EMERGENCY,t,e))}},{key:"alert",value:function(t,e){this.consoleError(this.formatOutput(Nt.ALERT,t,e))}},{key:"critical",value:function(t,e){this.consoleError(this.formatOutput(Nt.CRITICAL,t,e))}},{key:"error",value:function(t,e){this.consoleError(this.formatOutput(Nt.ERROR,t,e))}},{key:"warning",value:function(t,e){this.consoleWarn(this.formatOutput(Nt.WARNING,t,e))}},{key:"notice",value:function(t,e){this.log(Nt.NOTICE,t,e)}},{key:"info",value:function(t,e){console.info(this.formatOutput(Nt.INFO,t,e))}},{key:"debug",value:function(t,e){this.consoleDebug(this.formatOutput(Nt.DEBUG,t,e))}},{key:"log",value:function(t,e,n){console.log(this.formatOutput(t,e,n))}},{key:"formatOutput",value:function(t,e,n){var i=new Date(Date.now()),r=function(t){return 1===t.toString().length?"0".concat(t):t};return"[".concat(r(i.getFullYear()),"-").concat(r(i.getMonth()+1),"-").concat(r(i.getDate())," ").concat(r(i.getHours()),":").concat(r(i.getMinutes()),":").concat(r(i.getSeconds()),".").concat(r(i.getMilliseconds()),"] [").concat("Flagship SDK","] [").concat(Nt[t],"] [").concat(n,"] : ").concat(e)}}]),t}();function dn(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function vn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function yn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vn(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n(2087);var mn=function(t){l(r,t);var e,n,i=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=p(e);if(n){var r=p(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return g(this,t)});function r(t){return i.call(this,yn(yn({},t),{},{type:"USAGE"}))}return a(r)}(ce);function In(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function kn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?In(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var bn="FS_DEFAULT_HIT_CACHE",_n=function(){function t(){}return a(t,[{key:"cacheHit",value:function(t){var e=localStorage.getItem(bn)||"{}",n=kn(kn({},JSON.parse(e)),t);return localStorage.setItem(bn,JSON.stringify(n)),Promise.resolve()}},{key:"lookupHits",value:function(){var t=localStorage.getItem(bn)||"{}",e=JSON.parse(t);return Promise.resolve(e)}},{key:"flushHits",value:function(t){var e=localStorage.getItem(bn)||"{}",n=JSON.parse(e);return t.forEach((function(t){delete n[t]})),localStorage.setItem(bn,JSON.stringify(n)),Promise.resolve()}},{key:"flushAllHits",value:function(){return localStorage.removeItem(bn),Promise.resolve()}}]),t}(),Cn="FS_VISITOR_CACHE_",On=function(){function t(){}return a(t,[{key:"cacheVisitor",value:function(t,e){return localStorage.setItem(Cn+t,JSON.stringify(e)),Promise.resolve()}},{key:"lookupVisitor",value:function(t){var e=localStorage.getItem(Cn+t);return Promise.resolve(e?JSON.parse(e):null)}},{key:"flushVisitor",value:function(t){return localStorage.removeItem(Cn+t),Promise.resolve()}}]),t}();function Tn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function xn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tn(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var En,Sn="Visitor ID mismatch: {0} vs {1}",wn=function(){function t(t){var e=t.visitor,n=t.murmurHash;this.visitor=e,this._murmurHash=n}var n,i,r,o,s;return a(t,[{key:"configManager",get:function(){return this.visitor.configManager}},{key:"trackingManager",get:function(){return this.configManager.trackingManager}},{key:"decisionManager",get:function(){return this.configManager.decisionManager}},{key:"config",get:function(){return this.visitor.config}},{key:"updateCampaigns",value:function(t){try{this.visitor.campaigns=t,this.visitor.flagsData=this.decisionManager.getModifications(t)}catch(t){Ft(this.config,t.message||t,"updateCampaigns")}}},{key:"hasTrackingManager",value:function(t){var e=this.trackingManager;return e||Ft(this.config,Pt("trackerManager must not be null."),t),!!e}},{key:"setConsent",value:function(t){var e;if(this.visitor.hasConsented=t,t||this.flushVisitor(),this.hasTrackingManager("setConsent")){var n=new be({visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,label:"".concat(y.name,":").concat(this.visitor.hasConsented),action:w,category:ke.USER_ENGAGEMENT});n.qaMode=this.config.isQAModeEnabled,n.ds=$,n.config=this.config;var i=new le({label:re.VISITOR_SEND_HIT,logLevel:Nt.INFO,traffic:this.visitor.traffic||0,visitorId:this.visitor.visitorId,visitorSessionId:this.visitor.instanceId,flagshipInstanceId:null==(e=this.visitor.sdkInitialData)?void 0:e.instanceId,anonymousId:this.visitor.anonymousId,config:this.config,hitContent:n.toApiKeys()});this.trackingManager.addHit(n),Ut(this.config,"SET_CONSENT","Visitor `{0}` consent has been changed : {1}",this.visitor.visitorId,t),this.decisionManager.troubleshooting?this.trackingManager.sendTroubleshootingHit(i):this.visitor.consentHitTroubleshooting=i}}},{key:"checKLookupVisitorDataV1",value:function(t){if(!t||!t.data||!t.data.visitorId)return!1;var e=t.data.campaigns;return!e||!!Array.isArray(e)&&(this.visitor.visitorCacheStatus!==oe.VISITOR_ID_CACHE&&this.visitor.visitorCacheStatus!==oe.VISITOR_ID_CACHE_NOT_ANONYMOUS_ID_CACHE||t.data.visitorId===this.visitor.visitorId?this.visitor.visitorCacheStatus===oe.ANONYMOUS_ID_CACHE&&t.data.visitorId!==this.visitor.anonymousId?(Lt(this.config,kt,Sn,t.data.visitorId,this.visitor.anonymousId),!1):e.every((function(t){return t.campaignId&&t.type&&t.variationGroupId&&t.variationId})):(Lt(this.config,kt,Sn,t.data.visitorId,this.visitor.visitorId),!1))}},{key:"checKLookupVisitorData",value:function(t){return 1===t.version&&this.checKLookupVisitorDataV1(t)}},{key:"lookupVisitor",value:(s=e(u().mark((function t(){var e,n,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e=this.config.visitorCacheImplementation,!this.config.disableCache&&e&&e.lookupVisitor&&"function"==typeof e.lookupVisitor){t.next=4;break}return t.abrupt("return");case 4:return this.visitor.visitorCacheStatus=oe.NONE,t.next=7,e.lookupVisitor(this.visitor.visitorId);case 7:if((n=t.sent)&&(this.visitor.visitorCacheStatus=oe.VISITOR_ID_CACHE),!this.visitor.anonymousId){t.next=14;break}return t.next=12,e.lookupVisitor(this.visitor.anonymousId);case 12:(i=t.sent)&&!n?(n=i,this.visitor.visitorCacheStatus=oe.ANONYMOUS_ID_CACHE):!i&&n&&(this.visitor.visitorCacheStatus=oe.VISITOR_ID_CACHE_NOT_ANONYMOUS_ID_CACHE);case 14:if(Ut(this.config,kt,"Visitor {0}, visitor cache has been loaded from database: {1}",this.visitor.visitorId,n),n){t.next=17;break}return t.abrupt("return");case 17:if(this.checKLookupVisitorData(n)){t.next=20;break}return Mt(this.config,kt,It,1,this.visitor.visitorId),t.abrupt("return");case 20:this.visitor.visitorCache=n,t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0),Mt(this.config,kt,bt,this.visitor.visitorId,"lookupVisitor",t.t0.message||t.t0);case 26:case"end":return t.stop()}}),t,this,[[0,23]])}))),function(){return s.apply(this,arguments)})},{key:"cacheVisitor",value:(o=e(u().mark((function t(){var e,n,i,r,o,s,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=this.config.visitorCacheImplementation,!this.config.disableCache&&i&&"function"==typeof i.cacheVisitor){t.next=4;break}return t.abrupt("return");case 4:return r={},(o={version:1,data:{visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,consent:this.visitor.hasConsented,context:this.visitor.context,campaigns:this.visitor.campaigns.map((function(t){return r[t.variationGroupId]=t.variation.id,{campaignId:t.id,slug:t.slug,variationGroupId:t.variationGroupId,variationId:t.variation.id,isReference:t.variation.reference,type:t.variation.modifications.type,activated:!1,flags:t.variation.modifications.value}}))}}).data.assignmentsHistory=xn(xn({},null==(e=this.visitor.visitorCache)||null==(n=e.data)?void 0:n.assignmentsHistory),r),t.next=9,i.cacheVisitor(this.visitor.visitorId,o);case 9:if((s=this.visitor.visitorCacheStatus)&&s!==oe.NONE&&s!==oe.VISITOR_ID_CACHE_NOT_ANONYMOUS_ID_CACHE){t.next=15;break}if(!this.visitor.anonymousId){t.next=15;break}return a=xn(xn({},o),{},{data:xn(xn({},o.data),{},{visitorId:this.visitor.anonymousId,anonymousId:null})}),t.next=15,i.cacheVisitor(this.visitor.anonymousId,a);case 15:Ut(this.config,kt,"Visitor {0}, visitor cache has been saved into database : {0}",this.visitor.visitorId,o),this.visitor.visitorCache=o,t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),Mt(this.config,kt,bt,this.visitor.visitorId,"cacheVisitor",t.t0.message||t.t0);case 22:case"end":return t.stop()}}),t,this,[[0,19]])}))),function(){return o.apply(this,arguments)})},{key:"flushVisitor",value:(r=e(u().mark((function t(){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e=this.config.visitorCacheImplementation,!this.config.disableCache&&e&&"function"==typeof e.flushVisitor){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.flushVisitor(this.visitor.visitorId);case 6:Ut(this.config,kt,"Visitor {0}, visitor cache has been flushed from database.",this.visitor.visitorId),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),Mt(this.config,kt,bt,this.visitor.visitorId,"flushVisitor",t.t0.message||t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])}))),function(){return r.apply(this,arguments)})},{key:"sendTroubleshootingHit",value:(i=e(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.trackingManager.sendTroubleshootingHit(e);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"getCurrentDateTime",value:function(){return new Date}},{key:"getSdkConfigDecisionMode",value:function(){return this.config.decisionMode===Rt.DECISION_API?"DECISION_API":this.config.decisionMode}},{key:"sendSdkConfigAnalyticHit",value:(n=e(u().mark((function t(){var e,n,i,r,o,s,a,c,f,l,h,g;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.config.disableDeveloperUsageTracking){t.next=2;break}return t.abrupt("return");case 2:if(a=this.visitor.visitorId+this.getCurrentDateTime().toDateString(),!(this._murmurHash.murmurHash3Int32(a)%1e3>1)){t.next=7;break}return t.abrupt("return");case 7:return c=this.config.hitCacheImplementation,f=this.config.visitorCacheImplementation,l=c&&!(c instanceof _n),h=f&&!(f instanceof On),g=new mn({label:re.SDK_CONFIG,logLevel:Nt.INFO,visitorId:null==(e=this.visitor.sdkInitialData)?void 0:e.instanceId,flagshipInstanceId:null==(n=this.visitor.sdkInitialData)?void 0:n.instanceId,config:this.config,sdkStatus:this.visitor.getSdkStatus(),lastBucketingTimestamp:this.configManager.decisionManager.lastBucketingTimestamp,lastInitializationTimestamp:null==(i=this.visitor.sdkInitialData)?void 0:i.lastInitializationTimestamp,sdkConfigMode:this.getSdkConfigDecisionMode(),sdkConfigLogLevel:this.config.logLevel,sdkConfigTimeout:this.config.timeout,sdkConfigPollingInterval:this.config.pollingInterval,sdkConfigTrackingManagerStrategy:null==(r=this.config.trackingManagerConfig)?void 0:r.cacheStrategy,sdkConfigTrackingManagerBatchIntervals:null==(o=this.config.trackingManagerConfig)?void 0:o.batchIntervals,sdkConfigTrackingManagerPoolMaxSize:null==(s=this.config.trackingManagerConfig)?void 0:s.poolMaxSize,sdkConfigFetchNow:this.config.fetchNow,sdkConfigReuseVisitorIds:this.config.reuseVisitorIds,sdkConfigInitialBucketing:this.config.initialBucketing,sdkConfigDecisionApiUrl:this.config.decisionApiUrl,sdkConfigHitDeduplicationTime:this.config.hitDeduplicationTime,sdkConfigUsingOnVisitorExposed:!!this.config.onVisitorExposed,sdkConfigUsingCustomHitCache:!!l,sdkConfigUsingCustomVisitorCache:!!h,sdkConfigFetchThirdPartyData:this.config.fetchThirdPartyData,sdkConfigFetchFlagsBufferingTime:this.config.fetchFlagsBufferingTime,sdkConfigDisableDeveloperUsageTracking:this.config.disableDeveloperUsageTracking,sdkConfigNextFetchConfig:this.config.nextFetchConfig,sdkConfigDisableCache:this.config.disableCache}),t.next=14,this.trackingManager.sendUsageHit(g);case 14:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"sendFetchFlagsTroubleshooting",value:function(t){var e,n,i,r,o,s,a,c,u=t.isFromCache,f=t.campaigns,l=t.now,h={};this.visitor.flagsData.forEach((function(t){h[t.variationGroupId]=t.variationId}));var g=this.visitor.visitorId+(null==(e=this.decisionManager.troubleshooting)?void 0:e.endDate.toUTCString()),p=this._murmurHash.murmurHash3Int32(g)%100;this.visitor.traffic=p;var d=this.config.hitCacheImplementation,v=this.config.visitorCacheImplementation,y=d&&!(d instanceof _n),m=v&&!(v instanceof On),I=new le({label:re.VISITOR_FETCH_CAMPAIGNS,logLevel:Nt.INFO,visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,visitorSessionId:this.visitor.instanceId,flagshipInstanceId:null==(n=this.visitor.sdkInitialData)?void 0:n.instanceId,traffic:p,config:this.config,sdkStatus:this.visitor.getSdkStatus(),visitorContext:this.visitor.context,visitorCampaigns:f,visitorCampaignFromCache:u?f:void 0,visitorConsent:this.visitor.hasConsented,visitorIsAuthenticated:!!this.visitor.anonymousId,visitorFlags:this.visitor.flagsData,visitorAssignmentHistory:h,visitorInitialCampaigns:null==(i=this.visitor.sdkInitialData)?void 0:i.initialCampaigns,visitorInitialFlagsData:null==(r=this.visitor.sdkInitialData)?void 0:r.initialFlagsData,lastBucketingTimestamp:this.configManager.decisionManager.lastBucketingTimestamp,lastInitializationTimestamp:null==(o=this.visitor.sdkInitialData)?void 0:o.lastInitializationTimestamp,httpResponseTime:Date.now()-l,sdkConfigLogLevel:this.config.logLevel,sdkConfigMode:this.getSdkConfigDecisionMode(),sdkConfigTimeout:this.config.timeout,sdkConfigPollingInterval:this.config.pollingInterval,sdkConfigTrackingManagerStrategy:null==(s=this.config.trackingManagerConfig)?void 0:s.cacheStrategy,sdkConfigTrackingManagerBatchIntervals:null==(a=this.config.trackingManagerConfig)?void 0:a.batchIntervals,sdkConfigTrackingManagerPoolMaxSize:null==(c=this.config.trackingManagerConfig)?void 0:c.poolMaxSize,sdkConfigFetchNow:this.config.fetchNow,sdkConfigReuseVisitorIds:this.config.reuseVisitorIds,sdkConfigInitialBucketing:this.config.initialBucketing,sdkConfigDecisionApiUrl:this.config.decisionApiUrl,sdkConfigHitDeduplicationTime:this.config.hitDeduplicationTime,sdkConfigUsingOnVisitorExposed:!!this.config.onVisitorExposed,sdkConfigUsingCustomHitCache:!!y,sdkConfigUsingCustomVisitorCache:!!m,sdkConfigFetchThirdPartyData:this.config.fetchThirdPartyData,sdkConfigFetchFlagsBufferingTime:this.config.fetchFlagsBufferingTime,sdkConfigDisableDeveloperUsageTracking:this.config.disableDeveloperUsageTracking,sdkConfigNextFetchConfig:this.config.nextFetchConfig,sdkConfigDisableCache:this.config.disableCache});this.sendTroubleshootingHit(I)}},{key:"sendConsentHitTroubleshooting",value:function(){var t=this.visitor.consentHitTroubleshooting;t&&(t.traffic=this.visitor.traffic,this.trackingManager.sendTroubleshootingHit(t),this.visitor.consentHitTroubleshooting=void 0)}},{key:"sendSegmentHitTroubleshooting",value:function(){var t=this.visitor.segmentHitTroubleshooting;t&&(t.traffic=this.visitor.traffic,this.trackingManager.sendTroubleshootingHit(t),this.visitor.segmentHitTroubleshooting=void 0)}}]),t}(),Rn="sdk_deviceLanguage",An="sdk_deviceType",Nn="sdk_deviceModel",Dn="sdk_city",Pn="sdk_region",Mn="sdk_country",Fn="sdk_lat",jn="sdk_long",Hn="sdk_ip",Ln="sdk_osName",Vn="sdk_osVersionName",Un="sdk_osVersionCode",Bn="sdk_carrierName",Gn="sdk_internetConnection",qn="sdk_versionName",Kn="sdk_versionCode",Qn="sdk_interfaceName",zn="fs_client",Jn="fs_version",Wn="fs_users",Yn=(At(En={},Rn,"string"),At(En,An,"string"),At(En,Nn,"string"),At(En,Dn,"string"),At(En,Pn,"string"),At(En,Mn,"string"),At(En,Fn,"number"),At(En,jn,"number"),At(En,Hn,"string"),At(En,Ln,"string"),At(En,Vn,"string"),At(En,Un,"string"),At(En,Bn,"string"),At(En,Gn,"string"),At(En,qn,"string"),At(En,Kn,"string"),At(En,Qn,"string"),At(En,zn,"string"),At(En,Jn,"string"),At(En,Wn,"string"),En),$n=function(){function t(t){var e=t.campaignId,n=t.variationGroupId,i=t.variationId,r=t.isReference,o=t.campaignType,s=t.slug,a=t.variationGroupName,c=t.variationName,u=t.campaignName;this.campaignId=e,this.variationGroupId=n,this.variationId=i,this.isReference=r,this.campaignType=o,this.campaignName=u,this.variationGroupName=a,this.variationName=c,this.slug=s}return a(t,null,[{key:"Empty",value:function(){return new t({campaignId:"",campaignName:"",campaignType:"",variationId:"",variationName:"",variationGroupId:"",variationGroupName:"",isReference:!1,slug:null})}}]),t}(),Zn=function(t){return t.FETCHED="FETCHED",t.FETCHING="FETCHING",t.FETCH_REQUIRED="FETCH_REQUIRED",t.PANIC="PANIC",t}({}),Xn=["createdAt"],ti=["createdAt"];function ei(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return ni(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ni(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function ni(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var ii=function(t){l(y,t);var n,i,o,s,c,f,h,d,v=(h=y,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(h);if(d){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return g(this,t)});function y(){return v.apply(this,arguments)}return a(y,[{key:"checkPredefinedContext",value:function(t,e){var n=Yn[t];if(!n)return null;var i=!1;return"string"===n?i="string"==typeof e:"number"===n&&(i="number"==typeof e),i||Mt(this.config,G,st,this.visitor.visitorId,t,n),i}},{key:"updateContextKeyValue",value:function(t,e){var n=r(e);if("string"==typeof t&&""!==t)if("string"===n||"number"===n||"boolean"===n){if(t!==zn&&t!==Jn&&t!==Wn){var i=this.checkPredefinedContext(t,e);("boolean"!=typeof i||i)&&(this.visitor.context[t]=e)}}else Mt(this.config,G,ot,this.visitor.visitorId,t);else Mt(this.config,G,rt,this.visitor.visitorId,t)}},{key:"updateContext",value:function(t,e){if("string"==typeof t)return this.updateContextKeyValue(t,e),Ut(this.config,G,"visitor `{0}`, context have been updated: key {1}, value {2}, Context {3}",this.visitor.visitorId,t,e,this.visitor.context),void(this.visitor.fetchStatus={status:Zn.FETCH_REQUIRED,reason:Dt.UPDATE_CONTEXT});if(t){for(var n in t){var i=t[n];this.updateContextKeyValue(n,i)}this.visitor.fetchStatus={status:Zn.FETCH_REQUIRED,reason:Dt.UPDATE_CONTEXT},Ut(this.config,G,"visitor `{0}`, context have been updated: key/value {1}, Context {2}",this.visitor.visitorId,t,this.visitor.context)}else Ft(this.visitor.config,"Context must not to be null",G)}},{key:"clearContext",value:function(){this.visitor.context={},this.visitor.loadPredefinedContext(),this.visitor.fetchStatus={status:Zn.FETCH_REQUIRED,reason:Dt.UPDATE_CONTEXT},Ut(this.config,"CLEAR_CONTEXT","visitor `{0}`, context has been cleared cleared `{1}`",this.visitor.visitorId,this.visitor.context)}},{key:"fetchVisitorCampaigns",value:function(t){var e;return Array.isArray(null==t||null==(e=t.visitorCache)?void 0:e.data.campaigns)?t.visitorCache.data.campaigns.map((function(t){return{id:t.campaignId,variationGroupId:t.variationGroupId,slug:t.slug,variation:{id:t.variationId,reference:!!t.isReference,modifications:{type:t.type,value:t.flags}}}})):null}},{key:"isDeDuplicated",value:function(t,e){if(0===e)return!1;var n=this.visitor.deDuplicationCache[t];return!!(n&&Date.now()-n<=1e3*e)||(this.visitor.deDuplicationCache[t]=Date.now(),this.visitor.clearDeDuplicationCache(e),!1)}},{key:"sendActivate",value:(f=e(u().mark((function t(e,n){var i,r,o,s,a,c;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=new hn({variationGroupId:e.variationGroupId,variationId:e.variationId,visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,flagKey:e.key,flagValue:e.value,flagDefaultValue:n,visitorContext:this.visitor.context,flagMetadata:{campaignName:e.campaignName,campaignId:e.campaignId,campaignType:e.campaignType,variationGroupId:e.variationGroupId,variationGroupName:e.variationGroupName,variationId:e.variationId,variationName:e.variationName,slug:e.slug,isReference:e.isReference}})).config=this.config,r.qaMode=this.config.isQAModeEnabled,(o=r.toObject()).createdAt,s=dn(o,Xn),!this.isDeDuplicated(JSON.stringify(s),this.config.hitDeduplicationTime)){t.next=8;break}return a={visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,flag:e,delay:0},Bt(this.config,Pt("Activate {0} is deduplicated",JSON.stringify(a)),K),t.abrupt("return");case 8:return t.next=10,this.trackingManager.activateFlag(r);case 10:c=new le({label:re.VISITOR_SEND_ACTIVATE,logLevel:Nt.INFO,traffic:this.visitor.traffic,visitorId:r.visitorId,flagshipInstanceId:null==(i=this.visitor.sdkInitialData)?void 0:i.instanceId,visitorSessionId:this.visitor.instanceId,anonymousId:r.anonymousId,config:this.config,hitContent:r.toApiKeys()}),this.sendTroubleshootingHit(c);case 12:case"end":return t.stop()}}),t,this)}))),function(t,e){return f.apply(this,arguments)})},{key:"sendHit",value:(c=e(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.hasTrackingManager(K)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.prepareAndSendHit(e);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"sendHits",value:(s=e(u().mark((function t(e){var n,i,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.hasTrackingManager(K)){t.next=2;break}return t.abrupt("return");case 2:n=ei(e),t.prev=3,n.s();case 5:if((i=n.n()).done){t.next=11;break}return r=i.value,t.next=9,this.prepareAndSendHit(r);case 9:t.next=5;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),n.e(t.t0);case 16:return t.prev=16,n.f(),t.finish(16);case 19:case"end":return t.stop()}}),t,this,[[3,13,16,19]])}))),function(t){return s.apply(this,arguments)})},{key:"getHit",value:function(t){var e=null;switch(t.type.toUpperCase()){case ye.EVENT:e=new be(t);break;case ye.ITEM:e=new Oe(t);break;case ye.PAGE_VIEW:e=new Ee(t);break;case ye.SCREEN_VIEW:e=new Re(t);break;case ye.TRANSACTION:e=new De(t)}return e}},{key:"prepareAndSendHit",value:(o=e(u().mark((function t(e){var n,i,r,o,s,a,c,f=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=f.length>1&&void 0!==f[1]?f[1]:K,null!=e&&e.type){t.next=4;break}return Ft(this.config,"Hit must not be null",n),t.abrupt("return");case 4:if(!(e instanceof se)){t.next=8;break}i=e,t.next=13;break;case 8:if(r=this.getHit(e)){t.next=12;break}return Ft(this.config,"property type is required and must ",n),t.abrupt("return");case 12:i=r;case 13:if(i.visitorId=this.visitor.visitorId,i.ds=$,i.config=this.config,i.anonymousId=this.visitor.anonymousId,i.qaMode=this.config.isQAModeEnabled,(o=i.toObject()).createdAt,s=dn(o,ti),!this.isDeDuplicated(JSON.stringify(s),this.config.hitDeduplicationTime)){t.next=21;break}return t.abrupt("return");case 21:if(i.isReady()){t.next=24;break}return Ft(this.config,i.getErrorMessage(),n),t.abrupt("return");case 24:return t.prev=24,t.next=27,this.trackingManager.addHit(i);case 27:if("SEGMENT"!==i.type){t.next=29;break}return t.abrupt("return");case 29:c=new le({label:re.VISITOR_SEND_HIT,logLevel:Nt.INFO,traffic:this.visitor.traffic,visitorId:i.visitorId,flagshipInstanceId:null==(a=this.visitor.sdkInitialData)?void 0:a.instanceId,visitorSessionId:this.visitor.instanceId,anonymousId:i.anonymousId,config:this.config,hitContent:i.toApiKeys()}),this.sendTroubleshootingHit(c),t.next=36;break;case 33:t.prev=33,t.t0=t.catch(24),Ft(this.config,t.t0.message||t.t0,n);case 36:case"end":return t.stop()}}),t,this,[[24,33]])}))),function(t){return o.apply(this,arguments)})},{key:"authenticate",value:function(t){var e;if(t)if(this.visitor.anonymousId)jt(this.config,dt,"The visitor is already authenticated with visitor ID {0}",this.visitor.visitorId,this.visitor.anonymousId);else{this.visitor.anonymousId=this.visitor.visitorId,this.visitor.visitorId=t;var n=new le({label:re.VISITOR_AUTHENTICATE,logLevel:Nt.INFO,flagshipInstanceId:null==(e=this.visitor.sdkInitialData)?void 0:e.instanceId,visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,visitorContext:this.visitor.context,traffic:this.visitor.traffic,config:this.config});this.sendTroubleshootingHit(n),this.visitor.fetchStatus={status:Zn.FETCH_REQUIRED,reason:Dt.AUTHENTICATE},Ut(this.config,dt,"The visitor is authenticated with new visitor ID {0} anonymous ID {1}",this.visitor.visitorId,this.visitor.anonymousId)}else Mt(this.config,dt,vt,this.visitor.visitorId)}},{key:"unauthenticate",value:function(){var t;if(this.visitor.anonymousId){this.visitor.visitorId=this.visitor.anonymousId,this.visitor.anonymousId=null;var e=new le({label:re.VISITOR_UNAUTHENTICATE,logLevel:Nt.INFO,visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,flagshipInstanceId:null==(t=this.visitor.sdkInitialData)?void 0:t.instanceId,visitorContext:this.visitor.context,traffic:this.visitor.traffic,config:this.config});this.sendTroubleshootingHit(e),this.visitor.fetchStatus={status:Zn.FETCH_REQUIRED,reason:Dt.UNAUTHENTICATE},Ut(this.config,yt,"The visitor is unauthenticated with visitor ID {0}",this.visitor.visitorId)}else Mt(this.config,yt,"Visitor {0} is not authenticated yet",this.visitor.visitorId)}},{key:"fetchFlags",value:(i=e(u().mark((function t(){var e,n,i,r,o,s,a,c,f,l,h,g,p,d,v,y,m;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=at,n=Date.now(),i={visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,context:this.visitor.context,isFromCache:!1,duration:0},r=null,t.prev=4,s=Date.now()-this.visitor.lastFetchFlagsTimestamp,(a=this.visitor.fetchStatus.status)!==Zn.FETCHING){t.next=11;break}return t.next=10,this.visitor.getCampaignsPromise;case 10:return t.abrupt("return");case 11:if(c=1e3*this.config.fetchFlagsBufferingTime,!(a===Zn.FETCHED&&s<c)){t.next=15;break}return Lt(this.config,e,"Visitor {0}, fetchFlags has been ignored and will continue to be ignored for the next {1}ms, this delay can be changed with `fetchFlagsBufferingTime` option in the SDK config",this.visitor.visitorId,c-s),t.abrupt("return");case 15:return Ut(this.config,e,"visitor `{0}` fetchFlags process is started",this.visitor.visitorId),this.visitor.fetchStatus={status:Zn.FETCHING,reason:Dt.NONE},this.visitor.getCampaignsPromise=this.decisionManager.getCampaignsAsync(this.visitor),t.next=20,this.visitor.getCampaignsPromise;case 20:r=t.sent,this.visitor.lastFetchFlagsTimestamp=Date.now(),this.decisionManager.isPanic()&&(this.visitor.fetchStatus={status:Zn.PANIC,reason:Dt.NONE}),this.configManager.trackingManager.troubleshootingData=this.decisionManager.troubleshooting,Ut(this.config,e,"Visitor {0}, anonymousId {1} with context {2} has just fetched campaigns {3} in {4} ms",this.visitor.visitorId,this.visitor.anonymousId,this.visitor.context,r,Date.now()-n),t.next=32;break;case 27:t.prev=27,t.t0=t.catch(4),Ft(this.config,t.t0.message,e),o=t.t0,this.visitor.fetchStatus={status:Zn.FETCH_REQUIRED,reason:Dt.FETCH_ERROR};case 32:try{r||(r=this.fetchVisitorCampaigns(this.visitor),i.isFromCache=!0,r&&(this.visitor.fetchStatus={status:Zn.FETCH_REQUIRED,reason:Dt.READ_FROM_CACHE},Ut(this.config,e,"Visitor {0}, anonymousId {1} with context {2} has just fetched campaigns from cache {3} in {4} ms",this.visitor.visitorId,this.visitor.anonymousId,this.visitor.context,r,Date.now()-n))),r=r||[],this.visitor.campaigns=r,this.visitor.flagsData=this.decisionManager.getModifications(this.visitor.campaigns),this.visitor.emit(P,o),this.visitor.fetchStatus.status===Zn.FETCHING&&(this.visitor.fetchStatus={status:Zn.FETCHED,reason:Dt.NONE}),f={},this.visitor.flagsData.forEach((function(t){f[t.campaignId]={variationId:t.variationId,variationGroupId:t.variationGroupId,campaignId:t.campaignId}})),Je(f),Ut(this.config,e,"Visitor {0}, anonymousId {1} with context {2} has just fetched flags {3} from Campaigns",this.visitor.visitorId,this.visitor.anonymousId,this.visitor.context,this.visitor.flagsData),this.decisionManager.troubleshooting&&(this.sendFetchFlagsTroubleshooting({campaigns:r,now:n,isFromCache:i.isFromCache}),this.sendConsentHitTroubleshooting(),this.sendSegmentHitTroubleshooting()),this.sendSdkConfigAnalyticHit()}catch(t){this.visitor.emit(P,t),i.duration=Date.now()-n,Ft(this.config,Qt(t.message||t,i),e),this.visitor.fetchStatus={status:Zn.FETCH_REQUIRED,reason:Dt.FETCH_ERROR},m=new le({label:re.VISITOR_FETCH_CAMPAIGNS_ERROR,logLevel:Nt.INFO,visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,visitorSessionId:this.visitor.instanceId,flagshipInstanceId:null==(l=this.visitor.sdkInitialData)?void 0:l.instanceId,traffic:this.visitor.traffic,config:this.config,visitorContext:this.visitor.context,sdkStatus:this.visitor.getSdkStatus(),visitorCampaigns:r,visitorCampaignFromCache:i.isFromCache?r:void 0,visitorConsent:this.visitor.hasConsented,visitorIsAuthenticated:!!this.visitor.anonymousId,visitorFlags:this.visitor.flagsData,visitorInitialCampaigns:null==(h=this.visitor.sdkInitialData)?void 0:h.initialCampaigns,visitorInitialFlagsData:null==(g=this.visitor.sdkInitialData)?void 0:g.initialFlagsData,lastBucketingTimestamp:this.configManager.decisionManager.lastBucketingTimestamp,lastInitializationTimestamp:null==(p=this.visitor.sdkInitialData)?void 0:p.lastInitializationTimestamp,httpResponseTime:Date.now()-n,sdkConfigMode:this.getSdkConfigDecisionMode(),sdkConfigTimeout:this.config.timeout,sdkConfigPollingInterval:this.config.pollingInterval,sdkConfigTrackingManagerStrategy:null==(d=this.config.trackingManagerConfig)?void 0:d.cacheStrategy,sdkConfigTrackingManagerBatchIntervals:null==(v=this.config.trackingManagerConfig)?void 0:v.batchIntervals,sdkConfigTrackingManagerPoolMaxSize:null==(y=this.config.trackingManagerConfig)?void 0:y.poolMaxSize,sdkConfigFetchNow:this.config.fetchNow,sdkConfigReuseVisitorIds:this.config.reuseVisitorIds,sdkConfigInitialBucketing:this.config.initialBucketing,sdkConfigDecisionApiUrl:this.config.decisionApiUrl,sdkConfigHitDeduplicationTime:this.config.hitDeduplicationTime}),this.trackingManager.addTroubleshootingHit(m)}case 33:case"end":return t.stop()}}),t,this,[[4,27]])}))),function(){return i.apply(this,arguments)})},{key:"visitorExposed",value:(n=e(u().mark((function t(e){var n,i,r,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.key,i=e.flag,r=e.defaultValue,o=e.hasGetValueBeenCalled,i){t.next=5;break}return jt(this.visitor.config,ft,'For the visitor "{0}", no flags were found with the key "{1}". As a result, user exposure will not be sent.',this.visitor.visitorId,n),this.sendFlagTroubleshooting(re.VISITOR_EXPOSED_FLAG_NOT_FOUND,n,r),t.abrupt("return");case 5:return o||(jt(this.visitor.config,ft,'Visitor "{0}", the flag with the key "{1}" has been exposed without calling the `getValue` method first.',this.visitor.visitorId,n),this.sendFlagTroubleshooting(re.FLAG_VALUE_NOT_CALLED,n,r,!0)),null==r||null===i.value||qt(i.value,r)||(jt(this.visitor.config,ft,'For the visitor "{0}", the flag with key "{1}" has been exposed despite having a different type compared to the default value',this.visitor.visitorId,n),this.sendFlagTroubleshooting(re.VISITOR_EXPOSED_TYPE_WARNING,n,r)),t.next=9,this.sendActivate(i,r);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"sendFlagTroubleshooting",value:function(t,e,n,i){var r,o=new le({label:t,logLevel:Nt.WARNING,visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,visitorSessionId:this.visitor.instanceId,flagshipInstanceId:null==(r=this.visitor.sdkInitialData)?void 0:r.instanceId,traffic:this.visitor.traffic,config:this.config,visitorContext:this.visitor.context,flagKey:e,flagDefault:n,visitorExposed:i});this.sendTroubleshootingHit(o)}},{key:"getFlagValue",value:function(t){var e=t.key,n=t.defaultValue,i=t.flag,r=t.visitorExposed;return i?(r&&this.sendActivate(i,n),null===i.value?n:null==n||qt(i.value,n)?(Ut(this.config,ct,"Visitor {0}, Flag for key {1} returns value {2}",this.visitor.visitorId,e,i.value),i.value):(jt(this.config,ct,'For the visitor "{0}", the flag with key "{1}" has a different type compared to the default value. Therefore, the default value "{2}" has been returned.',this.visitor.visitorId,e,n),this.sendFlagTroubleshooting(re.GET_FLAG_VALUE_TYPE_WARNING,e,n,r),n)):(jt(this.config,ct,'For the visitor "{0}", no flags were found with the key "{1}". Therefore, the default value "{2}" has been returned.',this.visitor.visitorId,e,n),this.sendFlagTroubleshooting(re.GET_FLAG_VALUE_FLAG_NOT_FOUND,e,n,r),n)}},{key:"SendFlagMetadataTroubleshooting",value:function(t){var e;jt(this.config,lt,ht,this.visitor.visitorId,t);var n=new le({label:re.GET_FLAG_METADATA_TYPE_WARNING,logLevel:Nt.WARNING,visitorId:this.visitor.visitorId,anonymousId:this.visitor.anonymousId,visitorSessionId:this.visitor.instanceId,flagshipInstanceId:null==(e=this.visitor.sdkInitialData)?void 0:e.instanceId,traffic:this.visitor.traffic,config:this.config,visitorContext:this.visitor.context,flagKey:t});this.sendTroubleshootingHit(n)}},{key:"getFlagMetadata",value:function(t){var e=t.key,n=t.flag;return n?new $n({campaignId:n.campaignId,campaignName:n.campaignName,variationGroupId:n.variationGroupId,variationGroupName:n.variationGroupName,variationId:n.variationId,variationName:n.variationName,isReference:!!n.isReference,campaignType:n.campaignType,slug:n.slug}):(jt(this.config,lt,ht,this.visitor.visitorId,e),this.SendFlagMetadataTroubleshooting(e),$n.Empty())}}]),y}(wn);var ri=function(t){l(k,t);var n,i,r,o,s,c,f,h,d,v,y,m,I=(y=k,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(y);if(m){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return g(this,t)});function k(){return I.apply(this,arguments)}return a(k,[{key:"lookupHits",value:(v=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return v.apply(this,arguments)})},{key:"lookupVisitor",value:(d=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return d.apply(this,arguments)})},{key:"cacheVisitor",value:(h=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)})},{key:"sendHit",value:(f=e(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.log("sendHit");case 1:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"sendHits",value:(c=e(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.log("sendHits");case 1:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"fetchFlags",value:(s=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.log("fetchFlags");case 1:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"getFlagValue",value:function(t){return this.log("Flag.value"),t.defaultValue}},{key:"visitorExposed",value:(o=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.log(ft);case 1:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"getFlagMetadata",value:function(t){var e=$n.Empty();return Mt(this.config,lt,gt,this.visitor.visitorId,t.key,e),e}},{key:"sendActivate",value:(r=e(u().mark((function t(e,n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(t,e){return r.apply(this,arguments)})},{key:"sendTroubleshootingHit",value:(i=e(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(t){return i.apply(this,arguments)})},{key:"sendSdkConfigAnalyticHit",value:(n=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})},{key:"log",value:function(t){Mt(this.config,t,H,this.visitor.visitorId,t,wt[wt.SDK_NOT_INITIALIZED])}}]),k}(ii);var oi=function(t){l(k,t);var n,i,r,o,s,c,f,h,d,v,y,m,I=(y=k,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(y);if(m){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return g(this,t)});function k(){return I.apply(this,arguments)}return a(k,[{key:"setConsent",value:function(t){this.visitor.hasConsented=t}},{key:"updateContext",value:function(){this.log("updateContext")}},{key:"clearContext",value:function(){this.log("clearContext")}},{key:"lookupHits",value:(v=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return v.apply(this,arguments)})},{key:"lookupVisitor",value:(d=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return d.apply(this,arguments)})},{key:"cacheVisitor",value:(h=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)})},{key:"cacheHit",value:(f=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return f.apply(this,arguments)})},{key:"fetchVisitorCampaigns",value:function(){return[]}},{key:"sendHit",value:(c=e(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.log("sendHit");case 1:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"sendHits",value:(s=e(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.log("sendHits");case 1:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"getFlagValue",value:function(t){return this.log("Flag.value"),t.defaultValue}},{key:"visitorExposed",value:(o=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.log(ft);case 1:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"getFlagMetadata",value:function(t){var e=$n.Empty();return Lt(this.config,lt,pt,this.visitor.visitorId,t.key,e),e}},{key:"sendTroubleshootingHit",value:(r=e(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)})},{key:"sendSdkConfigAnalyticHit",value:(i=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"sendActivate",value:(n=e(u().mark((function t(e,n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(t,e){return n.apply(this,arguments)})},{key:"log",value:function(t){Lt(this.config,t,H,this.visitor.visitorId,t,wt[wt.SDK_PANIC])}}]),k}(ii);var si=function(t){l(I,t);var n,i,r,o,s,c,f,h,d,v,y,m=(v=I,y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(v);if(y){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return g(this,t)});function I(){return m.apply(this,arguments)}return a(I,[{key:"lookupHits",value:(d=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return d.apply(this,arguments)})},{key:"lookupVisitor",value:(h=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)})},{key:"cacheVisitor",value:(f=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return f.apply(this,arguments)})},{key:"cacheHit",value:(c=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return c.apply(this,arguments)})},{key:"fetchVisitorCampaigns",value:function(){return[]}},{key:"sendHit",value:(s=e(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.log("sendHit");case 1:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"sendHits",value:(o=e(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.log("sendHits");case 1:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"sendActivate",value:(r=e(u().mark((function t(e,n){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(t,e){return r.apply(this,arguments)})},{key:"visitorExposed",value:(i=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.log(ft);case 1:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"sendTroubleshootingHit",value:(n=e(u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)})},{key:"log",value:function(t){Vt(this.config,Pt("Method {0} is deactivated for visitor {1} : visitor did not consent.",t,this.visitor.visitorId),t)}}]),I}(ii),ai="FS_CLIENT_VISITOR",ci=function(){function t(){}return a(t,[{key:"murmurHash3Int32",value:function(t){var e,n,i,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=3&t.length,a=t.length-s;e=o;var c=3432918353,u=461845907;for(r=0;r<a;)i=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24,++r,e=27492+(65535&(n=5*(65535&(e=(e^=i=(65535&(i=(i=(65535&i)*c+(((i>>>16)*c&65535)<<16)&4294967295)<<15|i>>>17))*u+(((i>>>16)*u&65535)<<16)&4294967295)<<13|e>>>19))+((5*(e>>>16)&65535)<<16)&4294967295))+((58964+(n>>>16)&65535)<<16);switch(i=0,s){case 3:i^=(255&t.charCodeAt(r+2))<<16;case 2:i^=(255&t.charCodeAt(r+1))<<8;case 1:e^=i=(65535&(i=(i=(65535&(i^=255&t.charCodeAt(r)))*c+(((i>>>16)*c&65535)<<16)&4294967295)<<15|i>>>17))*u+(((i>>>16)*u&65535)<<16)&4294967295}return e^=t.length,e=2246822507*(65535&(e^=e>>>16))+((2246822507*(e>>>16)&65535)<<16)&4294967295,e=3266489909*(65535&(e^=e>>>13))+((3266489909*(e>>>16)&65535)<<16)&4294967295,(e^=e>>>16)>>>0}}]),t}();function ui(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function fi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ui(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ui(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var li=function(t){l(r,t);var e,n,i=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=p(e);if(n){var r=p(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return g(this,t)});function r(t){var e,n=t.visitorId,r=t.configManager,o=t.context,s=t.isAuthenticated,a=t.hasConsented,c=t.initialFlagsData,u=t.initialCampaigns,f=t.monitoringData,l=t.onFetchFlagsStatusChanged;At(h(e=i.call(this)),"lastFetchFlagsTimestamp",0),e._exposedVariations={},e._sdkInitialData=f,e._instanceId=Kt(),e._isCleaningDeDuplicationCache=!1,e.deDuplicationCache={},e._context={},e._configManager=r;var g=e.config.reuseVisitorIds?function(){var t=null;try{t=localStorage.getItem(ai)}catch(t){}return t?JSON.parse(t):null}():null;return g&&Ut(e.config,q,"Visitor profile has been loaded {0}",g),e.visitorId=n||(!s&&null!=g&&g.anonymousId?null==g?void 0:g.anonymousId:null==g?void 0:g.visitorId)||e.generateVisitorId(),e.campaigns=[],e._anonymousId=null,s&&(e._anonymousId=(null==g?void 0:g.anonymousId)||Kt()),e.setConsent(a||!1),e.updateContext(o),e.loadPredefinedContext(),Ut(e.config,q,"Predefined Context have been loaded {0}",{fs_client:y.name,fs_version:y.version,fs_users:e.visitorId}),e.updateCache(),e.setInitialFlags(c),e.setInitializeCampaigns(u,!!c),e.onFetchFlagsStatusChanged=l,e.fetchStatus={status:Zn.FETCH_REQUIRED,reason:Dt.VISITOR_CREATED},Ut(e.config,q,"Visitor {0} has been created with context {1}, isAuthenticated:{2} and hasConsented {3}",e.visitorId,e.context,!!s,!!e.hasConsented),e}return a(r,[{key:"getCampaignsPromise",get:function(){return this._getCampaignsPromise},set:function(t){this._getCampaignsPromise=t}},{key:"onFetchFlagsStatusChanged",get:function(){return this._onFetchFlagsStatusChanged},set:function(t){this._onFetchFlagsStatusChanged=t}},{key:"fetchStatus",get:function(){return this._fetchStatus},set:function(t){this._fetchStatus=t,this.onFetchFlagsStatusChanged&&this.onFetchFlagsStatusChanged(t)}},{key:"segmentHitTroubleshooting",get:function(){return this._segmentHitTroubleshooting},set:function(t){this._segmentHitTroubleshooting=t}},{key:"consentHitTroubleshooting",get:function(){return this._consentHitTroubleshooting},set:function(t){this._consentHitTroubleshooting=t}},{key:"sdkInitialData",get:function(){return this._sdkInitialData}},{key:"getSdkStatus",value:function(){return r.SdkStatus}},{key:"visitorCacheStatus",get:function(){return this._visitorCacheStatus},set:function(t){this._visitorCacheStatus=t}},{key:"traffic",get:function(){return this._traffic},set:function(t){this._traffic=t}},{key:"instanceId",get:function(){return this._instanceId}},{key:"generateVisitorId",value:function(){var t=Kt();return Ut(this.config,q,"Visitor identifier is empty. A UUID {0} has been generated.",t),t}},{key:"clearDeDuplicationCache",value:function(t){if(!this._isCleaningDeDuplicationCache){this._isCleaningDeDuplicationCache=!0;for(var e=0,n=Object.entries(this.deDuplicationCache);e<n.length;e++){var i=ve(n[e],2),r=i[0],o=i[1];Date.now()-o>1e3*t&&delete this.deDuplicationCache[r]}this._isCleaningDeDuplicationCache=!1}}},{key:"setInitialFlags",value:function(t){var e=this;this._flags=new Map,Array.isArray(t)&&t.forEach((function(t){var n;e._flags.set(t.key,{key:t.key,campaignId:t.campaignId,campaignName:t.campaignName,variationGroupId:t.variationGroupId,variationGroupName:t.variationGroupName,variationId:t.variationId,variationName:t.variationName,isReference:t.isReference,value:null==(n=zt(t.hex,e.config))?void 0:n.v,slug:t.slug,campaignType:t.campaignType})}))}},{key:"setInitializeCampaigns",value:function(t,e){t&&Array.isArray(t)&&!e&&this.getStrategy().updateCampaigns(t)}},{key:"updateCache",value:function(){!function(t){try{localStorage.setItem(ai,JSON.stringify(t))}catch(t){}}({visitorId:this.visitorId,anonymousId:this.anonymousId})}},{key:"loadPredefinedContext",value:function(){this.context.fs_client=y.name,this.context.fs_version=y.version,this.context.fs_users=this.visitorId}},{key:"visitorId",get:function(){return this._visitorId},set:function(t){t&&"string"==typeof t?(this._visitorId=t,this.loadPredefinedContext(),this.visitorCache=void 0):Ft(this.config,"visitorId must not be null or empty","VISITOR ID")}},{key:"hasConsented",get:function(){return this._hasConsented},set:function(t){this._hasConsented=t}},{key:"setConsent",value:function(t){this.hasConsented=t,this.getStrategy().setConsent(t)}},{key:"context",get:function(){return this._context},set:function(t){this._context={},this.updateContext(t)}},{key:"flagsData",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"configManager",get:function(){return this._configManager}},{key:"config",get:function(){return this.configManager.config}},{key:"campaigns",get:function(){return this._campaigns},set:function(t){this._campaigns=t}},{key:"anonymousId",get:function(){return this._anonymousId},set:function(t){this._anonymousId=t}},{key:"getStrategy",value:function(){var t={visitor:this,murmurHash:new ci},e=this.getSdkStatus();return void 0===e||e===wt.SDK_NOT_INITIALIZED?new ri(t):e===wt.SDK_PANIC?new oi(t):this.hasConsented?new ii(t):new si(t)}},{key:"sendExposedVariation",value:function(t){var e=this;t&&Gt()&&(this._exposedVariations[t.campaignId]={campaignId:t.campaignId,variationGroupId:t.variationGroupId,variationId:t.variationId},window.flagship=fi(fi({},window.flagship),{},{exposedVariations:this._exposedVariations}),this.config.isQAModeEnabled)&&(Object.keys(this._exposedVariations).length>=10&&(We(this._exposedVariations),this._exposedVariations={}),this._sendExposedVariationTimeoutId&&clearTimeout(this._sendExposedVariationTimeoutId),0!==Object.keys(this._exposedVariations).length&&(this._sendExposedVariationTimeoutId=setTimeout((function(){We(e._exposedVariations),e._exposedVariations={}}),100)))}}]),r}(d.EventEmitter),hi=function(t){return t.FETCHED="FETCHED",t.FETCH_REQUIRED="FETCH_REQUIRED",t.NOT_FOUND="NOT_FOUND",t.PANIC="PANIC",t}({});function gi(t){var e,n,i=t.flagDTO;if(t.config.isQAModeEnabled&&Gt()&&i&&null!=(e=window)&&null!=(n=e.flagship)&&n.forcedVariations){var r=window.flagship.forcedVariations[i.campaignId];if(r){var o=r.campaignId,s=r.campaignName,a=r.variationGroupId,c=r.variationGroupName,u=r.campaignType,f=r.CampaignSlug,l=r.variation,h=l.modifications.value[i.key];return{key:i.key,campaignId:o,campaignName:s,variationGroupId:a,variationGroupName:c,variationId:l.id,variationName:l.name,isReference:!!l.reference,campaignType:u,slug:f,value:h}}}}var pi,di=function(){function t(t){At(this,"hasGetValueBeenCalled",!1);var e=t.key,n=t.visitor;this._key=e,this._visitor=n}var n;return a(t,[{key:"exists",value:function(){var t;if(!this._visitor)return!1;var e=null==(t=this._visitor)?void 0:t.flagsData.get(this._key),n=gi({flagDTO:e,config:this._visitor.config})||e;return!!(null!=n&&n.campaignId&&null!=n&&n.variationId&&null!=n&&n.variationGroupId)}},{key:"metadata",get:function(){if(!this._visitor)return $n.Empty();var t=this._visitor.flagsData.get(this._key),e=gi({flagDTO:t,config:this._visitor.config});return this._visitor.getFlagMetadata({key:this._key,flag:e||t})}},{key:"visitorExposed",value:(n=e(u().mark((function t(){var e,n;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._visitor){t.next=2;break}return t.abrupt("return");case 2:return e=this._visitor.flagsData.get(this._key),n=gi({flagDTO:e,config:this._visitor.config}),t.abrupt("return",this._visitor.visitorExposed({key:this._key,flag:n||e,defaultValue:this._defaultValue,hasGetValueBeenCalled:this.hasGetValueBeenCalled}));case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"getValue",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._defaultValue=t,this.hasGetValueBeenCalled=!0,!this._visitor)return t;var n=this._visitor.flagsData.get(this._key),i=gi({flagDTO:n,config:this._visitor.config})||n;return this._visitor.sendExposedVariation(i),this._visitor.getFlagValue({key:this._key,defaultValue:t,flag:i,visitorExposed:e})}},{key:"status",get:function(){var t,e,n,i,r,o;return(null==(t=this._visitor)||null==(e=t.fetchStatus)?void 0:e.status)===Zn.PANIC?hi.PANIC:this.exists()?(null==(n=this._visitor)||null==(i=n.fetchStatus)?void 0:i.status)===Zn.FETCH_REQUIRED||(null==(r=this._visitor)||null==(o=r.fetchStatus)?void 0:o.status)===Zn.FETCHING?hi.FETCH_REQUIRED:hi.FETCHED:hi.NOT_FOUND}}]),t}();n(189),pi=Symbol.iterator;var vi=function(){function t(t){var e=this;At(this,"_keys",new Set);var n=t.visitor,i=t.flags;this._visitor=n,this._flags=i||new Map,0===this._flags.size?(this._keys=new Set(null==n?void 0:n.flagsData.keys()),this._keys.forEach((function(t){e._flags.set(t,new di({key:t,visitor:n}))}))):this._keys=new Set(this._flags.keys())}var n;return a(t,[{key:"size",get:function(){return this._keys.size}},{key:"get",value:function(t){var e,n,i;return this._flags.get(t)||((null==(e=this._visitor)?void 0:e.config)&&jt(null==(n=this._visitor)?void 0:n.config,ut,'For the visitor "{0}", no flags were found with the key "{1}". Therefore, an empty flag has been returned.',null==(i=this._visitor)?void 0:i.visitorId,t),new di({key:t}))}},{key:"has",value:function(t){return this._keys.has(t)}},{key:"keys",value:function(){return this._keys}},{key:pi,value:function(){var t=this,e=0,n=Array.from(this._keys);return{next:function(){if(e<n.length){var i=n[e++];return{value:[i,t._flags.get(i)],done:!1}}return{value:null,done:!0}}}}},{key:"filter",value:function(e){var n=this,i=new Map;return this._flags.forEach((function(t,r){e(t,r,n)&&i.set(r,t)})),new t({visitor:this._visitor,flags:i})}},{key:"exposeAll",value:(n=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(Array.from(this._flags.values(),(function(t){return t.visitorExposed()})));case 2:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"getMetadata",value:function(){var t=new Map;return this._flags.forEach((function(e,n){t.set(n,e.metadata)})),t}},{key:"toJSON",value:function(){var t=[];return this._flags.forEach((function(e,n){var i,r,o=e.metadata;t.push({key:n,campaignId:o.campaignId,campaignName:o.campaignName,variationGroupId:o.variationGroupId,variationGroupName:o.variationGroupName,variationId:o.variationId,variationName:o.variationName,isReference:o.isReference,campaignType:o.campaignType,slug:o.slug,hex:(i={v:e.getValue(null,!1)},r=JSON.stringify(i),Array.from(r,(function(t){return t.charCodeAt(0).toString(16)})).join(""))})})),t}},{key:"forEach",value:function(t){var e=this;this._flags.forEach((function(n,i){t(n,i,e)}))}}]),t}();var yi=function(t){l(s,t);var n,i,r,o=(i=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(i);if(r){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return g(this,t)});function s(){return o.apply(this,arguments)}return a(s,[{key:"updateContext",value:function(t,e){this.getStrategy().updateContext(t,e),this.loadPredefinedContext()}},{key:"clearContext",value:function(){this.getStrategy().clearContext()}},{key:"getFlag",value:function(t){return this.fetchStatus.status!==Zn.FETCHED&&this.fetchStatus.status!==Zn.FETCHING&&jt(this.config,ut,function(t){var e="";switch(t){case Dt.VISITOR_CREATED:e="Visitor `{0}` has been created ".concat(V);break;case Dt.UPDATE_CONTEXT:e="Visitor context for visitor `{0}` has been updated ".concat(V);break;case Dt.AUTHENTICATE:e="Visitor `{0}` has been authenticated ".concat(V);break;case Dt.UNAUTHENTICATE:e="Visitor `{0}` has been unauthenticated ".concat(V);break;case Dt.FETCH_ERROR:e='There was an error while fetching flags for visitor `{0}`. So the value of the flag `{1}` may be outdated"';break;case Dt.READ_FROM_CACHE:e="Flags for visitor `{0}` have been fetched from cache"}return e}(this.fetchStatus.reason),this.visitorId,t),new di({key:t,visitor:this})}},{key:"getFlags",value:function(){return new vi({visitor:this})}},{key:"sendHit",value:function(t){return this.getStrategy().sendHit(t)}},{key:"sendHits",value:function(t){return this.getStrategy().sendHits(t)}},{key:"authenticate",value:function(t){this.getStrategy().authenticate(t),this.updateCache()}},{key:"unauthenticate",value:function(){this.getStrategy().unauthenticate(),this.updateCache()}},{key:"fetchFlags",value:(n=e(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getStrategy().lookupVisitor();case 2:return t.next=4,this.getStrategy().fetchFlags();case 4:return t.next=6,this.getStrategy().cacheVisitor();case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"visitorExposed",value:function(t){return this.getStrategy().visitorExposed(t)}},{key:"getFlagValue",value:function(t){return this.getStrategy().getFlagValue(t)}},{key:"getFlagMetadata",value:function(t){return this.getStrategy().getFlagMetadata(t)}}]),s}(li);function mi(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Ii(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ii(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function Ii(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}n(9826),n(6755),n(7852);var ki=function(t){l(v,t);var n,i,o,s,c,f,h,d=(f=v,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(f);if(h){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return g(this,t)});function v(t,e,n){var i;return(i=d.call(this,t,e))._murmurHash=n,i._isFirstPooling=!0,e.initialBucketing&&(i._bucketingContent=e.initialBucketing),i}return a(v,[{key:"finishLoop",value:function(t){var e=t.response,n=t.headers,i=t.url,r=t.now;if(200===e.status){Ut(this.config,it,"Polling event with code status 200 : {0}",e.body),this._bucketingContent=e.body,this._lastBucketingTimestamp=(new Date).toISOString();var o=new le({visitorId:this.flagshipInstanceId,flagshipInstanceId:this.flagshipInstanceId,label:re.SDK_BUCKETING_FILE,traffic:0,logLevel:Nt.INFO,config:this.config,httpRequestHeaders:n,httpRequestMethod:"POST",httpRequestUrl:i,httpResponseBody:null==e?void 0:e.body,httpResponseHeaders:null==e?void 0:e.headers,httpResponseCode:null==e?void 0:e.status,httpResponseTime:Date.now()-r});this.trackingManager.sendTroubleshootingHit(o)}else 304===e.status&&Bt(this.config,"Polling event with code status 304",it);if(e.headers&&e.headers["last-modified"]){var s=e.headers["last-modified"];this._lastModified!==s&&this.config.onBucketingUpdated&&this.config.onBucketingUpdated(new Date(s)),this._lastModified=s}this._isFirstPooling&&(this._isFirstPooling=!1,this.updateFlagshipStatus(wt.SDK_INITIALIZED)),"function"==typeof this.config.onBucketingSuccess&&this.config.onBucketingSuccess({status:e.status,payload:this._bucketingContent}),this._isPooling=!1}},{key:"startPolling",value:(c=e(u().mark((function t(){var e,n=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=1e3*this.config.pollingInterval,Vt(this.config,"Bucketing polling process has been started",it),t.next=4,this.polling();case 4:if(0!==e){t.next=6;break}return t.abrupt("return");case 6:this._intervalID=setInterval((function(){n.polling()}),e);case 7:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"polling",value:(s=e(u().mark((function t(){var e,n,i,r,o,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._isPooling){t.next=2;break}return t.abrupt("return");case 2:return this._isPooling=!0,this._isFirstPooling&&this.updateFlagshipStatus(wt.SDK_INITIALIZING),n=Pt("https://cdn.flagship.io/{0}/bucketing.json",this.config.envId),At(e={},Z,"".concat(this.config.apiKey)),At(e,tt,y.name),At(e,et,y.version),At(e,X,nt),i=e,r=Date.now(),t.prev=7,this._lastModified&&(i["if-modified-since"]=this._lastModified),t.next=11,this._httpClient.getAsync(n,{headers:i,timeout:this.config.timeout,nextFetchConfig:this.config.nextFetchConfig});case 11:o=t.sent,this.finishLoop({response:o,headers:i,url:n,now:r}),t.next=23;break;case 15:t.prev=15,t.t0=t.catch(7),this._isPooling=!1,Ft(this.config,Qt("Polling event failed with error",{url:n,headers:i,nextFetchConfig:this.config.nextFetchConfig,method:"GET",duration:Date.now()-r}),it),this._isFirstPooling&&this.updateFlagshipStatus(wt.SDK_NOT_INITIALIZED),"function"==typeof this.config.onBucketingFail&&this.config.onBucketingFail(new Error(t.t0)),s=new le({visitorId:this.flagshipInstanceId,flagshipInstanceId:this.flagshipInstanceId,label:re.SDK_BUCKETING_FILE_ERROR,traffic:0,logLevel:Nt.INFO,config:this.config,httpRequestHeaders:i,httpRequestMethod:"GET",httpRequestUrl:n,httpResponseBody:null==t.t0?void 0:t.t0.message,httpResponseHeaders:null==t.t0?void 0:t.t0.headers,httpResponseCode:null==t.t0?void 0:t.t0.statusCode,httpResponseTime:Date.now()-r}),this.trackingManager.sendTroubleshootingHit(s);case 23:case"end":return t.stop()}}),t,this,[[7,15]])}))),function(){return s.apply(this,arguments)})},{key:"stopPolling",value:function(){clearInterval(this._intervalID),this._isPooling=!1,Vt(this.config,"Bucketing polling process has been stopped",it)}},{key:"sendContext",value:(o=e(u().mark((function t(e){var n,i,r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(Object.keys(e.context).length<=3)&&e.hasConsented){t.next=3;break}return t.abrupt("return");case 3:return i=new Fe({context:e.context,visitorId:e.visitorId,anonymousId:e.anonymousId}),t.next=6,e.sendHit(i);case 6:r=new le({label:re.VISITOR_SEND_HIT,logLevel:Nt.INFO,traffic:e.traffic||0,visitorId:e.visitorId,visitorSessionId:e.instanceId,flagshipInstanceId:null==(n=e.sdkInitialData)?void 0:n.instanceId,anonymousId:e.anonymousId,config:this.config,hitContent:i.toApiKeys()}),e.segmentHitTroubleshooting=r,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),Ft(this.config,t.t0.message||t.t0,"sendContext");case 13:case"end":return t.stop()}}),t,this,[[0,10]])}))),function(t){return o.apply(this,arguments)})},{key:"getThirdPartySegment",value:(i=e(u().mark((function t(e){var n,i,r,o,s,a,c,f;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Pt("https://api-data-connector.flagship.io/accounts/{0}/segments/{1}",this.config.envId,e),i=Date.now(),r={},t.prev=3,t.next=6,this._httpClient.getAsync(n,{nextFetchConfig:this.config.nextFetchConfig});case 6:if(o=t.sent,s=o.body,Array.isArray(s)){a=mi(s);try{for(a.s();!(c=a.n()).done;)f=c.value,r["".concat(f.partner,"::").concat(f.segment)]=f.value}catch(t){a.e(t)}finally{a.f()}}t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),Ft(this.config,Qt(t.t0.message||t.t0,{url:n,nextFetchConfig:this.config.nextFetchConfig,duration:Date.now()-i}),"GET_THIRD_PARTY_SEGMENT");case 14:return t.abrupt("return",r);case 15:case"end":return t.stop()}}),t,this,[[3,11]])}))),function(t){return i.apply(this,arguments)})},{key:"getCampaignsAsync",value:(n=e(u().mark((function t(e){var n,i,r,o,s,a=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._bucketingContent){t.next=2;break}return t.abrupt("return",null);case 2:if(r=null==(n=this._bucketingContent)||null==(i=n.accountSettings)?void 0:i.troubleshooting,this.troubleshooting=void 0,r&&(this.troubleshooting={startDate:new Date(r.startDate),endDate:new Date(r.endDate),timezone:r.timezone,traffic:r.traffic}),!this._bucketingContent.panic){t.next=8;break}return this.panic=!0,t.abrupt("return",[]);case 8:if(this.panic=!1,this._bucketingContent.campaigns){t.next=11;break}return t.abrupt("return",null);case 11:if(!this.config.fetchThirdPartyData){t.next=16;break}return t.next=14,this.getThirdPartySegment(e.visitorId);case 14:o=t.sent,e.updateContext(o);case 16:return t.next=18,this.sendContext(e);case 18:return s=[],this._bucketingContent.campaigns.forEach((function(t){var n,i=a.getVisitorCampaigns(t.variationGroups,t.id,t.type,e);i&&(i.slug=null!=(n=t.slug)?n:null,i.name=t.name,s.push(i))})),t.abrupt("return",s);case 21:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getVisitorCampaigns",value:function(t,e,n,i){var r,o=mi(t);try{for(o.s();!(r=o.n()).done;){var s=r.value;if(this.isMatchTargeting(s,i)){var a=this.getVariation(s,i);return a?{id:e,variation:a,variationGroupId:s.id,variationGroupName:s.name,type:n}:null}}}catch(t){o.e(t)}finally{o.f()}return null}},{key:"getVariation",value:function(t,e){var n,i=this,o=this._murmurHash.murmurHash3Int32(t.id+e.visitorId)%100,s=0,a=mi(t.variations);try{var c=function(){var r,a,c=n.value,u=null==(r=e.visitorCache)||null==(a=r.data)?void 0:a.assignmentsHistory,f=u?u[t.id]:null;if(f){var l=t.variations.find((function(t){return t.id===f}));return l?(Ut(i.config,mt,"Visitor {0}, Variation {1} selected from cache.",e.visitorId,l.id),{v:{id:l.id,name:l.name,modifications:l.modifications,reference:l.reference}}):"continue"}return void 0===c.allocation||0===c.allocation?"continue":(s+=c.allocation,o<s?(Ut(i.config,mt,"Visitor {0}, Variation {1} selected with allocation {2}.",e.visitorId,c.id,s),{v:{id:c.id,modifications:c.modifications,reference:c.reference,name:c.name}}):void 0)};for(a.s();!(n=a.n()).done;){var u=c();if("continue"!==u&&"object"===r(u))return u.v}}catch(t){a.e(t)}finally{a.f()}return null}},{key:"isMatchTargeting",value:function(t,e){var n=this;return!!(t&&t.targeting&&t.targeting.targetingGroups)&&t.targeting.targetingGroups.some((function(t){return n.checkAndTargeting(t.targetings,e)}))}},{key:"isANDListOperator",value:function(t){return["NOT_EQUALS","NOT_CONTAINS"].includes(t)}},{key:"checkAndTargeting",value:function(t,e){var n,i,r=!1,o=mi(t);try{for(o.s();!(i=o.n()).done;){var s=i.value,a=s.key,c=s.value,u=s.operator;if("EXISTS"===u){if(a in e.context){r=!0;continue}r=!1;break}if("NOT_EXISTS"!==u)if("fs_all_users"!==a){if("fs_users"===a)n=e.visitorId;else{if(!(a in e.context)){r=!1;break}n=e.context[a]}if(!(r=this.testOperator(u,n,c)))break}else r=!0;else{if(a in e.context){r=!1;break}r=!0}}}catch(t){o.e(t)}finally{o.f()}return r}},{key:"testListOperatorLoop",value:function(t,e,n,i){var r,o=i,s=mi(n);try{for(s.s();!(r=s.n()).done;){var a=r.value;if((o=this.testOperator(t,e,a))!==i)break}}catch(t){s.e(t)}finally{s.f()}return o}},{key:"testListOperator",value:function(t,e,n){return this.isANDListOperator(t)?this.testListOperatorLoop(t,e,n,!0):this.testListOperatorLoop(t,e,n,!1)}},{key:"testOperator",value:function(t,e,n){var i;if(Array.isArray(n))return this.testListOperator(t,e,n);switch(t){case"EQUALS":i=e===n;break;case"NOT_EQUALS":i=e!==n;break;case"CONTAINS":i=e.toString().includes(n.toString());break;case"NOT_CONTAINS":i=!e.toString().includes(n.toString());break;case"GREATER_THAN":i=e>n;break;case"LOWER_THAN":i=e<n;break;case"GREATER_THAN_OR_EQUALS":i=e>=n;break;case"LOWER_THAN_OR_EQUALS":i=e<=n;break;case"STARTS_WITH":i=e.toString().startsWith(n.toString());break;case"ENDS_WITH":i=e.toString().endsWith(n.toString());break;default:i=!1}return i}}]),v}(he);function bi(t,e,n){return bi=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct.bind():function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&f(r,n.prototype),r},bi.apply(null,arguments)}function _i(t){var e="function"==typeof Map?new Map:void 0;return _i=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return bi(t,arguments,p(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),f(i,t)},_i(t)}var Ci=function(t){l(r,t);var e,n,i=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=p(e);if(n){var r=p(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return g(this,t)});function r(t,e,n){var r;return(r=i.call(this,e))._statusCode=t,r._headers=n,r}return a(r,[{key:"headers",get:function(){return this._headers}},{key:"statusCode",get:function(){return this._statusCode}}]),r}(_i(Error)),Oi=function(t,e){return fetch(t,e)},Ti=AbortController,xi=function(){function t(){}var n,i,r;return a(t,[{key:"getResponse",value:(r=e(u().mark((function t(e){var n,i,r,o,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.headers.get("Content-Type"),i="application/json"===n,o={},e.headers.forEach((function(t,e){o[e]=t})),!i||!e.ok||204===e.status){t.next=8;break}return t.next=7,e.json();case 7:r=t.sent;case 8:if(!(e.status>=400)){t.next=13;break}return t.next=11,e.text();case 11:throw s=t.sent,new Ci(e.status,s||e.statusText,o);case 13:return t.abrupt("return",{status:e.status,body:r,headers:o});case 14:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)})},{key:"getAsync",value:(i=e(u().mark((function t(e,n){var i,r,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new Ti,r=setTimeout((function(){return i.abort()}),1e3*(null!=n&&n.timeout?n.timeout:2)),t.prev=2,t.next=5,Oi(e,{method:"GET",headers:null==n?void 0:n.headers,signal:i.signal,keepalive:!0,next:null==n?void 0:n.nextFetchConfig});case 5:return o=t.sent,t.abrupt("return",this.getResponse(o));case 7:return t.prev=7,clearTimeout(r),t.finish(7);case 10:case"end":return t.stop()}}),t,this,[[2,,7,10]])}))),function(t,e){return i.apply(this,arguments)})},{key:"postAsync",value:(n=e(u().mark((function t(e,n){var i,r,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new Ti,r=setTimeout((function(){return i.abort()}),n.timeout?1e3*n.timeout:2e3),t.prev=2,t.next=5,Oi(e,{method:"POST",headers:n.headers,body:JSON.stringify(n.body),signal:i.signal,keepalive:!0,next:null==n?void 0:n.nextFetchConfig});case 5:return o=t.sent,t.abrupt("return",this.getResponse(o));case 7:return t.prev=7,clearTimeout(r),t.finish(7);case 10:case"end":return t.stop()}}),t,this,[[2,,7,10]])}))),function(t,e){return n.apply(this,arguments)})}]),t}();var Ei=function(t){l(r,t);var e,n,i=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=p(e);if(n){var r=p(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return g(this,t)});function r(){return i.apply(this,arguments)}return a(r,[{key:"getCampaignsAsync",value:function(e){return t.prototype.getCampaignsAsync.call(this,e)}}]),r}(ki);function Si(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function wi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Si(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Si(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ri=function(t){l(r,t);var e,n,i=(e=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=p(e);if(n){var r=p(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return g(this,t)});function r(t){return i.call(this,wi(wi({},t),{},{decisionMode:Rt.BUCKETING_EDGE}))}return a(r)}(Yt),Ai=(n(1637),n(4765),function(t){return document.querySelector('script[src*="'.concat(t,'"]'))});function Ni(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Di(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ni(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ni(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Pi(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];"TypeScript"===y.name&&document.location.reload();var e=new CustomEvent(qe.FsTriggerRendering,{detail:{forcedReFetchFlags:t}});window.dispatchEvent(e)}function Mi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Fi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mi(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ji(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==(e=window)||null==(n=e.frames)||!n.ABTastyQaAssistant){var r={},o=sessionStorage.getItem(A);try{r=JSON.parse(o||"{}")}catch(t){console.error("Error parsing sessionForcedVariations",t)}window.flagship=Fi(Fi({},window.flagship),{},{envId:t.envId,forcedVariations:r}),window.addEventListener("message",(function e(n){!function(t){var e,n,i,r,o=t.event,s=t.config,a=t.func;if(s.isQAModeEnabled&&Gt())switch(o.data.name){case Be.FsQaAssistantReady:null!=(e=window.flagship)&&e.visitorVariations&&Je(null==(i=window.flagship)?void 0:i.visitorVariations),null!=(n=window.flagship)&&n.exposedVariations&&We(null==(r=window.flagship)?void 0:r.exposedVariations);break;case Be.MinimizeQaAssistantClose:case Be.QaAssistantClose:!function(t){var e,n=t.func;t.config.isQAModeEnabled=!1,sessionStorage.removeItem(R),n&&window.removeEventListener("message",n),null==(e=document.getElementById(N))||e.remove(),window.flagship=Di(Di({},window.flagship),{},{forcedVariations:{}}),Pi()}({config:s,func:a});break;case Be.FsApplyForcedVariations:!function(t){var e=t.value,n=sessionStorage.getItem(A),i={};try{i=JSON.parse(n||"{}")}catch(t){console.error("Error parsing sessionForcedVariations",t)}i=Di(Di({},i),e),sessionStorage.setItem(A,JSON.stringify(i)),window.flagship=Di(Di({},window.flagship),{},{forcedVariations:i}),Pi()}({value:o.data.value});break;case Be.FsResetForcedVariations:sessionStorage.removeItem(A),window.flagship=Di(Di({},window.flagship),{},{forcedVariations:{}}),Pi();break;case Be.FsTriggerRender:Pi(!0)}}({event:n,config:t,func:e})})),Lt(t,"QA assistant","Loading QA Assistant"),function(t){if(!Ai(E)&&!Ai(S)){var e=document.createElement("script");e.src=t,e.id=N,document.body.append(e)}}(i||O),t.isQAModeEnabled=!0,sessionStorage.setItem(R,"true")}}var Hi=function(){function t(){this.instanceId=Kt(),this._status=wt.SDK_NOT_INITIALIZED}var n,i;return a(t,[{key:"configManager",get:function(){return this._configManager},set:function(t){this._configManager=t}},{key:"setStatus",value:function(t){var e;if(this._status!==t){this._status=t,li.SdkStatus=t;var n,i,r,o,s=null==(e=this.getConfig())?void 0:e.onSdkStatusChanged;if(Lt(this._config,"SDK STATUS","SDK status has changed:  {0}",wt[t]),this.getConfig().decisionMode!==Rt.BUCKETING_EDGE)t===wt.SDK_INITIALIZED&&(null==(n=this.configManager)||null==(i=n.trackingManager)||i.startBatchingLoop()),t===wt.SDK_NOT_INITIALIZED&&(null==(r=this.configManager)||null==(o=r.trackingManager)||o.stopBatchingLoop());s&&s(t)}}},{key:"getStatus",value:function(){return this._status}},{key:"getConfig",value:function(){return this._config}},{key:"getVisitor",value:function(){return this._visitorInstance}},{key:"buildConfig",value:function(t){var e;switch(null==t?void 0:t.decisionMode){case Rt.BUCKETING:e=new Xt(t);break;case Rt.BUCKETING_EDGE:e=new Ri(t);break;default:e=new ne(t)}return e}},{key:"buildDecisionManager",value:function(t,e,n){var i,r=function(e){t.setStatus(e)};switch(e.decisionMode){case Rt.BUCKETING:(i=new ki(n,e,new ci)).statusChangedCallback(r),i.startPolling();break;case Rt.BUCKETING_EDGE:(i=new Ei(n,e,new ci)).statusChangedCallback(r);break;default:(i=new ge(n,e)).statusChangedCallback(r)}return i}},{key:"close",value:(i=e(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.close();case 2:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"newVisitor",value:function(e){return t.newVisitor(e)}}],[{key:"getInstance",value:function(){return this._instance||(this._instance=new this),this._instance}},{key:"getStatus",value:function(){return this.getInstance()._status}},{key:"getConfig",value:function(){return this.getInstance()._config}},{key:"getVisitor",value:function(){return this.getInstance().getVisitor()}},{key:"start",value:function(t,e,n){var i,r,o=this.getInstance(),s=o.buildConfig(n);if(s.envId=t,s.apiKey=e,o._config=s,s.onLog||s.logManager||(s.logManager=new pn),!t||!e)return o.setStatus(wt.SDK_NOT_INITIALIZED),Ft(s,F,B),o;Ut(s,B,"Flagship SDK version {0} is starting in {1} mode with config {2}",y.version,s.decisionMode,s),!s.hitCacheImplementation&&Gt()&&(s.hitCacheImplementation=new _n),!s.visitorCacheImplementation&&Gt()&&(s.visitorCacheImplementation=new On);var a=new xi,c=null==(i=o.configManager)?void 0:i.decisionManager;c instanceof ki&&s.decisionMode!==Rt.BUCKETING_EDGE&&c.stopPolling();var u=null==(r=o.configManager)?void 0:r.trackingManager;return u||(u=new gn(a,s,o.instanceId)),o.configManager=new ie(s,c,u),o.configManager.decisionManager=o.buildDecisionManager(o,s,a),o.configManager.decisionManager.trackingManager=u,o.configManager.decisionManager.flagshipInstanceId=o.instanceId,o._status!==wt.SDK_INITIALIZING&&o.setStatus(wt.SDK_INITIALIZED),Vt(s,Pt("Flagship SDK (version: {0}) {1}",y.version,wt[o._status]),B),function(t){var e;if(Gt()){var n=(At(e={},"fs_qa_assistant",O),At(e,"abtasty_qa_assistant",O),At(e,"fs_qa_assistant_staging",T),At(e,"abtasty_qa_assistant_staging",T),At(e,"fs_qa_assistant_local",x),At(e,"abtasty_qa_assistant_local",x),e),i=new URLSearchParams(window.location.search),r=Object.keys(n).find((function(t){return"true"===i.get(t)}))||"";t.isQAModeEnabled||r?ji(t,n[r]):function(t){Lt(t,"QA assistant","Listening for keyboard events to launch QA Assistant");var e={};document.addEventListener("keydown",(function(n){e[n.key]=!0,sessionStorage.removeItem(A),(e.Control||e.Alt)&&e.q&&e.a&&ji(t)})),document.addEventListener("keyup",(function(t){delete e[t.key]}))}(t)}}(s),o.lastInitializationTimestamp=(new Date).toISOString(),o}},{key:"close",value:(n=e(u().mark((function t(){var e,n,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null==(e=this._instance)||null==(n=e.configManager)||null==(i=n.trackingManager)?void 0:i.sendBatch();case 2:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"newVisitor",value:function(t){var e,n=t.visitorId,i=t.context,r=t.isAuthenticated,o=t.hasConsented,s=t.initialCampaigns,a=t.initialFlagsData,c=t.shouldSaveInstance,u=t.onFetchFlagsStatusChanged,f=null!=c?c:Gt();if(null==(e=this._instance)||!e.configManager){var l=this.getInstance(),h=new ne;h.logManager=new pn,l._config=h;var g=new xi,p=new gn(g,h),d=new ge(g,h);l.configManager=new ie(h,d,p),Ft(this.getConfig(),U,q)}void 0===o&&Ht(this.getConfig(),"Consent has not been specified. By default, consent is set to false, which may result in some features being deactivated.",q);var v=new yi({visitorId:n,context:i||{},isAuthenticated:null!=r&&r,hasConsented:null!=o&&o,configManager:this.getInstance().configManager,initialCampaigns:s,initialFlagsData:a,onFetchFlagsStatusChanged:u,monitoringData:{instanceId:this.getInstance().instanceId,lastInitializationTimestamp:this.getInstance().lastInitializationTimestamp,initialCampaigns:s,initialFlagsData:a}}),y=new St(v);return this.getInstance()._visitorInstance=f?y:void 0,f&&Ut(this.getConfig(),q,"Visitor {0} has been saved in SDK instance",y.visitorId),this.getConfig().fetchNow&&this.getConfig().decisionMode!==Rt.BUCKETING_EDGE&&y.fetchFlags(),y}}]),t}();const Li=Hi})();var r=self;for(var o in i)r[o]=i[o];i.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})();
//# sourceMappingURL=index.browser.js.map